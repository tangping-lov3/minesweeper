{"version":3,"sources":["../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Block.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/CIrcle.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Stores/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Stores/index.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Utils/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Utils/index.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Init.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Result/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Result/Mask.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Select/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Select/Option.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Overlay/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Overlay/Overlay.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Result/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Result/Result.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Select/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Select/Select.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/TopBar.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Utils/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Utils/vue.ts","../../file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/file:/Users/tonyptang/Desktop/cocos/Minesweeper/assets/Scripts/Wx.ts"],"names":["ccclass","_decorator","property","type","UITransform","Sprite","Button","Label","args","_this","__timer","__thunderCount","__colors","__status","__isThunder","__originBlocks","__position","__thunderColors","__aroundBlockPos","__colorIndex","__thunderTextColors","__thunderStore","useThunder","_initializerDefineProperty","__clickLock","value","__debug","_inheritsLoose","_proto","__reset","color","Color","fromHEX","this","Text","string","Circle","node","active","clearTimeout","start","on","Input","EventType","TOUCH_START","e","emitter","emit","getComponent","clickEvents","push","createEventHandler","target","component","handler","longpress","_this2","__mark","__computeAroundThunderCount","toString","__digThunder","__init","UI","__updateInfo","colorIndex","width","height","setContentSize","__updateCircleSize","size","ui","Widget","left","right","top","bottom","onClick","end","__dig","force","flat","forEach","block","__digAround","digedCount","__isWin","totalCount","thunderCount","__showCircle","Math","floor","random","length","show","x","y","_this$__originBlocks$","flagCount","_this$__originBlocks$2","Component","configurable","enumerable","writable","initializer","Ref","emitKey","_value","_EMIT_KEY","ref","reset","option","EventHandler","key","arr","reduce","prev","cur","concat","path","Promise","resolve","reject","resources","load","Prefab","err","asset","callback","time","timer","clickLock","event","setTimeout","TOUCH_END","TOUCH_CANCEL","ms","mitt","Sizes","低难度","中难度","高难度","Thunders","Layout","__blockSize","__windowSize","__startX","__startY","__TopBar","__thunders","__level","__blocks","__startTime","__initialBlocks","__startTimer","__initBlocks","prefab","loadPrefab","totalBlock","i","instantiate","__startGame","setInterval","_timeLabel","__bindReactive","flagLabel","TopBarNode","getChildByPath","getChildByName","_this3","_wx","showLoading","title","val","_this4","_update","__win","__gameover","Result","Restart","__restart","view","getVisibleSize","hideLoading","__initThunders","totalThunder","Array","fill","sort","__insertBlock","startColorIndex","index","blocks","childrenBlockLen","children","j","__blockScript","Block","pop","setPosition","addChild","setSiblingIndex","next","name","removeFromParent","__removeBlockNode","__showResult","info","clearInterval","rank","_createClass","get","TopBar","Select","__currentOption","__options","__buttons","__buttonHeight","__initButtons","__bindEvent","off","button","__buttonHeightTarget","set","winSize","initOverlay","layout","Node","addComponent","setWorldPosition","parent","Init","Close","len","Time","Rank","__Widget","__initSize","__active","__optionComp","__updateActive","Options","Current","__onSelect","_currentOptionTarget","input","options","watch","immediate","Proxy","_","window","wx","console","warn"],"mappings":"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","file":"all.js","sourcesContent":["import type { EventTouch } from 'cc'\nimport { Button, Color, Component, Input, Label, Sprite, UITransform, Widget, _decorator } from 'cc'\nimport { createEventHandler, emitter, flat, longpress } from './Utils'\nimport { Circle } from './CIrcle'\nimport { useThunder } from './Stores'\n\nconst { ccclass, property } = _decorator\n\n@ccclass('Block')\nexport class Block extends Component {\n  __timer = 0\n  __thunderCount = 0\n  __colors = ['#b3d665', '#77A21A']\n  __status: 'normal' | 'thunder' | 'flag' | 'diged' = 'normal'\n  __isThunder = false\n  __originBlocks: Block[][] = []\n  __position: [number, number] = [0, 0]\n  __thunderColors = ['#DE4EEB', '#4EEBEB', '#4E67EB', '#EBDE4E', '#EB4E4E']\n  __aroundBlockPos: [number, number][] = []\n  __colorIndex = 0\n  __thunderTextColors = ['#085A0E', '#2860F1', '#E5F341', '#F3D741', '#F16928', '#E90B0B', '#C50BE9', '#FF034A']\n\n  __thunderStore = useThunder()\n\n  @property({ type: UITransform })\n  UI: UITransform = null\n\n  @property({ type: Sprite })\n  Sprite: Sprite = null\n\n  @property({ type: Button })\n  Circle: Button\n\n  @property({ type: Label })\n  Text: Label\n\n  __clickLock = { value: false }\n  __debug = false\n\n  __reset() {\n    this.__status = 'normal'\n    this.Sprite.color = new Color().fromHEX(this.__colors[this.__colorIndex])\n    this.Text.string = ''\n    this.Circle.node.active = false\n    clearTimeout(this.__timer)\n    this.__thunderCount = 0\n  }\n\n  start() {\n    this.node.on(Input.EventType.TOUCH_START, (e: EventTouch) => {\n      emitter.emit(Input.EventType.TOUCH_START, e)\n    })\n    const button = this.node.getComponent(Button)\n    button.clickEvents.push(createEventHandler({ target: this.node, component: 'Block', handler: 'onClick' }))\n    this.__clickLock = longpress(this.node, () => this.__mark(), 500)\n\n    if (this.__debug) {\n      this.__computeAroundThunderCount()\n      this.Text.string = this.__thunderCount.toString()\n      if (this.__isThunder)\n        this.__digThunder()\n    }\n  }\n\n  __init() {\n    // this.node.setSiblingIndex(0)\n    this.UI = this.getComponent(UITransform)\n    this.Sprite = this.getComponent(Sprite)\n    this.__reset()\n  }\n\n  __updateInfo([width, height]: [number, number], colorIndex: number) {\n    this.UI.setContentSize(width, height)\n    this.Text.getComponent(UITransform).setContentSize(width, height)\n    // this.updateCircleSize(width)\n    this.__colorIndex = colorIndex\n    this.Sprite.color = new Color().fromHEX(this.__colors[colorIndex])\n  }\n\n  __updateCircleSize(size: number) {\n    const ui = this.Circle.node.getComponent(Widget)\n    ui.left = size * 0.27\n    ui.right = size * 0.27\n    ui.top = size * 0.27\n    ui.bottom = size * 0.27\n  }\n\n  onClick() {\n    if (this.__thunderStore.end.value || this.__clickLock.value) return\n    this.__dig()\n  }\n\n  __dig(force = true) {\n    emitter.emit('start')\n    if (this.__status !== 'normal') return\n    if (this.__isThunder && force) {\n      this.__digThunder()\n      flat(this.__originBlocks).forEach(block => block.__digThunder())\n      emitter.emit('gameover')\n      this.__thunderStore.end.value = true\n      return\n    }\n    this.__computeAroundThunderCount()\n    this.__status = 'diged'\n    this.Sprite.color = new Color().fromHEX(this.__colorIndex === 0 ? '#d1b89e' : '#dfc3a3')\n    this.Sprite.color = new Color().fromHEX('#FFFFFF')\n\n    if (this.__thunderCount === 0)\n      { this.__digAround() }\n     else\n      {\n        this.Text.string = this.__thunderCount.toString()\n        this.Text.color = new Color().fromHEX(this.__thunderTextColors[this.__thunderCount - 1])\n      }\n\n    this.__thunderStore.digedCount.value++\n\n    if (this.__isWin())\n      emitter.emit('win')\n  }\n\n  __isWin() {\n    return (this.__thunderStore.digedCount.value === this.__thunderStore.totalCount.value - this.__thunderStore.thunderCount.value)\n  }\n\n  __digThunder() {\n    if (this.__isThunder && (this.__status === 'normal' || this.__status === 'flag')) {\n      this.__status = 'thunder'\n      this.__showCircle()\n      this.Text.string = ''\n      this.Sprite.color = new Color().fromHEX(this.__thunderColors[Math.floor(Math.random() * this.__thunderColors.length)])\n    }\n  }\n\n  __showCircle() {\n    const circle = this.Circle.getComponent(Circle)\n    circle.show()\n  }\n\n  __digAround() {\n    for (const [x, y] of this.__aroundBlockPos) {\n      const block = this.__originBlocks[x]?.[y]\n      if (block && block.__status === 'normal')\n        block.__dig(false)\n    }\n  }\n\n  __mark() {\n    if (this.__thunderStore.end.value) return\n    if (this.__status !== 'flag' && this.__status !== 'normal') return\n    this.__status = this.__status === 'flag' ? 'normal' : 'flag'\n    if (this.__status === 'flag') {\n      this.Text.string = '🚩'\n      this.__thunderStore.flagCount.value++\n    } else {\n      this.Text.string = ''\n      this.__thunderStore.flagCount.value--\n    }\n  }\n\n  __computeAroundThunderCount() {\n    const [x, y] = this.__position\n    this.__aroundBlockPos = [\n      [x - 1, y - 1],\n      [x - 1, y],\n      [x - 1, y + 1],\n      [x, y - 1],\n      [x, y + 1],\n      [x + 1, y - 1],\n      [x + 1, y],\n      [x + 1, y + 1]\n    ]\n\n    for (const [x, y] of this.__aroundBlockPos) {\n      const block = this.__originBlocks[x]?.[y]\n      if (block && this.__originBlocks[x][y].__isThunder) this.__thunderCount++\n    }\n  }\n}\n\n","import { Component, _decorator } from 'cc'\nconst { ccclass } = _decorator\n\n@ccclass('Circle')\nexport class Circle extends Component {\n  show() {\n    this.node.active = true\n  }\n}\n\n","import { emitter } from '../Utils'\n\nclass Ref<T> {\n  _value: T\n  _EMIT_KEY: string\n\n  get emitKey() {\n    return this._EMIT_KEY\n  }\n\n  constructor(value: T, emitKey: string) {\n    this._value = value\n    this._EMIT_KEY = emitKey\n  }\n\n  get value() {\n    return this._value\n  }\n\n  set value(value: T) {\n    this._value = value\n    emitter.emit(this._EMIT_KEY, value)\n  }\n}\n\nfunction ref<T>(value: T, emitKey: string) {\n  return new Ref(value, emitKey)\n}\n\nconst thunder = () => {\n  const flagCount = ref(0, 'flagCount')\n  const totalCount = ref(0, 'totalCount')\n  const digedCount = ref(0, 'digedCount')\n  const thunderCount = ref(0, 'thunderCount')\n  const end = ref(false, 'end')\n\n  const reset = () => {\n    flagCount.value = 0\n    totalCount.value = 0\n    digedCount.value = 0\n    thunderCount.value = 0\n    end.value = false\n  }\n\n  return () => {\n    return {\n      flagCount,\n      totalCount,\n      digedCount,\n      thunderCount,\n      end,\n      reset\n    }\n  }\n}\n\nexport const useThunder = thunder()\n","import type { EventHandler, EventTouch, Node } from 'cc'\nimport { Component, Input, Prefab, resources } from 'cc'\nimport mitt from 'mitt'\nimport { ref } from './vue'\n\nexport * from './vue'\n\nexport function loadPrefab(path: string): Promise<Prefab> {\n  return new Promise((resolve, reject) => {\n    resources.load(path, Prefab, (err, asset) => {\n      if (err)\n        reject(err)\n       else\n        resolve(asset)\n    })\n  })\n}\n\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve()\n    }, ms)\n  })\n}\n\nexport function flat<T>(arr: T[][]): T[] {\n  return arr.reduce((prev, cur) => prev.concat(cur), [])\n}\n\nexport const emitter = mitt()\n\nexport function longpress(target: Node, callback: (e: EventTouch) => void, time = 1000) {\n  let timer: any\n  const clickLock = ref(false)\n  target.on(Input.EventType.TOUCH_START, (event: EventTouch) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      callback(event)\n      clickLock.value = true\n    }, time)\n  })\n  target.on(Input.EventType.TOUCH_END, () => {\n    clickLock.value = false\n    clearTimeout(timer)\n  })\n  target.on(Input.EventType.TOUCH_CANCEL, () => {\n    clickLock.value = false\n    clearTimeout(timer)\n  })\n  return clickLock\n}\n\nexport function createEventHandler(option: Partial<EventHandler>) {\n  const handler = new Component.EventHandler()\n  for (const key in option)\n    handler[key] = option[key]\n  return handler\n}\n","import type { Node } from 'cc'\nimport { Button, Component, Label, Layout, UITransform, _decorator, instantiate, view } from 'cc'\nimport { emitter, loadPrefab } from './Utils'\nimport { Block } from './Block'\nimport type { Info } from './Result/Result'\nimport { Result } from './Result/Result'\nimport { useThunder } from './Stores'\nimport { Select } from './Select/Select'\nimport { TopBar } from './TopBar'\nimport { _wx } from './Wx'\n\nconst Sizes = {\n  低难度: 10,\n  中难度: 14,\n  高难度: 18\n}\n\nconst Thunders = {\n  低难度: 20,\n  中难度: 40,\n  高难度: 99\n}\n\nconst { ccclass, property } = _decorator\n\n@ccclass('Init')\nexport class Init extends Component {\n  __blockSize = 0\n  __windowSize: Record<'width' | 'height', number> = { width: 0, height: 0 }\n  __startX = 0\n  __startY = 0\n  __TopBar: UITransform = null\n  __thunders: boolean[] = []\n  __level = '低难度'\n  __blocks: Node[][] = []\n  __startTime = 0\n  __initialBlocks: Node[] = []\n  __thunderStore = useThunder()\n\n  @property({ type: Button })\n  Restart: Button\n\n  @property({ type: Layout })\n  Result: Layout\n\n  @property({ type: Layout })\n  TopBarNode: Layout\n\n  __startTimer: any = 0\n\n  async __initBlocks() {\n    const prefab = await loadPrefab('prefab/Block')\n    const totalBlock = Sizes['高难度'] ** 2\n    for (let i = 0; i < totalBlock; i++) {\n      const node = instantiate(prefab)\n      this.__initialBlocks.push(node)\n    }\n  }\n\n  __startGame() {\n    if (this.__startTimer) return\n    this.__startTimer = setInterval(() => {\n      this.__startTime++\n      this._timeLabel.string = this.__startTime.toString()\n    }, 1000)\n  }\n\n  __bindReactive() {\n    const flagLabel = this.TopBarNode.node.getChildByPath('Background/Flag').getChildByName('Label').getComponent(Label)\n    emitter.on(this.__thunderStore.flagCount.emitKey, () => {\n      flagLabel.string = this.__thunderStore.flagCount.value.toString()\n    })\n  }\n\n  get _timeLabel() {\n    return this.TopBarNode.node.getChildByPath('Background/Time').getChildByName('Label').getComponent(Label)\n  }\n\n  get _flagLabel() {\n    return this.TopBarNode.node.getChildByPath('Background/Flag').getChildByName('Label').getComponent(Label)\n  }\n\n  get __selectOption() {\n    return this.TopBarNode.getComponent(TopBar).Select.getComponent(Select).__currentOption\n  }\n\n  async start() {\n    _wx.showLoading({\n      title: '正在初始化数据'\n    })\n    await this.__initBlocks()\n    this.__bindReactive()\n    emitter.on('difficulty', (val: string) => {\n      this.__level = val\n      this._update()\n    })\n    emitter.on('win', () => this.__win())\n\n    emitter.on('gameover', () => this.__gameover())\n    emitter.on('start', () => this.__startGame())\n    this.Result.node.active = false\n    this.Restart.node.on('click', () => {\n      this.__restart()\n    }, this)\n\n    this.__windowSize = view.getVisibleSize()\n    this.__startX = -(this.__windowSize.width / 2)\n    this.__TopBar = this.node.getChildByName('TopBar').getComponent(UITransform)\n    this.__startY = -this.__TopBar.height\n    this._update()\n    _wx.hideLoading()\n  }\n\n  __initThunders() {\n    const totalBlock = Sizes[this.__level] ** 2\n    const totalThunder = Thunders[this.__level]\n    this.__thunderStore.thunderCount.value = totalThunder\n    this.__thunders = new Array(totalBlock - totalThunder).fill(false).concat(new Array(totalThunder).fill(true)).sort(() => Math.random() - 0.5).sort(() => Math.random() - 0.5).sort(() => Math.random() - 0.5)\n    this.__thunderStore.thunderCount.value = totalThunder\n    this.__thunderStore.totalCount.value = totalBlock\n  }\n\n  async __insertBlock() {\n    // const prefab = await loadPrefab('prefab/Block')\n    let startColorIndex = 1\n    let colorIndex = 0\n    let index = 0\n    const blocks: Block[][] = []\n    this.__blocks = []\n\n    // const totalBlock = Sizes[this.level] ** 2\n    const childrenBlockLen = this.node.children.length - 2\n    for (let i = 0; i < Sizes[this.__level]; i++) {\n      startColorIndex = (startColorIndex + 1) % 2\n      colorIndex = (startColorIndex + 1) % 2\n      blocks[i] = []\n      this.__blocks[i] = []\n      for (let j = 0; j < Sizes[this.__level]; j++) {\n        colorIndex = (colorIndex + 1) % 2\n        const block = this.__initialBlocks[index]\n        const __blockScript = block.getComponent(Block)\n        blocks[i][j] = __blockScript\n        this.__blocks[i][j] = block\n        __blockScript.__init()\n        __blockScript.__updateInfo([this.__blockSize, this.__blockSize], colorIndex)\n        debugger\n        __blockScript.__position = [i, j]\n        __blockScript.__originBlocks = blocks\n        __blockScript.__isThunder = this.__thunders.pop()\n        block.setPosition(i * this.__blockSize + this.__startX, -((j + 1) * this.__blockSize) + this.__startY)\n        // debugger\n        if (index >= childrenBlockLen)\n          this.node.addChild(block)\n\n        block.setSiblingIndex(0)\n        index++\n      }\n    }\n    let next = this.__initialBlocks[index]\n    while (next) {\n      if (next.name === 'Block')\n        next.removeFromParent()\n      index++\n      next = this.__initialBlocks[index]\n    }\n  }\n\n  _update() {\n    this.__startTime = 0\n    this._timeLabel.string = this.__startTime.toString()\n    this.__thunderStore.end.value = false\n    this.__blockSize = this.__windowSize.width / Sizes[this.__level]\n    this.__removeBlockNode()\n    this.__thunderStore.reset()\n    this.__initThunders()\n    this.__insertBlock()\n  }\n\n  __removeBlockNode() {\n    // for (let i = 0; i < this.node.children.length; i++) {\n    //   const child = this.node.children[i]\n    //   if (child.name === 'Block')\n    //     // child.destroy()\n    //     child.removeFromParent()\n    // }\n  }\n\n  __restart() {\n    this._update()\n  }\n\n  __showResult(info: Info) {\n    this.Result.node.active = true\n    const result = this.Result.getComponent(Result)\n    result.__updateInfo(info)\n    // this.startTime.value = 0\n  }\n\n  __win() {\n    clearInterval(this.__startTimer)\n    this.__thunderStore.end.value = true\n    this.__startTimer = 0\n    const info = {\n      time: `${this.__startTime}S`,\n      rank: '暂无'\n    }\n    this.__showResult(info)\n  }\n\n  __gameover() {\n    clearInterval(this.__startTimer)\n    this.__thunderStore.end.value = true\n    this.__startTimer = 0\n    const info = {\n      time: `${this.__startTime.toString()}S`,\n      rank: '--'\n    } as Info\n    this.__showResult(info)\n  }\n}\n","import { Component, UITransform, _decorator, view } from 'cc'\nconst { ccclass } = _decorator\n\n@ccclass('Mask')\nexport class Mask extends Component {\n  start() {\n    const { width, height } = view.getVisibleSize()\n    this.node.getComponent(UITransform).setContentSize(width, height)\n  }\n}\n\n","import type { Node } from 'cc'\nimport { Component, Label, UITransform, Widget, _decorator, instantiate } from 'cc'\n\nimport { emitter, loadPrefab } from '../Utils'\nconst { ccclass } = _decorator\n\n@ccclass('Options')\nexport class Options extends Component {\n  __options: string[]\n\n   get _options() {\n    return this.__options\n   }\n\n   set _options(value: string[]) {\n      this.__options = value\n      this.__buttons.forEach((button, i) => {\n        this.__bindEvent(button, value[i])\n        button.getChildByPath('Label').getComponent(Label).string = value[i]\n      })\n    }\n\n  __buttons: readonly Node[]\n  __buttonHeight = 0\n\n  get __buttonHeightTarget() {\n    return this.node.getComponent(UITransform)\n  }\n\n  async start() {\n    this.__buttons = this.node.children\n    await this.__initButtons()\n    this.node.getComponent(Widget).top = this.__buttonHeight / this.__options.length\n  }\n\n  __bindEvent(node: Node, value: string) {\n    node.off('click')\n    node.on('click', () => this.onClick(value))\n  }\n\n  onClick(value: string) {\n    emitter.emit('select', value)\n  }\n\n  async __initButtons() {\n    const prefab = await loadPrefab('prefab/Option')\n    let height = 0\n    this.__options.forEach((option, index) => {\n      const button = instantiate(prefab)\n      this.node.addChild(button)\n      this.__bindEvent(button, option)\n      height = button.getComponent(UITransform).height\n      button.getComponent(Widget).top = height * index\n      button.getChildByPath('Label').getComponent(Label).string = option\n    })\n    this.__buttonHeight = height * this.__options.length\n    this.__buttonHeightTarget.height = this.__buttonHeight\n  }\n}\n\n","import { Color, Component, Node, Sprite, UITransform, _decorator, view } from 'cc'\nconst { ccclass } = _decorator\n\n@ccclass('Overlay')\nexport class Overlay extends Component {\n  winSize = view.getVisibleSize()\n\n  start() {\n    this.initOverlay()\n  }\n\n  async initOverlay() {\n    const layout = new Node('layout')\n    layout.addComponent(UITransform)\n    layout.getComponent(UITransform).setContentSize(this.winSize.width, this.winSize.height)\n    layout.addComponent(Sprite)\n    layout.getComponent(Sprite).color = new Color(0, 0, 0, 0.5)\n    this.node.addChild(layout)\n    layout.setSiblingIndex(2)\n    layout.setWorldPosition(0, 0, 0)\n  }\n}\n\n","import { Button, Component, Label, Layout, _decorator } from 'cc'\nimport { Init } from '../Init'\n\nconst { ccclass, property } = _decorator\n\n@ccclass('Result')\nexport class Result extends Component {\n  @property({ type: Layout })\n  Time: Layout\n\n  @property({ type: Layout })\n  Rank: Layout\n\n  @property({ type: Button })\n  Restart: Button\n\n  @property({ type: Button })\n  Close: Button\n\n  start() {\n    this.Restart.node.on('click', () => {\n      this.node.parent.getComponent(Init).__restart()\n      this.node.active = false\n    }, this)\n\n    this.Close.node.on('click', () => {\n      this.node.active = false\n    })\n  }\n\n  __updateInfo(info: Info) {\n    const len = this.node.parent.children.length\n    this.node.setSiblingIndex(len - 1)\n    this.Time.node.getChildByName('Label').getComponent(Label).string = `${info.time}`\n    this.Rank.node.getChildByName('Label').getComponent(Label).string = `排名: ${info.rank}`\n  }\n}\n\nexport interface Info {\n  time: string\n  rank: string | number\n}\n\n","import { Button, Component, Input, Label, Layout, UITransform, Widget, _decorator, input } from 'cc'\nimport { emitter } from '../Utils'\nimport { Options } from './Option'\n\nconst { ccclass, property } = _decorator\n\n@ccclass('Select')\nexport class Select extends Component {\n  @property({ type: Layout })\n  Options: Layout\n\n  @property({ type: Button })\n  Current: Button\n\n  __Widget: Widget\n  __initSize = { top: 0, bottom: 0 }\n  __active = false\n  __currentOption = '低难度'\n  __optionComp: Options\n  __options = ['低难度', '中难度', '高难度']\n\n  get _currentOptionTarget() {\n    return this.Current.node.getChildByPath('Label').getComponent(Label)\n  }\n\n  __updateActive() {\n    if (this.__active) this.__Widget.bottom = -this.__optionComp.__buttonHeight + this.__initSize.bottom\n      else this.__Widget.bottom = this.__initSize.bottom\n      this.Options.getComponent(Widget).top = this.Current.getComponent(UITransform).height\n      this.Current.getComponent(Widget).top = 0\n  }\n\n  start() {\n    this.__Widget = this.node.getComponent(Widget)\n    this.__initSize = { top: this.__Widget.top, bottom: this.__Widget.bottom }\n    this.__optionComp = this.Options.node.getComponent(Options)\n    this.__optionComp.__options = this.__options\n    this.Current.node.on('click', () => {\n      this.__active = !this.__active\n      this.__updateActive()\n    })\n    emitter.on('select', (value: string) => this.__onSelect(value))\n    this._currentOptionTarget.string = this.__currentOption\n    input.on(Input.EventType.TOUCH_START, () => {\n      this.__active = false\n    })\n\n    emitter.on(Input.EventType.TOUCH_START, () => {\n      this.__active = false\n    })\n    emitter.emit('difficulty', this.__currentOption)\n  }\n\n  __onSelect(value: string) {\n    this.__currentOption = value\n    emitter.emit('difficulty', value)\n    this._currentOptionTarget.string = value\n    this.__active = false\n    this.__updateActive()\n  }\n}\n\n","import { Component, Layout, Widget, _decorator } from 'cc'\nconst { ccclass, property } = _decorator\n\n@ccclass('TopBar')\nexport class TopBar extends Component {\n  @property({ type: Layout })\n  Select: Layout\n\n  start() {\n    const widget = this.node.getComponent(Widget)\n    widget.left = 1\n  }\n}\n\n","/* eslint-disable-next-line @typescript-eslint/consistent-type-imports */\nimport { Button, Canvas, EditBox, Label, Layout, Node, PageView, ProgressBar, RichText, ScrollView, Slider, Sprite, Toggle, UITransform, VideoPlayer, WebView, Widget } from 'cc'\nimport type { Ref, WatchOptions } from './packages/vue.mjs.js' // /dist/vue.esm-browser\nimport { watch } from './packages/vue.min.mjs'\n\nexport function reactivity<T>(ref: Ref<T>, callback: Fn<T>, options?: WatchOptions): void\nexport function reactivity<T, C extends Component>(ref: Ref<T>, target: ReactiveTarget<C>, options?: WatchOptions): void\nexport function reactivity<T, C extends Component>(ref: Ref<T>, target: ReactiveTarget<C> | ((val: T) => void), options?: WatchOptions) {\n  watch(() => ref.value, val => {\n    if (typeof target === 'function')\n      {\n        target(val)\n      }\n    else\n      {\n        if (target.component)\n          target.target = target.node.getComponent<C>(target.component)\n\n        target.target[target.key] = val\n      }\n  }, { immediate: true, ...options })\n}\n\ninterface ReactiveTarget<C extends Component> {\n  target?: Component\n  key: string | symbol\n  component?: { new (): C }\n  node?: Node\n}\n\ntype Fn<T> = (val: T) => void\n\ntype Component = Label | UITransform | Layout | Sprite | Button | Canvas | EditBox | PageView | ProgressBar | RichText | ScrollView | Slider | Toggle | VideoPlayer | WebView | Widget\n\nexport * from './packages/vue.min.mjs'\n","export const _wx: typeof wx = new Proxy({} as typeof wx, {\n  get(_, key: string) {\n    return window.wx?.[key] || (() => console.warn(`wx.${key} is called`))\n  }\n})\n\n"]}