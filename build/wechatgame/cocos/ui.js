System.register(["./bits-b8bc8b22.js","./buffer-barrier-17698e09.js","./scene-asset-10397f71.js","./math-base-02e87bf8.js","./index-f2c2eec3.js","./pipeline-state-manager-f4a950fe.js","./deprecated-dacf9914.js","./touch-37ec7c16.js","./game-1e6d0834.js","./create-mesh-c5031db7.js","./mesh-20100c2c.js","./sprite-renderer-e42860e7.js","./sprite-eb671685.js","./ui-renderer-09c699a1.js","./xr-event-handle-230a439b.js"],(function(t){"use strict";var e,i,o,n,r,s,a,h,l,c,u,_,p,d,g,f,y,b,T,m,v,C,S,E,O,A,L,w,D,I,P,R,x,z,N,H,B,M,k,V,F,U,G,j,W,Z,X,Y,K,q,Q,J,$,tt,et,it,ot,nt,rt,st,at,ht,lt,ct,ut,_t,pt,dt,gt,ft,yt,bt,Tt,mt,vt,Ct,St,Et,Ot,At,Lt,wt,Dt,It;return{setters:[function(t){e=t.m,i=t.F,o=t.A,n=t.G,r=t.l,s=t.H,a=t.I,h=t.E,l=t.aw,c=t.ax,u=t.ay,_=t.az,p=t.w,d=t.i,g=t.c,f=t.J,y=t.d,b=t.P,T=t.M},function(t){m=t.bu,v=t.bG,C=t.bA,S=t.bn},function(t){E=t.a$,O=t.b0,A=t.ao,L=t.aH,w=t.bS,D=t.au,I=t.at,P=t.bT,R=t.bX,x=t.bU,z=t.cf,N=t.b5,H=t.bP,B=t.cl,M=t.cm,k=t.aI,V=t.b1,F=t.b2,U=t.bO,G=t.bQ,j=t.aV,W=t.aW,Z=t.b7,X=t.ap,Y=t.cn,K=t.b_,q=t.aJ,Q=t.a9,J=t.aa},function(t){$=t.C,tt=t.l,et=t.a,it=t.e,ot=t.S,nt=t.V,rt=t.j,st=t.P},function(){},function(t){at=t.a,ht=t.z},function(t){lt=t.v,ct=t.k,ut=t.I,_t=t.j,pt=t.V},function(t){dt=t.K,gt=t.d,ft=t.S,yt=t.E,bt=t.e,Tt=t.f},function(t){mt=t.g},function(){},function(){},function(t){vt=t.S},function(t){Ct=t.a,St=t.B,Et=t.c,Ot=t.V},function(t){At=t.U,Lt=t.a},function(t){wt=t.X,Dt=t.a,It=t.D}],execute:function(){var Pt,Rt,xt,zt,Nt,Ht,Bt,Mt,kt,Vt,Ft,Ut,Gt,jt,Wt,Zt,Xt,Yt,Kt,qt,Qt,Jt,$t,te,ee,ie,oe,ne,re,se,ae,he,le,ce,ue,_e,pe,de,ge,fe,ye,be,Te,me,ve,Ce,Se,Ee,Oe,Ae,Le,we,De,Ie,Pe,Re,xe,ze,Ne,He,Be,Me,ke,Ve=new $;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=3]="SCALE"}(Be||(Be={})),e(Be),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(Me||(Me={})),function(t){t.CLICK="click"}(ke||(ke={}));var Fe,Ue=(Pt=E("cc.Button"),Rt=P(),xt=R(110),zt=x(),Nt=z(Lt),Ht=O(A),Bt=N(),Mt=H(),kt=N(),Vt=H(),Ft=O(Be),Ut=N(),Gt=H(),jt=N(),Wt=H(),Zt=N(),Xt=H(),Yt=N(),Kt=H(),qt=N(),Qt=H(),Jt=B(),$t=M(),te=N(),ee=H(),ie=N(),oe=H(),ne=O(vt),re=N(),se=H(),ae=O(vt),he=N(),le=H(),ce=O(vt),ue=N(),_e=H(),pe=O(vt),de=N(),ge=H(),fe=O([L]),ye=N(),be=H(),Fe=Pt(Te=Rt(Te=xt(Te=zt(Te=Nt(Te=w((He=Ne=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"clickEvents",ve,a(e)),s(e,"_interactable",Ce,a(e)),s(e,"_transition",Se,a(e)),s(e,"_normalColor",Ee,a(e)),s(e,"_hoverColor",Oe,a(e)),s(e,"_pressedColor",Ae,a(e)),s(e,"_disabledColor",Le,a(e)),s(e,"_normalSprite",we,a(e)),s(e,"_hoverSprite",De,a(e)),s(e,"_pressedSprite",Ie,a(e)),s(e,"_disabledSprite",Pe,a(e)),s(e,"_duration",Re,a(e)),s(e,"_zoomScale",xe,a(e)),s(e,"_target",ze,a(e)),e._pressed=!1,e._hovered=!1,e._fromColor=new $,e._toColor=new $,e._time=0,e._transitionFinished=!0,e._fromScale=new et,e._toScale=new et,e._originalScale=null,e._sprite=null,e._targetScale=new et,e}i(e,t);var n=e.prototype;return n.__preload=function(){this.target||(this.target=this.node);var t=this.node.getComponent(Ct);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._resetState()},n.onEnable=function(){this._registerNodeEvent()},n.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},n.onDestroy=function(){this.target.isValid&&this._unregisterTargetEvent(this.target)},n.update=function(t){var e=this.target;if(!this._transitionFinished&&e&&(this._transition===Be.COLOR||this._transition===Be.SCALE)){this._time+=t;var i=1;if(this._duration>0&&(i=this._time/this._duration),i>=1&&(i=1),this._transition===Be.COLOR){var o=e._uiProps.uiComp;$.lerp(Ve,this._fromColor,this._toColor,i),o&&(o.color=Ve)}else this.transition===Be.SCALE&&(e.getScale(this._targetScale),this._targetScale.x=tt(this._fromScale.x,this._toScale.x,i),this._targetScale.y=tt(this._fromScale.y,this._toScale.y,i),e.setScale(this._targetScale));1===i&&(this._transitionFinished=!0)}},n._resizeNodeToTargetNode=function(){this.target&&this.target._uiProps.uiTransformComp},n._resetState=function(){this._pressed=!1,this._hovered=!1;var t=this.target;if(t){var e=this._transition;if(e===Be.COLOR&&this._interactable){var i=t.getComponent(At);i&&(i.color=this._normalColor)}else e===Be.SCALE&&this._originalScale&&t.setScale(this._originalScale);this._transitionFinished=!0}},n._registerNodeEvent=function(){this.node.on(D.TOUCH_START,this._onTouchBegan,this),this.node.on(D.TOUCH_MOVE,this._onTouchMove,this),this.node.on(D.TOUCH_END,this._onTouchEnded,this),this.node.on(D.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(D.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(D.MOUSE_LEAVE,this._onMouseMoveOut,this),this.node.on(wt.XRUI_HOVER_ENTERED,this._xrHoverEnter,this),this.node.on(wt.XRUI_HOVER_EXITED,this._xrHoverExit,this),this.node.on(wt.XRUI_CLICK,this._xrClick,this),this.node.on(wt.XRUI_UNCLICK,this._xrUnClick,this)},n._registerTargetEvent=function(t){t.on(D.TRANSFORM_CHANGED,this._onTargetTransformChanged,this)},n._unregisterNodeEvent=function(){this.node.off(D.TOUCH_START,this._onTouchBegan,this),this.node.off(D.TOUCH_MOVE,this._onTouchMove,this),this.node.off(D.TOUCH_END,this._onTouchEnded,this),this.node.off(D.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(D.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(D.MOUSE_LEAVE,this._onMouseMoveOut,this),this.node.off(wt.XRUI_HOVER_ENTERED,this._xrHoverEnter,this),this.node.off(wt.XRUI_HOVER_EXITED,this._xrHoverExit,this),this.node.off(wt.XRUI_CLICK,this._xrClick,this),this.node.off(wt.XRUI_UNCLICK,this._xrUnClick,this)},n._unregisterTargetEvent=function(t){t.off(D.TRANSFORM_CHANGED)},n._getTargetSprite=function(t){var e=null;return t&&(e=t.getComponent(Ct)),e},n._applyTarget=function(){this.target&&(this._sprite=this._getTargetSprite(this.target),this._originalScale||(this._originalScale=new et),et.copy(this._originalScale,this.target.getScale()),this._registerTargetEvent(this.target))},n._onTargetSpriteFrameChanged=function(t){this._transition===Be.SPRITE&&this._setCurrentStateSpriteFrame(t.spriteFrame)},n._setCurrentStateSpriteFrame=function(t){if(t)switch(this._getButtonState()){case Me.NORMAL:this._normalSprite=t;break;case Me.HOVER:this._hoverSprite=t;break;case Me.PRESSED:this._pressedSprite=t;break;case Me.DISABLED:this._disabledSprite=t}},n._onTargetColorChanged=function(t){this._transition===Be.COLOR&&this._setCurrentStateColor(t)},n._setCurrentStateColor=function(t){switch(this._getButtonState()){case Me.NORMAL:this._normalColor=t;break;case Me.HOVER:this._hoverColor=t;break;case Me.PRESSED:this._pressedColor=t;break;case Me.DISABLED:this._disabledColor=t}},n._onTargetTransformChanged=function(t){t&I.SCALE&&this._originalScale&&this._transition===Be.SCALE&&this._transitionFinished&&et.copy(this._originalScale,this.target.getScale())},n._onTouchBegan=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))},n._onTouchMove=function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed&&t){var e=t.touch;if(e){var i,o=this.node._uiProps.uiTransformComp.hitTest(e.getLocation());this._transition===Be.SCALE&&this.target&&this._originalScale?o?(et.copy(this._fromScale,this._originalScale),et.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this.target.setScale(this._originalScale)):(i=o?Me.PRESSED:Me.NORMAL,this._applyTransition(i)),t&&(t.propagationStopped=!0)}}},n._onTouchEnded=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(L.emitEvents(this.clickEvents,t),this.node.emit(ke.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))},n._onTouchCancel=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},n._onMouseMoveIn=function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==Be.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))},n._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},n._updateState=function(){var t=this._getButtonState();this._applyTransition(t)},n._getButtonState=function(){var t=Me.NORMAL;return this._interactable?this._pressed?t=Me.PRESSED:this._hovered&&(t=Me.HOVER):t=Me.DISABLED,t.toString()},n._updateColorTransition=function(t){var e,i=this[t+"Color"],o=null===(e=this.target)||void 0===e?void 0:e.getComponent(At);o&&(t===Me.DISABLED?o.color=i:(this._fromColor=o.color.clone(),this._toColor=i,this._time=0,this._transitionFinished=!1))},n._updateSpriteTransition=function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)},n._updateScaleTransition=function(t){this._interactable&&(t===Me.PRESSED?this._zoomUp():this._zoomBack())},n._zoomUp=function(){this._originalScale&&(et.copy(this._fromScale,this._originalScale),et.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1)},n._zoomBack=function(){this.target&&this._originalScale&&(et.copy(this._fromScale,this.target.getScale()),et.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)},n._applyTransition=function(t){var e=this._transition;e===Be.COLOR?this._updateColorTransition(t):e===Be.SPRITE?this._updateSpriteTransition(t):e===Be.SCALE&&this._updateScaleTransition(t)},n._xrHoverEnter=function(){this._onMouseMoveIn(),this._updateState()},n._xrHoverExit=function(){this._onMouseMoveOut(),this._pressed&&(this._pressed=!1,this._updateState())},n._xrClick=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState())},n._xrUnClick=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(L.emitEvents(this.clickEvents,this),this.node.emit(ke.CLICK,this)),this._pressed=!1,this._updateState())},o(e,[{key:"target",get:function(){return this._target||this.node},set:function(t){this._target!==t&&(this._target&&this._unregisterTargetEvent(this._target),this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable!==t&&(this._interactable=t,this._updateState(),this._interactable||this._resetState())}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition===Be.COLOR?this._updateColorTransition(Me.NORMAL):this._transition===Be.SPRITE&&this._updateSpriteTransition(Me.NORMAL),this._transition=t,this._updateState())}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressedColor},set:function(t){this._pressedColor!==t&&this._pressedColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(Ct);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),e}(k),Ne.Transition=Be,Ne.EventType=ke,n((me=He).prototype,"target",[Ht,Bt,Mt],Object.getOwnPropertyDescriptor(me.prototype,"target"),me.prototype),n(me.prototype,"interactable",[kt,Vt],Object.getOwnPropertyDescriptor(me.prototype,"interactable"),me.prototype),n(me.prototype,"transition",[Ft,Ut,Gt],Object.getOwnPropertyDescriptor(me.prototype,"transition"),me.prototype),n(me.prototype,"normalColor",[jt,Wt],Object.getOwnPropertyDescriptor(me.prototype,"normalColor"),me.prototype),n(me.prototype,"pressedColor",[Zt,Xt],Object.getOwnPropertyDescriptor(me.prototype,"pressedColor"),me.prototype),n(me.prototype,"hoverColor",[Yt,Kt],Object.getOwnPropertyDescriptor(me.prototype,"hoverColor"),me.prototype),n(me.prototype,"disabledColor",[qt,Qt],Object.getOwnPropertyDescriptor(me.prototype,"disabledColor"),me.prototype),n(me.prototype,"duration",[Jt,$t,te,ee],Object.getOwnPropertyDescriptor(me.prototype,"duration"),me.prototype),n(me.prototype,"zoomScale",[ie,oe],Object.getOwnPropertyDescriptor(me.prototype,"zoomScale"),me.prototype),n(me.prototype,"normalSprite",[ne,re,se],Object.getOwnPropertyDescriptor(me.prototype,"normalSprite"),me.prototype),n(me.prototype,"pressedSprite",[ae,he,le],Object.getOwnPropertyDescriptor(me.prototype,"pressedSprite"),me.prototype),n(me.prototype,"hoverSprite",[ce,ue,_e],Object.getOwnPropertyDescriptor(me.prototype,"hoverSprite"),me.prototype),n(me.prototype,"disabledSprite",[pe,de,ge],Object.getOwnPropertyDescriptor(me.prototype,"disabledSprite"),me.prototype),ve=n(me.prototype,"clickEvents",[fe,V,ye,be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ce=n(me.prototype,"_interactable",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Se=n(me.prototype,"_transition",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Be.NONE}}),Ee=n(me.prototype,"_normalColor",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.WHITE.clone()}}),Oe=n(me.prototype,"_hoverColor",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $(211,211,211,255)}}),Ae=n(me.prototype,"_pressedColor",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $.WHITE.clone()}}),Le=n(me.prototype,"_disabledColor",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new $(124,124,124,255)}}),we=n(me.prototype,"_normalSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=n(me.prototype,"_hoverSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=n(me.prototype,"_pressedSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=n(me.prototype,"_disabledSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=n(me.prototype,"_duration",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),xe=n(me.prototype,"_zoomScale",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),ze=n(me.prototype,"_target",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=me))||Te)||Te)||Te)||Te)||Te)||Te,t({Button:Fe,ButtonComponent:Fe}),Fe);r.Button=Ue;var Ge,je,We,Ze=function(){function t(){}return t.add=function(t){var e=this._tabIndexList;-1===e.indexOf(t)&&e.push(t)},t.remove=function(t){var e=this._tabIndexList,i=e.indexOf(t);-1!==i&&e.splice(i,1)},t.resort=function(){this._tabIndexList.sort((function(t,e){return t._delegate.tabIndex-e._delegate.tabIndex}))},t.next=function(t){var e=this._tabIndexList,i=e.indexOf(t);if(t.setFocus(!1),-1!==i){var o=e[i+1];o&&o._delegate.tabIndex>=0&&o.setFocus(!0)}},t}();Ze._tabIndexList=[],function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DONE=1]="DONE",t[t.SEND=2]="SEND",t[t.SEARCH=3]="SEARCH",t[t.GO=4]="GO",t[t.NEXT=5]="NEXT"}(Ge||(Ge={})),h(Ge),function(t){t[t.ANY=0]="ANY",t[t.EMAIL_ADDR=1]="EMAIL_ADDR",t[t.NUMERIC=2]="NUMERIC",t[t.PHONE_NUMBER=3]="PHONE_NUMBER",t[t.URL=4]="URL",t[t.DECIMAL=5]="DECIMAL",t[t.SINGLE_LINE=6]="SINGLE_LINE"}(je||(je={})),h(je),function(t){t[t.PASSWORD=0]="PASSWORD",t[t.SENSITIVE=1]="SENSITIVE",t[t.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",t[t.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",t[t.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",t[t.DEFAULT=5]="DEFAULT"}(We||(We={})),h(We);var Xe,Ye,Ke,qe,Qe,Je,$e,ti,ei,ii,oi,ni,ri,si,ai,hi,li,ci,ui,_i,pi,di,gi,fi,yi,bi,Ti,mi,vi,Ci,Si,Ei,Oi,Ai,Li,wi,Di,Ii,Pi,Ri,xi,zi,Ni,Hi,Bi,Mi,ki,Vi,Fi,Ui,Gi,ji,Wi,Zi,Xi,Yi,Ki,qi,Qi,Ji,$i,to=function(){function t(){this._editing=!1,this._delegate=null}var e=t.prototype;return e.init=function(){},e.onEnable=function(){},e.update=function(){},e.onDisable=function(){this._editing&&this.endEditing()},e.clear=function(){this._delegate=null},e.setTabIndex=function(){},e.setSize=function(){},e.setFocus=function(t){t?this.beginEditing():this.endEditing()},e.isFocused=function(){return this._editing},e.beginEditing=function(){},e.endEditing=function(){},t}(),eo=new it,io=new it,oo=new et,no=null,ro=0,so=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._delegate=null,e._inputMode=-1,e._inputFlag=-1,e._returnType=-1,e.__eventListeners={},e.__autoResize=!1,e.__orientationChanged=void 0,e._edTxt=null,e._isTextArea=!1,e._textLabelFont=null,e._textLabelFontSize=null,e._textLabelFontColor=null,e._textLabelAlign=null,e._placeholderLabelFont=null,e._placeholderLabelFontSize=null,e._placeholderLabelFontColor=null,e._placeholderLabelAlign=null,e._placeholderLineHeight=null,e._placeholderStyleSheet=null,e._domId="EditBoxId_"+ ++ro,e}i(e,t);var o=e.prototype;return o.init=function(t){t&&(this._delegate=t,t.inputMode===je.ANY?this._createTextArea():this._createInput(),Ze.add(this),this.setTabIndex(t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer())},o.clear=function(){this._removeEventListeners(),this._removeDomFromGameContainer(),Ze.remove(this),no===this&&(no=null),this._delegate=null},o.update=function(){this._updateMatrix()},o.setTabIndex=function(t){this._edTxt.tabIndex=t,Ze.resort()},o.setSize=function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px")},o.beginEditing=function(){no&&no!==this&&no.setFocus(!1),this._editing=!0,no=this,this._delegate._editBoxEditingDidBegan(),this._showDom(),this._edTxt.focus()},o.endEditing=function(){this._edTxt.blur()},o._createInput=function(){this._isTextArea=!1,this._edTxt=document.createElement("input")},o._createTextArea=function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")},o._addDomToGameContainer=function(){mt.container&&this._edTxt&&(mt.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))},o._removeDomFromGameContainer=function(){l(mt.container,this._edTxt)&&this._edTxt&&mt.container.removeChild(this._edTxt),l(document.head,this._placeholderStyleSheet)&&document.head.removeChild(this._placeholderStyleSheet),this._edTxt=null,this._placeholderStyleSheet=null},o._showDom=function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),at.isMobile&&this._showDomOnMobile()},o._hideDom=function(){var t=this._edTxt;t&&this._delegate&&(t.style.display="none",this._delegate._showLabels()),at.isMobile&&this._hideDomOnMobile()},o._showDomOnMobile=function(){at.os!==m.ANDROID&&at.os!==m.OHOS||(ht.handleResizeEvent=!1,this._adjustWindowScroll())},o._hideDomOnMobile=function(){at.os!==m.ANDROID&&at.os!==m.OHOS||(ht.handleResizeEvent=!0),this._scrollBackWindow()},o._adjustWindowScroll=function(){var t=this;setTimeout((function(){window.scrollY<40&&t._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)},o._scrollBackWindow=function(){setTimeout((function(){at.browserType!==v.WECHAT||at.os!==m.IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)},o._updateMatrix=function(){if(this._edTxt){var t=this._delegate.node,e=lt.getScaleX(),i=lt.getScaleY(),o=lt.getViewportRect(),n=ht.devicePixelRatio;t.getWorldMatrix(eo);var r=t._uiProps.uiTransformComp;if(r&&et.set(oo,-r.anchorX*r.width,-r.anchorY*r.height,oo.z),it.transform(eo,eo,oo),t._uiProps.uiTransformComp){var s=ct.root.batcher2D.getFirstRenderCamera(t);if(s){s.node.getWorldRT(io);var a=io.m12,h=io.m13,l=ut.center;io.m12=l.x-(io.m00*a+io.m04*h),io.m13=l.y-(io.m01*a+io.m05*h),it.multiply(io,io,eo),e/=n,i/=n;var c=mt.container,u=io.m00*e,_=eo.m01,p=eo.m04,d=io.m05*i,g=parseInt(c&&c.style.paddingLeft||"0");g+=o.x/n;var f=parseInt(c&&c.style.paddingBottom||"0");f+=o.y/n;var y="matrix("+u+","+-_+","+-p+","+d+","+(io.m12*e+g)+","+-(io.m13*i+f)+")";this._edTxt.style.transform=y,this._edTxt.style["-webkit-transform"]=y,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},o._updateInputType=function(){var t=this._delegate,e=t.inputMode,i=t.inputFlag,o=t.returnType,n=this._edTxt;if(this._inputMode!==e||this._inputFlag!==i||this._returnType!==o){if(this._inputMode=e,this._inputFlag=i,this._returnType=o,this._isTextArea){var r="none";return i===We.INITIAL_CAPS_ALL_CHARACTERS?r="uppercase":i===We.INITIAL_CAPS_WORD&&(r="capitalize"),void(n.style.textTransform=r)}if(n=n,i===We.PASSWORD)return n.type="password",void(n.style.textTransform="none");var s=n.type;e===je.EMAIL_ADDR?s="email":e===je.NUMERIC||e===je.DECIMAL?s="number":e===je.PHONE_NUMBER?(s="number",n.pattern="[0-9]*",n.addEventListener("wheel",(function(){return!1}))):e===je.URL?s="url":(s="text",o===Ge.SEARCH&&(s="search")),n.type=s;var a="none";i===We.INITIAL_CAPS_ALL_CHARACTERS?a="uppercase":i===We.INITIAL_CAPS_WORD&&(a="capitalize"),n.style.textTransform=a}},o._updateMaxLength=function(){var t=this._delegate.maxLength;t<0&&(t=65535),this._edTxt.maxLength=t},o._initStyleSheet=function(){if(this._edTxt){var t=this._edTxt;t.style.color="#000000",t.style.border="0px",t.style.background="transparent",t.style.width="100%",t.style.height="100%",t.style.outline="medium",t.style.padding="0",t.style.textTransform="none",t.style.display="none",t.style.position="absolute",t.style.bottom="0px",t.style.left="2px",t.className="cocosEditBox",t.style.fontFamily="Arial",t.id=this._domId,this._isTextArea?(t.style.resize="none",t.style.overflowY="scroll"):((t=t).type="text",t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}},o._updateStyleSheet=function(){var t=this._delegate,e=this._edTxt;e&&t&&(e.value=t.string,this._updateTextLabel(t.textLabel))},o._updateTextLabel=function(t){if(t){var e=t.font;e=!e||e instanceof St?t.fontFamily:e._fontFamily;var i=t.fontSize*t.node.scale.y;if((this._textLabelFont!==e||this._textLabelFontSize!==i||this._textLabelFontColor!==t.fontColor||this._textLabelAlign!==t.horizontalAlign)&&(this._textLabelFont=e,this._textLabelFontSize=i,this._textLabelFontColor=t.fontColor,this._textLabelAlign=t.horizontalAlign,this._edTxt)){var o=this._edTxt;switch(o.style.fontSize=i+"px",o.style.color=t.color.toCSS(),o.style.fontFamily=e,t.horizontalAlign){case Et.HorizontalAlign.LEFT:o.style.textAlign="left";break;case Et.HorizontalAlign.CENTER:o.style.textAlign="center";break;case Et.HorizontalAlign.RIGHT:o.style.textAlign="right"}}}},o._updatePlaceholderLabel=function(t){if(t){var e=t.font;e=!e||e instanceof St?t.fontFamily:t.font._fontFamily;var i=t.fontSize*t.node.scale.y;if(this._placeholderLabelFont!==e||this._placeholderLabelFontSize!==i||this._placeholderLabelFontColor!==t.fontColor||this._placeholderLabelAlign!==t.horizontalAlign||this._placeholderLineHeight!==t.fontSize){this._placeholderLabelFont=e,this._placeholderLabelFontSize=i,this._placeholderLabelFontColor=t.fontColor,this._placeholderLabelAlign=t.horizontalAlign,this._placeholderLineHeight=t.fontSize;var o=this._placeholderStyleSheet,n=t.color.toCSS(),r=t.fontSize,s="";switch(t.horizontalAlign){case Et.HorizontalAlign.LEFT:s="left";break;case Et.HorizontalAlign.CENTER:s="center";break;case Et.HorizontalAlign.RIGHT:s="right"}o.innerHTML="#"+this._domId+"::-webkit-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-moz-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-ms-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}",at.browserType===v.EDGE&&(o.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},o._registerEventListeners=function(){var t=this;if(this._edTxt){var e=this._edTxt,i=!1,o=this.__eventListeners;o.compositionStart=function(){i=!0},o.compositionEnd=function(){i=!1,t._delegate._editBoxTextChanged(e.value)},o.onInput=function(){if(!i){var o=t._delegate,n=o.maxLength;n>=0&&(e.value=e.value.slice(0,n)),o._editBoxTextChanged(e.value)}},o.onClick=function(){t._editing&&at.isMobile&&t._adjustWindowScroll()},o.onKeydown=function(i){i.keyCode===dt.ENTER?(i.propagationStopped=!0,t._delegate._editBoxEditingReturn(),t._isTextArea||e.blur()):i.keyCode===dt.TAB&&(i.propagationStopped=!0,i.preventDefault(),Ze.next(t))},o.onBlur=function(){at.isMobile&&i&&o.compositionEnd(),t._editing=!1,no=null,t._hideDom(),t._delegate._editBoxEditingDidEnded()},e.addEventListener("compositionstart",o.compositionStart),e.addEventListener("compositionend",o.compositionEnd),e.addEventListener("input",o.onInput),e.addEventListener("keydown",o.onKeydown),e.addEventListener("blur",o.onBlur),e.addEventListener("touchstart",o.onClick)}},o._removeEventListeners=function(){if(this._edTxt){var t=this._edTxt,e=this.__eventListeners;t.removeEventListener("compositionstart",e.compositionStart),t.removeEventListener("compositionend",e.compositionEnd),t.removeEventListener("input",e.onInput),t.removeEventListener("keydown",e.onKeydown),t.removeEventListener("blur",e.onBlur),t.removeEventListener("touchstart",e.onClick),e.compositionStart=null,e.compositionEnd=null,e.onInput=null,e.onKeydown=null,e.onBlur=null,e.onClick=null}},e}(to);!function(t){t.EDITING_DID_BEGAN="editing-did-began",t.EDITING_DID_ENDED="editing-did-ended",t.TEXT_CHANGED="text-changed",t.EDITING_RETURN="editing-return",t.XR_EDITING_DID_BEGAN="xr-editing-did-began",t.XR_EDITING_DID_ENDED="xr-editing-did-ended"}($i||($i={}));var ao,ho,lo,co,uo,_o,po,go,fo,yo,bo,To,mo,vo,Co,So,Eo,Oo,Ao,Lo,wo,Do,Io,Po,Ro,xo,zo,No,Ho,Bo,Mo,ko,Vo,Fo,Uo,Go,jo,Wo,Zo,Xo,Yo,Ko,qo,Qo,Jo,$o,tn,en,on,nn,rn,sn,an,hn,ln,cn,un,_n,pn,dn,gn,fn=function(e){return t({EditBox:e,EditBoxComponent:e}),e}((Xe=E("cc.EditBox"),Ye=P(),Ke=R(110),qe=x(),Qe=z(Lt),Je=N(),$e=H(),ti=N(),ei=H(),ii=O(Et),oi=N(),ni=H(),ri=O(Et),si=N(),ai=H(),hi=O(vt),li=N(),ci=H(),ui=O(We),_i=N(),pi=H(),di=O(je),gi=N(),fi=H(),yi=O(Ge),bi=N(),Ti=H(),mi=N(),vi=H(),Ci=N(),Si=H(),Ei=O([L]),Oi=N(),Ai=H(),Li=O([L]),wi=N(),Di=H(),Ii=O([L]),Pi=N(),Ri=H(),xi=O([L]),zi=N(),Ni=H(),Xe(Hi=Ye(Hi=Ke(Hi=qe(Hi=Qe(Hi=w((Ji=Qi=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"editingDidBegan",Mi,a(e)),s(e,"textChanged",ki,a(e)),s(e,"editingDidEnded",Vi,a(e)),s(e,"editingReturn",Fi,a(e)),e._impl=null,e._background=null,s(e,"_textLabel",Ui,a(e)),s(e,"_placeholderLabel",Gi,a(e)),s(e,"_returnType",ji,a(e)),s(e,"_string",Wi,a(e)),s(e,"_tabIndex",Zi,a(e)),s(e,"_backgroundImage",Xi,a(e)),s(e,"_inputFlag",Yi,a(e)),s(e,"_inputMode",Ki,a(e)),s(e,"_maxLength",qi,a(e)),e._isLabelVisible=!1,e}i(e,t);var n=e.prototype;return n.__preload=function(){this._init()},n.onEnable=function(){this._registerEvent(),this._ensureBackgroundSprite(),this._impl&&this._impl.onEnable()},n.update=function(){this._impl&&this._impl.update()},n.onDisable=function(){this._unregisterEvent(),this._unregisterBackgroundEvent(),this._impl&&this._impl.onDisable()},n.onDestroy=function(){this._impl&&this._impl.clear()},n.setFocus=function(){this._impl&&this._impl.setFocus(!0)},n.focus=function(){this._impl&&this._impl.setFocus(!0)},n.blur=function(){this._impl&&this._impl.setFocus(!1)},n.isFocused=function(){return!!this._impl&&this._impl.isFocused()},n._editBoxEditingDidBegan=function(){L.emitEvents(this.editingDidBegan,this),this.node.emit($i.EDITING_DID_BEGAN,this)},n._editBoxEditingDidEnded=function(){L.emitEvents(this.editingDidEnded,this),this.node.emit($i.EDITING_DID_ENDED,this)},n._editBoxTextChanged=function(t){t=this._updateLabelStringStyle(t,!0),this.string=t,L.emitEvents(this.textChanged,t,this),this.node.emit($i.TEXT_CHANGED,this)},n._editBoxEditingReturn=function(){L.emitEvents(this.editingReturn,this),this.node.emit($i.EDITING_RETURN,this)},n._showLabels=function(){this._isLabelVisible=!0,this._updateLabels()},n._hideLabels=function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)},n._onTouchBegan=function(t){t.propagationStopped=!0},n._onTouchCancel=function(t){t.propagationStopped=!0},n._onTouchEnded=function(t){this._impl&&this._impl.beginEditing(),t.propagationStopped=!0},n._init=function(){this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(D.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new e._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()},n._ensureBackgroundSprite=function(){if(!this._background){var t=this.node.getComponent(Ct);t||(t=this.node.addComponent(Ct)),t!==this._background&&(t.type=Ct.Type.SLICED,t.spriteFrame=this._backgroundImage,this._background=t,this._registerBackgroundEvent())}},n._updateTextLabel=function(){var t=this._textLabel;if(!t){var e=this.node.getChildByName("TEXT_LABEL");e||((e=new A("TEXT_LABEL")).layer=this.node.layer),(t=e.getComponent(Et))||(t=e.addComponent(Et)),e.parent=this.node,this._textLabel=t}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=Et.Overflow.CLAMP,this._inputMode===je.ANY?(t.verticalAlign=Ot.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this._updateLabelStringStyle(this._string)},n._updatePlaceholderLabel=function(){var t=this._placeholderLabel;if(!t){var e=this.node.getChildByName("PLACEHOLDER_LABEL");e||((e=new A("PLACEHOLDER_LABEL")).layer=this.node.layer),(t=e.getComponent(Et))||(t=e.addComponent(Et)),e.parent=this.node,this._placeholderLabel=t}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),this._inputMode===je.ANY?t.enableWrapText=!0:t.enableWrapText=!1,t.string=this.placeholder},n._syncSize=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(this._background){var i=this._background.node._uiProps.uiTransformComp;i.anchorPoint=t.anchorPoint,i.setContentSize(e)}this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)},n._updateLabels=function(){if(this._isLabelVisible){var t=this._string;this._textLabel&&(this._textLabel.node.active=""!==t),this._placeholderLabel&&(this._placeholderLabel.node.active=""===t)}},n._updateString=function(t){var e=this._textLabel;if(e){var i=t;i&&(i=this._updateLabelStringStyle(i)),e.string=i,this._updateLabels()}},n._updateLabelStringStyle=function(t,e){void 0===e&&(e=!1);var i,o=this._inputFlag;if(e||o!==We.PASSWORD)o===We.INITIAL_CAPS_ALL_CHARACTERS?t=t.toUpperCase():o===We.INITIAL_CAPS_WORD?t=t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()})):o===We.INITIAL_CAPS_SENTENCE&&(t=(i=t).charAt(0).toUpperCase()+i.slice(1));else{for(var n="",r=t.length,s=0;s<r;++s)n+="●";t=n}return t},n._registerEvent=function(){this.node.on(D.TOUCH_START,this._onTouchBegan,this),this.node.on(D.TOUCH_END,this._onTouchEnded,this),this.node.on(wt.XRUI_UNCLICK,this._xrUnClick,this),this.node.on(Dt.XR_KEYBOARD_INPUT,this._xrKeyBoardInput,this)},n._unregisterEvent=function(){this.node.off(D.TOUCH_START,this._onTouchBegan,this),this.node.off(D.TOUCH_END,this._onTouchEnded,this),this.node.off(wt.XRUI_UNCLICK,this._xrUnClick,this),this.node.off(Dt.XR_KEYBOARD_INPUT,this._xrKeyBoardInput,this)},n._onBackgroundSpriteFrameChanged=function(){this._background&&(this.backgroundImage=this._background.spriteFrame)},n._registerBackgroundEvent=function(){var t=this._background&&this._background.node;null==t||t.on(Ct.EventType.SPRITE_FRAME_CHANGED,this._onBackgroundSpriteFrameChanged,this)},n._unregisterBackgroundEvent=function(){var t=this._background&&this._background.node;null==t||t.off(Ct.EventType.SPRITE_FRAME_CHANGED,this._onBackgroundSpriteFrameChanged,this)},n._updateLabelPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=-e.anchorX*e.width,o=-e.anchorY*e.height,n=this._placeholderLabel,r=this._textLabel;r&&(r.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),r.node.setPosition(i+2,o+t.height,r.node.position.z),this._inputMode===je.ANY&&(r.verticalAlign=Ot.TOP),r.enableWrapText=this._inputMode===je.ANY),n&&(n.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),n.lineHeight=t.height,n.node.setPosition(i+2,o+t.height,n.node.position.z),n.enableWrapText=this._inputMode===je.ANY)},n._resizeChildNodes=function(){var t=this.node._uiProps.uiTransformComp,e=this._textLabel&&this._textLabel.node;e&&(e.setPosition(-t.width/2,t.height/2,e.position.z),e._uiProps.uiTransformComp.setContentSize(t.contentSize));var i=this._placeholderLabel&&this._placeholderLabel.node;i&&(i.setPosition(-t.width/2,t.height/2,i.position.z),i._uiProps.uiTransformComp.setContentSize(t.contentSize));var o=this._background&&this._background.node;o&&o._uiProps.uiTransformComp.setContentSize(t.contentSize),this._syncSize()},n._xrUnClick=function(){this.node.emit($i.XR_EDITING_DID_BEGAN,this._maxLength,this.string)},n._xrKeyBoardInput=function(t){this.string=t},o(e,[{key:"string",get:function(){return this._string},set:function(t){this._maxLength>=0&&t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._string!==t&&(this._string=t,this._updateString(t))}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(t){this._placeholderLabel&&(this._placeholderLabel.string=t)}},{key:"textLabel",get:function(){return this._textLabel},set:function(t){this._textLabel!==t&&(this._textLabel=t,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(t){this._placeholderLabel!==t&&(this._placeholderLabel=t,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(t){this._backgroundImage!==t&&(this._backgroundImage=t,this._ensureBackgroundSprite(),this._background.spriteFrame=t)}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(t){this._inputFlag!==t&&(this._inputFlag=t,this._updateString(this._string))}},{key:"inputMode",get:function(){return this._inputMode},set:function(t){this._inputMode!==t&&(this._inputMode=t,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(t){this._returnType=t}},{key:"maxLength",get:function(){return this._maxLength},set:function(t){this._maxLength=t}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(t){this._tabIndex!==t&&(this._tabIndex=t,this._impl&&this._impl.setTabIndex(t))}}]),e}(k),Qi._EditBoxImpl=to,Qi.KeyboardReturnType=Ge,Qi.InputFlag=We,Qi.InputMode=je,Qi.EventType=$i,n((Bi=Ji).prototype,"string",[Je,$e],Object.getOwnPropertyDescriptor(Bi.prototype,"string"),Bi.prototype),n(Bi.prototype,"placeholder",[ti,ei],Object.getOwnPropertyDescriptor(Bi.prototype,"placeholder"),Bi.prototype),n(Bi.prototype,"textLabel",[ii,oi,ni],Object.getOwnPropertyDescriptor(Bi.prototype,"textLabel"),Bi.prototype),n(Bi.prototype,"placeholderLabel",[ri,si,ai],Object.getOwnPropertyDescriptor(Bi.prototype,"placeholderLabel"),Bi.prototype),n(Bi.prototype,"backgroundImage",[hi,li,ci],Object.getOwnPropertyDescriptor(Bi.prototype,"backgroundImage"),Bi.prototype),n(Bi.prototype,"inputFlag",[ui,_i,pi],Object.getOwnPropertyDescriptor(Bi.prototype,"inputFlag"),Bi.prototype),n(Bi.prototype,"inputMode",[di,gi,fi],Object.getOwnPropertyDescriptor(Bi.prototype,"inputMode"),Bi.prototype),n(Bi.prototype,"returnType",[yi,bi,Ti],Object.getOwnPropertyDescriptor(Bi.prototype,"returnType"),Bi.prototype),n(Bi.prototype,"maxLength",[mi,vi],Object.getOwnPropertyDescriptor(Bi.prototype,"maxLength"),Bi.prototype),n(Bi.prototype,"tabIndex",[Ci,Si],Object.getOwnPropertyDescriptor(Bi.prototype,"tabIndex"),Bi.prototype),Mi=n(Bi.prototype,"editingDidBegan",[Ei,V,Oi,Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=n(Bi.prototype,"textChanged",[Li,V,wi,Di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Vi=n(Bi.prototype,"editingDidEnded",[Ii,V,Pi,Ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fi=n(Bi.prototype,"editingReturn",[xi,V,zi,Ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ui=n(Bi.prototype,"_textLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gi=n(Bi.prototype,"_placeholderLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ji=n(Bi.prototype,"_returnType",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ge.DEFAULT}}),Wi=n(Bi.prototype,"_string",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Zi=n(Bi.prototype,"_tabIndex",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xi=n(Bi.prototype,"_backgroundImage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yi=n(Bi.prototype,"_inputFlag",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return We.DEFAULT}}),Ki=n(Bi.prototype,"_inputMode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return je.ANY}}),qi=n(Bi.prototype,"_maxLength",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Hi=Bi))||Hi)||Hi)||Hi)||Hi)||Hi)||Hi));"object"!=typeof window||"object"!=typeof document||c||u||_||(fn._EditBoxImpl=so),r.internal.EditBox=fn,function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRID=3]="GRID"}(cn||(cn={})),e(cn),function(t){t[t.NONE=0]="NONE",t[t.CONTAINER=1]="CONTAINER",t[t.CHILDREN=2]="CHILDREN"}(un||(un={})),e(un),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(_n||(_n={})),e(_n),function(t){t[t.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(pn||(pn={})),e(pn),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(dn||(dn={})),e(dn),function(t){t[t.NONE=0]="NONE",t[t.FIXED_ROW=1]="FIXED_ROW",t[t.FIXED_COL=2]="FIXED_COL"}(gn||(gn={})),e(gn);var yn,bn,Tn,mn,vn,Cn,Sn,En,On,An,Ln,wn,Dn,In,Pn,Rn,xn,zn,Nn,Hn,Bn,Mn,kn,Vn=new et,Fn=function(e){return t({Layout:e,LayoutComponent:e}),e}((ao=E("cc.Layout"),ho=P(),lo=R(110),co=x(),uo=z(Lt),_o=F(),po=H(),go=F(),fo=H(),yo=O(cn),bo=N(),To=H(),mo=O(un),vo=F(),Co=H(),So=F(),Eo=H(),Oo=O(_n),Ao=H(),Lo=H(),wo=H(),Do=H(),Io=H(),Po=H(),Ro=H(),xo=O(pn),zo=H(),No=O(dn),Ho=H(),Bo=O(gn),Mo=F(),ko=H(),Vo=F(),Fo=H(),Uo=H(),ao(Go=ho(Go=lo(Go=co(Go=uo(Go=w((ln=hn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"_resizeMode",Wo,a(e)),s(e,"_layoutType",Zo,a(e)),s(e,"_cellSize",Xo,a(e)),s(e,"_startAxis",Yo,a(e)),s(e,"_paddingLeft",Ko,a(e)),s(e,"_paddingRight",qo,a(e)),s(e,"_paddingTop",Qo,a(e)),s(e,"_paddingBottom",Jo,a(e)),s(e,"_spacingX",$o,a(e)),s(e,"_spacingY",tn,a(e)),s(e,"_verticalDirection",en,a(e)),s(e,"_horizontalDirection",on,a(e)),s(e,"_constraint",nn,a(e)),s(e,"_constraintNum",rn,a(e)),s(e,"_affectedByScale",sn,a(e)),s(e,"_isAlign",an,a(e)),e._layoutSize=new ot(300,200),e._layoutDirty=!0,e._childrenDirty=!1,e._usefulLayoutObj=[],e._init=!1,e}i(e,t);var n=e.prototype;return n.updateLayout=function(t){void 0===t&&(t=!1),(this._layoutDirty||t)&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)},n.onEnable=function(){this._addEventListeners();var t=this.node._uiProps.uiTransformComp;t.contentSize.equals(ot.ZERO)&&t.setContentSize(this._layoutSize),this._childrenChanged()},n.onDisable=function(){this._usefulLayoutObj.length=0,this._removeEventListeners()},n._checkUsefulObj=function(){this._usefulLayoutObj.length=0;for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e],o=i._uiProps.uiTransformComp;i.activeInHierarchy&&o&&this._usefulLayoutObj.push(o)}},n._addEventListeners=function(){ct.on(_t.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(D.SIZE_CHANGED,this._resized,this),this.node.on(D.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(D.CHILD_ADDED,this._childAdded,this),this.node.on(D.CHILD_REMOVED,this._childRemoved,this),this.node.on(D.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.on("childrenSiblingOrderChanged",this.updateLayout,this),this._addChildrenEventListeners()},n._removeEventListeners=function(){ct.off(_t.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(D.SIZE_CHANGED,this._resized,this),this.node.off(D.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(D.CHILD_ADDED,this._childAdded,this),this.node.off(D.CHILD_REMOVED,this._childRemoved,this),this.node.off(D.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this.node.off("childrenSiblingOrderChanged",this.updateLayout,this),this._removeChildrenEventListeners()},n._addChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.on(D.SIZE_CHANGED,this._doLayoutDirty,this),i.on(D.TRANSFORM_CHANGED,this._transformDirty,this),i.on(D.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on(D.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this)}},n._removeChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.off(D.SIZE_CHANGED,this._doLayoutDirty,this),i.off(D.TRANSFORM_CHANGED,this._transformDirty,this),i.off(D.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off(D.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this)}},n._childAdded=function(t){t.on(D.SIZE_CHANGED,this._doLayoutDirty,this),t.on(D.TRANSFORM_CHANGED,this._transformDirty,this),t.on(D.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on(D.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this),this._childrenChanged()},n._childRemoved=function(t){t.off(D.SIZE_CHANGED,this._doLayoutDirty,this),t.off(D.TRANSFORM_CHANGED,this._transformDirty,this),t.off(D.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off(D.ACTIVE_IN_HIERARCHY_CHANGED,this._childrenChanged,this),this._childrenChanged()},n._resized=function(){this._layoutSize.set(this.node._uiProps.uiTransformComp.contentSize),this._doLayoutDirty()},n._doLayoutHorizontally=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingLeft;this._horizontalDirection===dn.RIGHT_TO_LEFT&&(s=-1,a=this._paddingRight);var h=(this._horizontalDirection-n.x)*t+s*a,l=h-s*this._spacingX,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.width,y=this._getPaddingH();this._layoutType!==cn.GRID&&this._resizeMode===un.CHILDREN&&(f=(t-y-(g-1)*this._spacingX)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===un.CHILDREN&&(m.width=f/S,this._layoutType===cn.GRID&&(m.height=this._cellSize.height/E));var O=Math.abs(this._horizontalDirection-m.anchorX),A=m.width*S,L=m.height*E;L>_&&(p=Math.max(_,p),u=_||L,_=L),l+=s*(O*A+this._spacingX);var w=s*(1-O)*A;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(u=_>L?_:u);else if(A>t-y)l>h+s*O*A&&(d=!0);else{var D=(1-this._horizontalDirection-n.x)*t,I=l+w+s*(s>0?this._paddingRight:this._paddingLeft);d=Math.abs(I)>Math.abs(D)}d&&(l=h+s*O*A,L!==_&&(u=_),c+=u+this._spacingY,u=_=L)}var P=i(v,m,c);o&&v.setPosition(l,P),l+=w}return u=Math.max(u,_),Math.max(p,c+u)+this._getPaddingV()},n._doLayoutVertically=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedBreakingNum(),s=1,a=this._paddingBottom;this._verticalDirection===pn.TOP_TO_BOTTOM&&(s=-1,a=this._paddingTop);var h=(this._verticalDirection-n.y)*t+s*a,l=h-s*this._spacingY,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.height,y=this._getPaddingV();this._layoutType!==cn.GRID&&this._resizeMode===un.CHILDREN&&(f=(t-y-(g-1)*this._spacingY)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,C=v.scale,S=this._getUsedScaleValue(C.x),E=this._getUsedScaleValue(C.y);this._resizeMode===un.CHILDREN&&(m.height=f/E,this._layoutType===cn.GRID&&(m.width=this._cellSize.width/S));var O=Math.abs(this._verticalDirection-m.anchorY),A=m.width*S,L=m.height*E;A>c&&(u=Math.max(c,u),_=c||A,c=A),l+=s*(O*L+this._spacingY);var w=s*(1-O)*L;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(_=c>L?c:_);else if(L>t-y)l>h+s*O*L&&(d=!0);else{var D=(1-this._verticalDirection-n.y)*t,I=l+w+s*(s>0?this._paddingTop:this._paddingBottom);d=Math.abs(I)>Math.abs(D)}d&&(l=h+s*O*L,A!==c&&(_=c),p+=_+this._spacingX,_=c=A)}var P=i(v,m,p);o&&(v.getPosition(Vn),v.setPosition(P,l,Vn.z)),l+=w}return _=Math.max(_,c),Math.max(u,p+_)+this._getPaddingH()},n._doLayoutGridAxisHorizontal=function(t,e){var i=this,o=e.width,n=1,r=-t.y*e.height,s=this._paddingBottom;this._verticalDirection===pn.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*e.height,s=this._paddingTop);var a=function(t,e,o){return r+n*(o+(1-e.anchorY)*e.height*i._getUsedScaleValue(t.scale.y)+s)},h=0;this._resizeMode===un.CONTAINER&&(h=this._doLayoutHorizontally(o,!0,a,!1),r=-t.y*h,this._verticalDirection===pn.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*h)),this._doLayoutHorizontally(o,!0,a,!0),this._resizeMode===un.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(o,h)},n._doLayoutGridAxisVertical=function(t,e){var i=this,o=e.height,n=1,r=-t.x*e.width,s=this._paddingLeft;this._horizontalDirection===dn.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*e.width,s=this._paddingRight);var a=function(t,e,o){return r+n*(o+(1-e.anchorX)*e.width*i._getUsedScaleValue(t.scale.x)+s)},h=0;this._resizeMode===un.CONTAINER&&(h=this._doLayoutVertically(o,!0,a,!1),r=-t.x*h,this._horizontalDirection===dn.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*h)),this._doLayoutVertically(o,!0,a,!0),this._resizeMode===un.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(h,o)},n._doLayoutGrid=function(){var t=this.node._uiProps.uiTransformComp,e=t.anchorPoint,i=t.contentSize;this.startAxis===_n.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,i):this.startAxis===_n.VERTICAL&&this._doLayoutGridAxisVertical(e,i)},n._getHorizontalBaseWidth=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===un.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.width*this._getUsedScaleValue(r.x)}e+=(i-1)*this._spacingX+this._getPaddingH()}else e=this.node._uiProps.uiTransformComp.width;return e},n._getVerticalBaseHeight=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===un.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.height*this._getUsedScaleValue(r.y)}e+=(i-1)*this._spacingY+this._getPaddingV()}else e=this.node._uiProps.uiTransformComp.height;return e},n._doLayout=function(){var t=this;if(this._init&&!this._childrenDirty||(this._checkUsefulObj(),this._init=!0,this._childrenDirty=!1),this._layoutType===cn.HORIZONTAL){var e=this._getHorizontalBaseWidth();this._doLayoutHorizontally(e,!1,(function(e){return(t._isAlign?et.ZERO:e.position).y}),!0),this.node._uiProps.uiTransformComp.width=e}else if(this._layoutType===cn.VERTICAL){var i=this._getVerticalBaseHeight();this._doLayoutVertically(i,!1,(function(e){return(t._isAlign?et.ZERO:e.position).x}),!0),this.node._uiProps.uiTransformComp.height=i}else this._layoutType===cn.GRID&&this._doLayoutGrid()},n._getUsedScaleValue=function(t){return this._affectedByScale?Math.abs(t):1},n._transformDirty=function(t){t&I.SCALE&&t&I.POSITION&&this._affectedByScale&&this._doLayoutDirty()},n._doLayoutDirty=function(){this._layoutDirty=!0},n._childrenChanged=function(){this._childrenDirty=!0,this._doLayoutDirty()},n._getPaddingH=function(){return this._paddingLeft+this._paddingRight},n._getPaddingV=function(){return this._paddingTop+this._paddingBottom},n._getFixedBreakingNum=function(){if(this._layoutType!==cn.GRID||this._constraint===gn.NONE||this._constraintNum<=0)return 0;var t=this._constraint===gn.FIXED_ROW?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum;return this._startAxis===_n.VERTICAL&&(t=this._constraint===gn.FIXED_COL?Math.ceil(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum),t},o(e,[{key:"alignHorizontal",get:function(){return this._isAlign},set:function(t){this._layoutType===cn.HORIZONTAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"alignVertical",get:function(){return this._isAlign},set:function(t){this._layoutType===cn.VERTICAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"type",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(t){this._layoutType!==cn.NONE&&(this._resizeMode=t,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize.set(t),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(t){this._startAxis!==t&&(this._startAxis=t,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY!==t&&(this._spacingY=t,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(t){this._verticalDirection!==t&&(this._verticalDirection=t,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(t){this._horizontalDirection!==t&&(this._horizontalDirection=t,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(t){this.paddingLeft===t&&this._paddingRight===t&&this._paddingTop===t&&this._paddingBottom===t||(this._paddingLeft=this._paddingRight=this._paddingTop=this._paddingBottom=t,this._doLayoutDirty())}},{key:"constraint",get:function(){return this._constraint},set:function(t){this._layoutType!==cn.NONE&&this._constraint!==t&&(this._constraint=t,this._doLayoutDirty())}},{key:"constraintNum",get:function(){return this._constraintNum},set:function(t){this._constraint!==gn.NONE&&this._constraintNum!==t&&(t<=0&&p("Limit values to be greater than 0"),this._constraintNum=t,this._doLayoutDirty())}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(t){this._affectedByScale=t,this._doLayoutDirty()}}]),e}(k),hn.Type=cn,hn.VerticalDirection=pn,hn.HorizontalDirection=dn,hn.ResizeMode=un,hn.AxisDirection=_n,hn.Constraint=gn,n((jo=ln).prototype,"alignHorizontal",[_o,po],Object.getOwnPropertyDescriptor(jo.prototype,"alignHorizontal"),jo.prototype),n(jo.prototype,"alignVertical",[go,fo],Object.getOwnPropertyDescriptor(jo.prototype,"alignVertical"),jo.prototype),n(jo.prototype,"type",[yo,bo,To],Object.getOwnPropertyDescriptor(jo.prototype,"type"),jo.prototype),n(jo.prototype,"resizeMode",[mo,vo,Co],Object.getOwnPropertyDescriptor(jo.prototype,"resizeMode"),jo.prototype),n(jo.prototype,"cellSize",[So,Eo],Object.getOwnPropertyDescriptor(jo.prototype,"cellSize"),jo.prototype),n(jo.prototype,"startAxis",[Oo,Ao],Object.getOwnPropertyDescriptor(jo.prototype,"startAxis"),jo.prototype),n(jo.prototype,"paddingLeft",[Lo],Object.getOwnPropertyDescriptor(jo.prototype,"paddingLeft"),jo.prototype),n(jo.prototype,"paddingRight",[wo],Object.getOwnPropertyDescriptor(jo.prototype,"paddingRight"),jo.prototype),n(jo.prototype,"paddingTop",[Do],Object.getOwnPropertyDescriptor(jo.prototype,"paddingTop"),jo.prototype),n(jo.prototype,"paddingBottom",[Io],Object.getOwnPropertyDescriptor(jo.prototype,"paddingBottom"),jo.prototype),n(jo.prototype,"spacingX",[Po],Object.getOwnPropertyDescriptor(jo.prototype,"spacingX"),jo.prototype),n(jo.prototype,"spacingY",[Ro],Object.getOwnPropertyDescriptor(jo.prototype,"spacingY"),jo.prototype),n(jo.prototype,"verticalDirection",[xo,zo],Object.getOwnPropertyDescriptor(jo.prototype,"verticalDirection"),jo.prototype),n(jo.prototype,"horizontalDirection",[No,Ho],Object.getOwnPropertyDescriptor(jo.prototype,"horizontalDirection"),jo.prototype),n(jo.prototype,"constraint",[Bo,Mo,ko],Object.getOwnPropertyDescriptor(jo.prototype,"constraint"),jo.prototype),n(jo.prototype,"constraintNum",[Vo,Fo],Object.getOwnPropertyDescriptor(jo.prototype,"constraintNum"),jo.prototype),n(jo.prototype,"affectedByScale",[Uo],Object.getOwnPropertyDescriptor(jo.prototype,"affectedByScale"),jo.prototype),Wo=n(jo.prototype,"_resizeMode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return un.NONE}}),Zo=n(jo.prototype,"_layoutType",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return cn.NONE}}),Xo=n(jo.prototype,"_cellSize",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ot(40,40)}}),Yo=n(jo.prototype,"_startAxis",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _n.HORIZONTAL}}),Ko=n(jo.prototype,"_paddingLeft",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qo=n(jo.prototype,"_paddingRight",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qo=n(jo.prototype,"_paddingTop",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Jo=n(jo.prototype,"_paddingBottom",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$o=n(jo.prototype,"_spacingX",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tn=n(jo.prototype,"_spacingY",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),en=n(jo.prototype,"_verticalDirection",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pn.TOP_TO_BOTTOM}}),on=n(jo.prototype,"_horizontalDirection",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dn.LEFT_TO_RIGHT}}),nn=n(jo.prototype,"_constraint",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return gn.NONE}}),rn=n(jo.prototype,"_constraintNum",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),sn=n(jo.prototype,"_affectedByScale",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),an=n(jo.prototype,"_isAlign",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Go=jo))||Go)||Go)||Go)||Go)||Go)||Go));r.Layout=Fn,function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.FILLED=2]="FILLED"}(kn||(kn={})),h(kn);var Un,Gn,jn,Wn,Zn,Xn,Yn,Kn,qn,Qn,Jn,$n,tr,er,ir,or,nr,rr,sr,ar,hr,lr,cr,ur,_r=function(e){return t({ProgressBar:e,ProgressBarComponent:e}),e}((yn=E("cc.ProgressBar"),bn=P(),Tn=R(110),mn=x(),vn=z(Lt),Cn=O(Ct),Sn=H(),En=O(kn),On=H(),An=H(),Ln=G(),wn=H(),Dn=H(),yn(In=bn(In=Tn(In=mn(In=vn((Mn=Bn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"_barSprite",Rn,a(e)),s(e,"_mode",xn,a(e)),s(e,"_totalLength",zn,a(e)),s(e,"_progress",Nn,a(e)),s(e,"_reverse",Hn,a(e)),e}i(e,t);var n=e.prototype;return n._initBarSprite=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=t._uiProps.uiTransformComp.contentSize;if(this._barSprite.fillType===Ct.FillType.RADIAL&&(this._mode=kn.FILLED),this._mode===kn.HORIZONTAL?this.totalLength=n.width:this._mode===kn.VERTICAL?this.totalLength=n.height:this.totalLength=this._barSprite.fillRange,t.parent===this.node){var r=-i.width*o.x;t.setPosition(r,0,0)}}},n._updateBarStatus=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=t._uiProps.uiTransformComp,i=e.anchorPoint,o=e.contentSize,n=t.getPosition(),r=new nt(0,.5),s=rt(this._progress),a=this._totalLength*s,h=o,l=0,c=0;switch(this._mode){case kn.HORIZONTAL:this._reverse&&(r=new nt(1,.5)),h=new ot(a,o.height),l=this._totalLength,c=o.height;break;case kn.VERTICAL:r=this._reverse?new nt(.5,1):new nt(.5,0),h=new ot(o.width,a),l=o.width,c=this._totalLength}if(this._mode===kn.FILLED)this._barSprite.type!==Ct.Type.FILLED?p("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(a*=-1),this._barSprite.fillRange=a);else if(this._barSprite.type!==Ct.Type.FILLED){var u=r.x-i.x,_=r.y-i.y,d=new et(l*u,c*_,0);t.setPosition(n.x+d.x,n.y+d.y,n.z),e.setAnchorPoint(r),e.setContentSize(h)}else p("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}},o(e,[{key:"barSprite",get:function(){return this._barSprite},set:function(t){this._barSprite!==t&&(this._barSprite=t,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(t){if(this._mode!==t&&(this._mode=t,this._barSprite)){var e=this._barSprite.node;if(!e)return;var i=e._uiProps.uiTransformComp.contentSize;this._mode===kn.HORIZONTAL?this.totalLength=i.width:this._mode===kn.VERTICAL?this.totalLength=i.height:this._mode===kn.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(t){this._mode===kn.FILLED&&(t=rt(t)),this._totalLength!==t&&(this._totalLength=t,this._updateBarStatus())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(t){this._reverse!==t&&(this._reverse=t,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),e}(k),Bn.Mode=kn,n((Pn=Mn).prototype,"barSprite",[Cn,Sn],Object.getOwnPropertyDescriptor(Pn.prototype,"barSprite"),Pn.prototype),n(Pn.prototype,"mode",[En,On],Object.getOwnPropertyDescriptor(Pn.prototype,"mode"),Pn.prototype),n(Pn.prototype,"totalLength",[An],Object.getOwnPropertyDescriptor(Pn.prototype,"totalLength"),Pn.prototype),n(Pn.prototype,"progress",[Ln,U,wn],Object.getOwnPropertyDescriptor(Pn.prototype,"progress"),Pn.prototype),n(Pn.prototype,"reverse",[Dn],Object.getOwnPropertyDescriptor(Pn.prototype,"reverse"),Pn.prototype),Rn=n(Pn.prototype,"_barSprite",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xn=n(Pn.prototype,"_mode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return kn.HORIZONTAL}}),zn=n(Pn.prototype,"_totalLength",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Nn=n(Pn.prototype,"_progress",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Hn=n(Pn.prototype,"_reverse",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),In=Pn))||In)||In)||In)||In)||In));r.ProgressBar=_r;var pr,dr=new et,gr=new et,fr=new et,yr=new nt,br=new $,Tr=new nt;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(pr||(pr={})),e(pr);var mr,vr=function(e){return t({ScrollBar:e,ScrollBarComponent:e}),e}((Un=E("cc.ScrollBar"),Gn=P(),jn=R(110),Wn=x(),Zn=z(Lt),Xn=O(Ct),Yn=N(),Kn=H(),qn=O(pr),Qn=N(),Jn=H(),$n=N(),tr=H(),er=N(),ir=H(),Un(or=Gn(or=jn(or=Wn(or=Zn((ur=cr=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"_scrollView",rr,a(e)),s(e,"_handle",sr,a(e)),s(e,"_direction",ar,a(e)),s(e,"_enableAutoHide",hr,a(e)),s(e,"_autoHideTime",lr,a(e)),e._touching=!1,e._opacity=255,e._autoHideRemainingTime=0,e}i(e,t);var n=e.prototype;return n.hide=function(){this._autoHideRemainingTime=0,this._setOpacity(0)},n.show=function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)},n.onScroll=function(t){if(this._scrollView){var e=this._scrollView.content;if(e){var i=e._uiProps.uiTransformComp.contentSize,o=this._scrollView.node._uiProps.uiTransformComp.contentSize,n=this.node._uiProps.uiTransformComp.contentSize;if(!this._conditionalDisableScrollBar(i,o)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var r=0,s=0,a=0,h=0,l=0,c=Tr;c.set(0,0),this._direction===pr.HORIZONTAL?(r=i.width,s=o.width,l=n.width,a=t.x,this._convertToScrollViewSpace(c,e),h=-c.x):this._direction===pr.VERTICAL&&(r=i.height,s=o.height,l=n.height,a=t.y,this._convertToScrollViewSpace(c,e),h=-c.y);var u=this._calculateLength(r,s,l,a),_=Tr;this._calculatePosition(_,r,s,l,h,a,u),this._updateLength(u),this._updateHandlerPosition(_)}}}},n.setScrollView=function(t){this._scrollView=t},n.onTouchBegan=function(){this._enableAutoHide&&(this._touching=!0)},n.onTouchEnded=function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var t=this._scrollView.content;if(t){var e=t._uiProps.uiTransformComp.contentSize,i=this._scrollView.node._uiProps.uiTransformComp.contentSize;if(this._conditionalDisableScrollBar(e,i))return}}this._autoHideRemainingTime=this._autoHideTime}},n.onEnable=function(){var t=this.node.getComponent(Ct);t&&(this._opacity=t.color.a)},n.start=function(){this._enableAutoHide&&this._setOpacity(0)},n.update=function(t){this._processAutoHide(t)},n._convertToScrollViewSpace=function(t,e){var i=this._scrollView&&this._scrollView.node._uiProps.uiTransformComp,o=e._uiProps.uiTransformComp;if(i&&o){dr.set(-o.anchorX*o.width,-o.anchorY*o.height,0),o.convertToWorldSpaceAR(dr,gr);var n=i.convertToNodeSpaceAR(gr);n.x+=i.anchorX*i.width,n.y+=i.anchorY*i.height,t.set(n.x,n.y)}else t.set(nt.ZERO)},n._setOpacity=function(t){if(this._handle){var e=this.node.getComponent(Ct);e&&(br.set(e.color),br.a=t,e.color=br),(e=this._handle.getComponent(Ct))&&(br.set(e.color),br.a=t,e.color=br)}},n._updateHandlerPosition=function(t){if(this._handle){var e=fr;this._fixupHandlerPosition(e),this._handle.node.setPosition(t.x+e.x,t.y+e.y,e.z)}},n._fixupHandlerPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=this.handle.node._uiProps.uiTransformComp.contentSize,r=this.handle.node.parent;et.set(dr,-i.width*o.x,-i.height*o.y,0);var s=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(dr,gr),a=t;a.set(0,0,0),r._uiProps.uiTransformComp.convertToNodeSpaceAR(s,a),this.direction===pr.HORIZONTAL?a.set(a.x,a.y+(i.height-n.height)/2,a.z):this.direction===pr.VERTICAL&&a.set(a.x+(i.width-n.width)/2,a.y,a.z),this.handle.node.setPosition(a)},n._conditionalDisableScrollBar=function(t,e){return t.width<=e.width&&this._direction===pr.HORIZONTAL||t.height<=e.height&&this._direction===pr.VERTICAL},n._calculateLength=function(t,e,i,o){var n=t;return o&&(n+=20*(o>0?o:-o)),i*(e/n)},n._calculatePosition=function(t,e,i,o,n,r,s){var a=e-i;r&&(a+=Math.abs(r));var h=0;a&&(h=rt(h=n/a));var l=(o-s)*h;this._direction===pr.VERTICAL?t.set(0,l):t.set(l,0)},n._updateLength=function(t){if(this._handle){var e=this._handle.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint;o.x===yr.x&&o.y===yr.y||e.setAnchorPoint(yr),this._direction===pr.HORIZONTAL?e.setContentSize(t,i.height):e.setContentSize(i.width,t)}},n._processAutoHide=function(t){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(e)}},o(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t,this.onScroll(nt.ZERO))}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.onScroll(nt.ZERO))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(t){this._enableAutoHide!==t&&(this._enableAutoHide=t,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(t){this._autoHideTime!==t&&(this._autoHideTime=t)}}]),e}(k),cr.Direction=pr,n((nr=ur).prototype,"handle",[Xn,Yn,Kn],Object.getOwnPropertyDescriptor(nr.prototype,"handle"),nr.prototype),n(nr.prototype,"direction",[qn,Qn,Jn],Object.getOwnPropertyDescriptor(nr.prototype,"direction"),nr.prototype),n(nr.prototype,"enableAutoHide",[$n,tr],Object.getOwnPropertyDescriptor(nr.prototype,"enableAutoHide"),nr.prototype),n(nr.prototype,"autoHideTime",[er,ir],Object.getOwnPropertyDescriptor(nr.prototype,"autoHideTime"),nr.prototype),rr=n(nr.prototype,"_scrollView",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sr=n(nr.prototype,"_handle",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ar=n(nr.prototype,"_direction",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pr.HORIZONTAL}}),hr=n(nr.prototype,"_enableAutoHide",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lr=n(nr.prototype,"_autoHideTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),or=nr))||or)||or)||or)||or)||or));r.ScrollBar=vr;var Cr,Sr,Er,Or,Ar,Lr,wr,Dr,Ir,Pr,Rr,xr,zr,Nr,Hr,Br,Mr,kr,Vr,Fr,Ur,Gr,jr,Wr,Zr,Xr,Yr,Kr,qr,Qr,Jr,$r,ts,es,is,os,ns,rs,ss,as,hs,ls,cs,us,_s,ps,ds,gs,fs=t("ViewGroup",E("cc.ViewGroup")(mr=R(110)(mr=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e}(k))||mr)||mr);r.ViewGroup=fs;var ys,bs,Ts=1e-4,ms=new et,vs=new et,Cs=new nt,Ss=new nt,Es=function(){return(new Date).getMilliseconds()},Os={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(t){t.SCROLL_TO_TOP="scroll-to-top",t.SCROLL_TO_BOTTOM="scroll-to-bottom",t.SCROLL_TO_LEFT="scroll-to-left",t.SCROLL_TO_RIGHT="scroll-to-right",t.SCROLL_BEGAN="scroll-began",t.SCROLL_ENDED="scroll-ended",t.BOUNCE_TOP="bounce-top",t.BOUNCE_BOTTOM="bounce-bottom",t.BOUNCE_LEFT="bounce-left",t.BOUNCE_RIGHT="bounce-right",t.SCROLLING="scrolling",t.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",t.TOUCH_UP="touch-up"}(ys||(ys={})),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT"}(bs||(bs={}));var As,Ls,ws,Ds,Is,Ps,Rs,xs,zs,Ns,Hs,Bs,Ms,ks,Vs,Fs,Us,Gs,js,Ws,Zs,Xs=function(e){return t({ScrollView:e,ScrollViewComponent:e}),e}((Cr=E("cc.ScrollView"),Sr=P(),Er=R(110),Or=x(),Ar=z(Lt),Lr=G(),wr=N(),Dr=H(),Ir=G(),Pr=N(),Rr=H(),xr=N(),zr=H(),Nr=N(),Hr=H(),Br=O(A),Mr=N(),kr=H(),Vr=N(),Fr=H(),Ur=O(vr),Gr=N(),jr=H(),Wr=N(),Zr=H(),Xr=O(vr),Yr=N(),Kr=H(),qr=N(),Qr=H(),Jr=O([L]),$r=N(),ts=H(),Cr(es=Sr(es=Er(es=Or(es=Ar((gs=ds=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"bounceDuration",os,a(e)),s(e,"brake",ns,a(e)),s(e,"elastic",rs,a(e)),s(e,"inertia",ss,a(e)),s(e,"horizontal",as,a(e)),s(e,"vertical",hs,a(e)),s(e,"cancelInnerEvents",ls,a(e)),s(e,"scrollEvents",cs,a(e)),e._autoScrolling=!1,e._scrolling=!1,s(e,"_content",us,a(e)),s(e,"_horizontalScrollBar",_s,a(e)),s(e,"_verticalScrollBar",ps,a(e)),e._topBoundary=0,e._bottomBoundary=0,e._leftBoundary=0,e._rightBoundary=0,e._touchMoveDisplacements=[],e._touchMoveTimeDeltas=[],e._touchMovePreviousTimestamp=0,e._touchMoved=!1,e._autoScrollAttenuate=!1,e._autoScrollStartPosition=new et,e._autoScrollTargetDelta=new et,e._autoScrollTotalTime=0,e._autoScrollAccumulatedTime=0,e._autoScrollCurrentlyOutOfBoundary=!1,e._autoScrollBraking=!1,e._autoScrollBrakingStartPosition=new et,e._outOfBoundaryAmount=new et,e._outOfBoundaryAmountDirty=!0,e._stopMouseWheel=!1,e._mouseWheelEventElapsedTime=0,e._isScrollEndedWithThresholdEventFired=!1,e._scrollEventEmitMask=0,e._isBouncing=!1,e._contentPos=new et,e._deltaPos=new et,e._hoverIn=bs.NONE,e._scrollState=new nt(0,0),e}i(e,t);var n=e.prototype;return n.scrollToBottom=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(0,0),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i,!0)},n.scrollToTop=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(0,1),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(0,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(1,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToTopLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(0,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToTopRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(1,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToBottomLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(0,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToBottomRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new nt(1,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},n.scrollToOffset=function(t,e,i){void 0===i&&(i=!0);var o=this.getMaxScrollOffset(),n=new nt(0,0);0===o.x?n.x=0:n.x=t.x/o.x,0===o.y?n.y=1:n.y=(o.y-t.y)/o.y,this.scrollTo(n,e,i)},n.getScrollOffset=function(){var t=this._getContentTopBoundary()-this._topBoundary,e=this._getContentLeftBoundary()-this._leftBoundary;return new nt(e,t)},n.getMaxScrollOffset=function(){if(!this._content||!this.view)return nt.ZERO;var t=this._content._uiProps.uiTransformComp.contentSize,e=t.width-this.view.width,i=t.height-this.view.height;return new nt(e=e>=0?e:0,i=i>=0?i:0)},n.scrollToPercentHorizontal=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new nt(t,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(o,e,!1!==i):this._moveContent(o)},n.scrollTo=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new nt(t),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},n.scrollToPercentVertical=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new nt(0,t),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},n.stopAutoScroll=function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},n.setContentPosition=function(t){this._setContentPosition(t)},n._setContentPosition=function(t){if(this._content){var e=this._getContentPosition();Math.abs(t.x-e.x)<Ts&&Math.abs(t.y-e.y)<Ts||(this._content.setPosition(t),this._outOfBoundaryAmountDirty=!0)}},n.getContentPosition=function(){return this._getContentPosition()},n._getContentPosition=function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):et.ZERO.clone()},n.isScrolling=function(){return this._scrolling},n.isAutoScrolling=function(){return this._autoScrolling},n.getScrollEndedEventTiming=function(){return Ts},n.start=function(){this._calculateBoundary(),this._content&&ct.once(_t.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},n.onEnable=function(){this._registerEvent(),this._content&&(this._content.on(D.SIZE_CHANGED,this._calculateBoundary,this),this._content.on(D.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.on(D.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.on(D.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._updateScrollBarState()},n.update=function(t){this._autoScrolling&&this._processAutoScrolling(t)},n.onDisable=function(){this._unregisterEvent(),this._content&&(this._content.off(D.SIZE_CHANGED,this._calculateBoundary,this),this._content.off(D.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.off(D.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.off(D.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()},n._registerEvent=function(){this.node.on(D.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(D.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(D.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(D.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(D.MOUSE_WHEEL,this._onMouseWheel,this,!0),this.node.on(wt.XRUI_HOVER_ENTERED,this._xrHoverEnter,this),this.node.on(wt.XRUI_HOVER_EXITED,this._xrHoverExit,this),j.on(W.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),j.on(W.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},n._unregisterEvent=function(){this.node.off(D.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(D.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(D.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(D.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(D.MOUSE_WHEEL,this._onMouseWheel,this,!0),this.node.off(wt.XRUI_HOVER_ENTERED,this._xrHoverEnter,this),this.node.off(wt.XRUI_HOVER_EXITED,this._xrHoverExit,this),j.off(W.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),j.off(W.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},n._onMouseWheel=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var i=new et,o=t.getScrollY();this.vertical?i.set(0,-.1*o,0):this.horizontal&&i.set(-.1*o,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(t)}},n._onTouchBegan=function(t,e){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(t,e)||(this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)))},n._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this._handleMoveLogic(i),this.cancelInnerEvents){var o=i.getUILocation(Cs);if(o.subtract(i.getUIStartLocation(Ss)),o.length()>7&&!this._touchMoved&&t.target!==this.node){var n=new gt(t.getTouches(),t.bubbles,ft.TOUCH_CANCEL);n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},n._onTouchEnded=function(t,e){if(this.enabledInHierarchy&&this._content&&t&&!this._hasNestedViewGroup(t,e)){this._dispatchEvent(ys.TOUCH_UP);var i=t.touch;this._handleReleaseLogic(i),this._touchMoved?t.propagationStopped=!0:this._stopPropagationIfTargetIsMe(t)}},n._onTouchCancelled=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){if(t&&!t.simulate){var i=t.touch;this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(t)}},n._calculateBoundary=function(){if(this._content&&this.view){var t=this._content.getComponent(Fn);t&&t.enabledInHierarchy&&t.updateLayout();var e=this.view,i=e.width*e.anchorX,o=e.height*e.anchorY;this._leftBoundary=-i,this._bottomBoundary=-o,this._rightBoundary=this._leftBoundary+e.width,this._topBoundary=this._bottomBoundary+e.height,this._moveContentToTopLeft(e.contentSize)}},n._hasNestedViewGroup=function(t,e){if(!t||t.eventPhase!==yt.CAPTURING_PHASE)return!1;if(e)for(var i,o=d(e);!(i=o()).done;){var n=i.value;if(this.node===n)return!(!t.target||!t.target.getComponent(fs));if(n.getComponent(fs))return!0}return!1},n._startInertiaScroll=function(t){var e=new et(t);e.multiplyScalar(.7),this._startAttenuatingAutoScroll(e,t)},n._calculateAttenuatedFactor=function(t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*t+t*t*8e-9))},n._startAttenuatingAutoScroll=function(t,e){var i=t.clone();if(i.normalize(),this._content&&this.view){var o=this._content._uiProps.uiTransformComp.contentSize,n=this.view.contentSize,r=o.width-n.width,s=o.height-n.height,a=this._calculateAttenuatedFactor(r),h=this._calculateAttenuatedFactor(s);i.x=i.x*r*(1-this.brake)*a,i.y=i.y*s*h*(1-this.brake),i.z=0}var l=t.length(),c=i.length()/l;if(i.add(t),this.brake>0&&c>7){c=Math.sqrt(c);var u=t.clone();u.multiplyScalar(c),i.set(u),i.add(t)}var _=this._calculateAutoScrollTimeByInitialSpeed(e.length());this.brake>0&&c>3&&(_*=c=3),0===this.brake&&c>1&&(_*=c),this._startAutoScroll(i,_,!0)},n._calculateAutoScrollTimeByInitialSpeed=function(t){return Math.sqrt(Math.sqrt(t/5))},n._startAutoScroll=function(t,e,i){void 0===i&&(i=!1);var o=this._flattenVectorByDirection(t);this._autoScrolling=!0,this._autoScrollTargetDelta=o,this._autoScrollAttenuate=i,et.copy(this._autoScrollStartPosition,this._getContentPosition()),this._autoScrollTotalTime=e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition.set(0,0,0),this._getHowMuchOutOfBoundary().equals(et.ZERO,Ts)||(this._autoScrollCurrentlyOutOfBoundary=!0)},n._calculateTouchMoveVelocity=function(){var t=new et,e=0;if((e=this._touchMoveTimeDeltas.reduce((function(t,e){return t+e}),e))<=0||e>=.5)t.set(et.ZERO);else{var i=new et;i=this._touchMoveDisplacements.reduce((function(t,e){return t.add(e),t}),i),t.set(i.x*(1-this.brake)/e,i.y*(1-this.brake)/e,i.z)}return t},n._flattenVectorByDirection=function(t){var e=t;return e.x=this.horizontal?e.x:0,e.y=this.vertical?e.y:0,e},n._moveContent=function(t,e){var i=this._flattenVectorByDirection(t);ms.set(this._getContentPosition()),ms.add(i),ms.set(Math.round(1e4*ms.x)*Ts,Math.round(1e4*ms.y)*Ts,ms.z),this._setContentPosition(ms);var o=this._getHowMuchOutOfBoundary();Cs.set(o.x,o.y),this._updateScrollBar(Cs),this.elastic&&e&&this._startBounceBackIfNeeded()},n._getContentLeftBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.x-e.anchorX*e.width},n._getContentRightBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentLeftBoundary()+t.width},n._getContentTopBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentBottomBoundary()+t.height},n._getContentBottomBoundary=function(){if(!this._content)return-1;var t=this._getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.y-e.anchorY*e.height},n._getHowMuchOutOfBoundary=function(t){if((t=t||new et).equals(et.ZERO,Ts)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=new et,i=this._getContentLeftBoundary(),o=this._getContentRightBoundary();i+t.x>this._leftBoundary?e.x=this._leftBoundary-(i+t.x):o+t.x<this._rightBoundary&&(e.x=this._rightBoundary-(o+t.x));var n=this._getContentTopBoundary(),r=this._getContentBottomBoundary();return n+t.y<this._topBoundary?e.y=this._topBoundary-(n+t.y):r+t.y>this._bottomBoundary&&(e.y=this._bottomBoundary-(r+t.y)),t.equals(et.ZERO,Ts)&&(this._outOfBoundaryAmount=e,this._outOfBoundaryAmountDirty=!1),this._clampDelta(e),e},n._updateScrollBar=function(t){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(t),this.verticalScrollBar&&this.verticalScrollBar.onScroll(t)},n._onScrollBarTouchBegan=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()},n._onScrollBarTouchEnded=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()},n._dispatchEvent=function(t){if(t===ys.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(t===ys.SCROLL_TO_TOP||t===ys.SCROLL_TO_BOTTOM||t===ys.SCROLL_TO_LEFT||t===ys.SCROLL_TO_RIGHT){var e=1<<Os[t];if(this._scrollEventEmitMask&e)return;this._scrollEventEmitMask|=e}L.emitEvents(this.scrollEvents,this,Os[t]),this.node.emit(t,this)},n._adjustContentOutOfBoundary=function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var t=this._getHowMuchOutOfBoundary();ms.set(this._getContentPosition()),ms.add(t),this._content.setPosition(ms),this._updateScrollBar(nt.ZERO)}},n._hideScrollBar=function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()},n._updateScrollBarState=function(){if(this._content&&this.view){var t=this.view,e=this._content._uiProps.uiTransformComp;this.verticalScrollBar&&(e.height<t.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(e.width<t.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show())}},n._stopPropagationIfTargetIsMe=function(t){t.eventPhase===yt.AT_TARGET&&t.target===this.node&&(t.propagationStopped=!0)},n._processDeltaMove=function(t){this._scrollChildren(t),this._gatherTouchMove(t)},n._handleMoveLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._processDeltaMove(this._deltaPos)},n._handleReleaseLogic=function(t){this._getLocalAxisAlignDelta(this._deltaPos,t),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(ys.SCROLL_ENDED))},n._getLocalAxisAlignDelta=function(t,e){var i=this.node._uiProps.uiTransformComp,o=new et;i&&(e.getUILocation(Cs),e.getUIPreviousLocation(Ss),ms.set(Cs.x,Cs.y,0),vs.set(Ss.x,Ss.y,0),i.convertToNodeSpaceAR(ms,ms),i.convertToNodeSpaceAR(vs,vs),et.subtract(o,ms,vs)),t.set(o)},n._scrollChildren=function(t){this._clampDelta(t);var e,i=t;this.elastic&&(e=this._getHowMuchOutOfBoundary(),i.x*=0===e.x?1:.5,i.y*=0===e.y?1:.5),this.elastic||(e=this._getHowMuchOutOfBoundary(i),i.add(e));var o="",n="";if(this._content){var r=this._content._uiProps.uiTransformComp,s=r.anchorX,a=r.anchorY,h=r.width,l=r.height,c=this._content.position||et.ZERO;this.vertical&&(i.y>0?c.y-a*l+i.y>=this._bottomBoundary&&(o=ys.SCROLL_TO_BOTTOM):i.y<0&&c.y-a*l+l+i.y<=this._topBoundary&&(o=ys.SCROLL_TO_TOP)),this.horizontal&&(i.x<0?c.x-s*h+h+i.x<=this._rightBoundary&&(n=ys.SCROLL_TO_RIGHT):i.x>0&&c.x-s*h+i.x>=this._leftBoundary&&(n=ys.SCROLL_TO_LEFT))}this._moveContent(i,!1),(this.horizontal&&0!==i.x||this.vertical&&0!==i.y)&&(this._scrolling||(this._scrolling=!0,this._dispatchEvent(ys.SCROLL_BEGAN)),this._dispatchEvent(ys.SCROLLING)),""!==o&&this._dispatchEvent(o),""!==n&&this._dispatchEvent(n)},n._handlePressLogic=function(){this._autoScrolling&&this._dispatchEvent(ys.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=Es(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},n._clampDelta=function(t){if(this._content&&this.view){var e=this.view.contentSize,i=this._content._uiProps.uiTransformComp;i.width<e.width&&(t.x=0),i.height<e.height&&(t.y=0)}},n._gatherTouchMove=function(t){var e=t.clone();for(this._clampDelta(e);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(e);var i=Es();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i},n._startBounceBackIfNeeded=function(){if(!this.elastic)return!1;var t=this._getHowMuchOutOfBoundary();if(this._clampDelta(t),t.equals(et.ZERO,Ts))return!1;var e=Math.max(this.bounceDuration,0);return this._startAutoScroll(t,e,!0),this._isBouncing||(t.y>0&&this._dispatchEvent(ys.BOUNCE_TOP),t.y<0&&this._dispatchEvent(ys.BOUNCE_BOTTOM),t.x>0&&this._dispatchEvent(ys.BOUNCE_RIGHT),t.x<0&&this._dispatchEvent(ys.BOUNCE_LEFT),this._isBouncing=!0),!0},n._processInertiaScroll=function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!t.equals(ms,Ts)&&this.brake<1&&this._startInertiaScroll(t)}this._onScrollBarTouchEnded()},n._isOutOfBoundary=function(){return!this._getHowMuchOutOfBoundary().equals(et.ZERO,Ts)},n._isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,et.copy(this._autoScrollBrakingStartPosition,this._getContentPosition()),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},n._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?.05:1;this._autoScrollAccumulatedTime+=t*(1/i);var o,n=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=n,n=(o-=1)*o*o*o*o+1);var r=this._autoScrollTargetDelta.clone();r.multiplyScalar(n);var s=this._autoScrollStartPosition.clone();s.add(r);var a=Math.abs(n-1)<=Ts;if(Math.abs(n-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(ys.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var h=s.clone();h.subtract(this._autoScrollBrakingStartPosition),e&&h.multiplyScalar(i),s.set(this._autoScrollBrakingStartPosition),s.add(h)}else{var l=s.clone();l.subtract(this.getContentPosition());var c=this._getHowMuchOutOfBoundary(l);c.equals(et.ZERO,Ts)||(s.add(c),a=!0)}a&&(this._autoScrolling=!1);var u=s.clone();u.subtract(this._getContentPosition()),this._clampDelta(u),this._moveContent(u,a),this._dispatchEvent(ys.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(ys.SCROLL_ENDED))},n._checkMouseWheel=function(t){if(!this._getHowMuchOutOfBoundary().equals(et.ZERO,Ts))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(ys.SCROLL_ENDED),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(ys.SCROLL_ENDED),this._stopMouseWheel=!1)},n._calculateMovePercentDelta=function(t){var e=t.anchor,i=t.applyToHorizontal,o=t.applyToVertical;this._calculateBoundary(),e.clampf(nt.ZERO,nt.ONE);var n=this._getContentBottomBoundary()-this._bottomBoundary;n=-n;var r=this._getContentLeftBoundary()-this._leftBoundary;r=-r;var s=new et;if(this._content&&this.view){var a=0,h=this._content._uiProps.uiTransformComp.contentSize,l=this.view.contentSize;i&&(a=h.width-l.width,s.x=r-a*e.x),o&&(a=h.height-l.height,s.y=n-a*e.y)}return s},n._moveContentToTopLeft=function(t){var e=this._getContentBottomBoundary()-this._bottomBoundary;e=-e;var i=new et,o=0,n=this._getContentLeftBoundary()-this._leftBoundary;if(n=-n,this._content){var r=this._content._uiProps.uiTransformComp.contentSize;r.height<t.height&&(o=r.height-t.height,i.y=e-o),r.width<t.width&&(o=r.width-t.width,i.x=n)}this._updateScrollBarState(),this._moveContent(i),this._adjustContentOutOfBoundary()},n._scaleChanged=function(t){t===I.SCALE&&this._calculateBoundary()},n._xrHoverEnter=function(t){t.deviceType===It.Left?this._hoverIn=bs.LEFT:t.deviceType===It.Right&&(this._hoverIn=bs.RIGHT),this._autoScrolling=!1,this._dispatchEvent(ys.SCROLL_BEGAN)},n._xrHoverExit=function(){this._hoverIn=bs.NONE,this._autoScrolling=!0,this._dispatchEvent(ys.SCROLL_ENDED)},n._dispatchEventHandleInput=function(t){var e,i;t instanceof bt?e=t.gamepad:t instanceof Tt&&(e=t.handleInputDevice),this.enabledInHierarchy&&this._hoverIn!==bs.NONE&&(this._hoverIn===bs.LEFT?(i=e.leftStick.getValue()).equals(nt.ZERO)||this._xrThumbStickMove(i):this._hoverIn===bs.RIGHT&&((i=e.rightStick.getValue()).equals(nt.ZERO)||this._xrThumbStickMove(i)),!i&&this._scrollState.equals(nt.ZERO)&&(this._xrThumbStickMoveEnd(),this._scrollState.set(i)))},n._xrThumbStickMove=function(t){var e=new et,i=t.y;this.vertical?e.set(0,-62.5*i,0):this.horizontal&&e.set(-62.5*i,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(e),this._dispatchEvent(ys.SCROLLING)},n._xrThumbStickMoveEnd=function(){this._autoScrolling=!0,this._dispatchEvent(ys.TOUCH_UP)},o(e,[{key:"content",get:function(){return this._content},set:function(t){if(this._content!==t){var e=t&&t.parent&&t.parent._uiProps.uiTransformComp;!t||t&&e?(this._content=t,this._calculateBoundary()):g(4302)}}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar!==t&&(this._horizontalScrollBar=t,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(nt.ZERO)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar!==t&&(this._verticalScrollBar=t,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(nt.ZERO)))}},{key:"view",get:function(){var t=this._content&&this._content.parent;return t?t._uiProps.uiTransformComp:null}}]),e}(fs),ds.EventType=ys,os=n((is=gs).prototype,"bounceDuration",[V,Lr,wr,Dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ns=n(is.prototype,"brake",[V,Ir,Pr,Rr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),rs=n(is.prototype,"elastic",[V,xr,zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ss=n(is.prototype,"inertia",[V,Nr,Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n(is.prototype,"content",[Br,Mr,kr],Object.getOwnPropertyDescriptor(is.prototype,"content"),is.prototype),as=n(is.prototype,"horizontal",[V,Vr,Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n(is.prototype,"horizontalScrollBar",[Ur,Gr,jr],Object.getOwnPropertyDescriptor(is.prototype,"horizontalScrollBar"),is.prototype),hs=n(is.prototype,"vertical",[V,Wr,Zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n(is.prototype,"verticalScrollBar",[Xr,Yr,Kr],Object.getOwnPropertyDescriptor(is.prototype,"verticalScrollBar"),is.prototype),ls=n(is.prototype,"cancelInnerEvents",[V,qr,Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),cs=n(is.prototype,"scrollEvents",[Jr,V,$r,ts],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),us=n(is.prototype,"_content",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_s=n(is.prototype,"_horizontalScrollBar",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ps=n(is.prototype,"_verticalScrollBar",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),es=is))||es)||es)||es)||es)||es));r.ScrollView=Xs;var Ys,Ks=new et;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(Ys||(Ys={})),e(Ys);var qs,Qs,Js,$s,ta,ea,ia,oa,na,ra,sa,aa,ha,la,ca,ua,_a,pa,da,ga,fa=function(e){return t({Slider:e,SliderComponent:e}),e}((As=E("cc.Slider"),Ls=P(),ws=R(110),Ds=x(),Is=z(Lt),Ps=O(Ct),Rs=H(),xs=O(Ys),zs=H(),Ns=G(),Hs=H(),Bs=O([L]),Ms=H(),As(ks=Ls(ks=ws(ks=Ds(ks=Is((Zs=Ws=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"slideEvents",Fs,a(e)),s(e,"_handle",Us,a(e)),s(e,"_direction",Gs,a(e)),s(e,"_progress",js,a(e)),e._offset=new et,e._dragging=!1,e._touchHandle=!1,e._handleLocalPos=new et,e._touchPos=new et,e}i(e,t);var n=e.prototype;return n.__preload=function(){this._updateHandlePosition()},n.onEnable=function(){this._updateHandlePosition(),this.node.on(D.TOUCH_START,this._onTouchBegan,this),this.node.on(D.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(D.TOUCH_END,this._onTouchEnded,this),this.node.on(D.TOUCH_CANCEL,this._onTouchCancelled,this),this.node.on(wt.XRUI_HOVER_STAY,this._xrHoverStay,this),this.node.on(wt.XRUI_CLICK,this._xrClick,this),this.node.on(wt.XRUI_UNCLICK,this._xrUnClick,this),this._handle&&this._handle.isValid&&(this._handle.node.on(D.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(D.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(D.TOUCH_END,this._onTouchEnded,this))},n.onDisable=function(){this.node.off(D.TOUCH_START,this._onTouchBegan,this),this.node.off(D.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(D.TOUCH_END,this._onTouchEnded,this),this.node.off(D.TOUCH_CANCEL,this._onTouchCancelled,this),this.node.off(wt.XRUI_HOVER_STAY,this._xrHoverStay,this),this.node.off(wt.XRUI_CLICK,this._xrClick,this),this.node.off(wt.XRUI_UNCLICK,this._xrUnClick,this),this._handle&&this._handle.isValid&&(this._handle.node.off(D.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(D.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(D.TOUCH_END,this._onTouchEnded,this))},n._onHandleDragStart=function(t){if(t&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var e=t.touch.getUILocation();et.set(this._touchPos,e.x,e.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),t.propagationStopped=!0}},n._onTouchBegan=function(t){this._handle&&t&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(t.touch),t.propagationStopped=!0)},n._onTouchMoved=function(t){this._dragging&&t&&(this._handleSliderLogic(t.touch),t.propagationStopped=!0)},n._onTouchEnded=function(t){this._dragging=!1,this._touchHandle=!1,this._offset=new et,t&&(t.propagationStopped=!0)},n._onTouchCancelled=function(t){this._dragging=!1,t&&(t.propagationStopped=!0)},n._handleSliderLogic=function(t){this._updateProgress(t),this._emitSlideEvent()},n._emitSlideEvent=function(){L.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},n._updateProgress=function(t){if(this._handle&&t){var e=t.getUILocation();et.set(this._touchPos,e.x,e.y,0);var i=this.node._uiProps.uiTransformComp,o=i.convertToNodeSpaceAR(this._touchPos,Ks);this.direction===Ys.Horizontal?this.progress=rt(.5+(o.x-this._offset.x)/i.width):this.progress=rt(.5+(o.y-this._offset.y)/i.height)}},n._updateHandlePosition=function(){if(this._handle){this._handleLocalPos.set(this._handle.node.getPosition());var t=this.node._uiProps.uiTransformComp;this._direction===Ys.Horizontal?this._handleLocalPos.x=-t.width*t.anchorX+this.progress*t.width:this._handleLocalPos.y=-t.height*t.anchorY+this.progress*t.height,this._handle.node.setPosition(this._handleLocalPos)}},n._changeLayout=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(t.setContentSize(e.height,e.width),this._handle){var i=this._handle.node.position;this._direction===Ys.Horizontal?this._handle.node.setPosition(i.x,0,i.z):this._handle.node.setPosition(0,i.y,i.z),this._updateHandlePosition()}},n._xrHandleProgress=function(t){if(!this._touchHandle){var e=this.node._uiProps.uiTransformComp;e.convertToNodeSpaceAR(t,Ks),this.direction===Ys.Horizontal?this.progress=rt(.5+(Ks.x-this.node.position.x)/e.width):this.progress=rt(.5+(Ks.y-this.node.position.y)/e.height)}},n._xrClick=function(t){this._handle&&(this._dragging=!0,this._xrHandleProgress(t.hitPoint),this._emitSlideEvent())},n._xrUnClick=function(){this._dragging=!1,this._touchHandle=!1},n._xrHoverStay=function(t){this._dragging&&(this._xrHandleProgress(t.hitPoint),this._emitSlideEvent())},o(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateHandlePosition())}}]),e}(k),Ws.Direction=Ys,n((Vs=Zs).prototype,"handle",[Ps,Rs],Object.getOwnPropertyDescriptor(Vs.prototype,"handle"),Vs.prototype),n(Vs.prototype,"direction",[xs,zs],Object.getOwnPropertyDescriptor(Vs.prototype,"direction"),Vs.prototype),n(Vs.prototype,"progress",[U,Ns,Hs],Object.getOwnPropertyDescriptor(Vs.prototype,"progress"),Vs.prototype),Fs=n(Vs.prototype,"slideEvents",[Bs,V,Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Us=n(Vs.prototype,"_handle",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gs=n(Vs.prototype,"_direction",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ys.Horizontal}}),js=n(Vs.prototype,"_progress",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),ks=Vs))||ks)||ks)||ks)||ks)||ks));function ya(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))}r.Slider=fa,function(t){t.TOGGLE="toggle"}(ga||(ga={}));var ba,Ta,ma,va,Ca,Sa,Ea,Oa,Aa,La,wa,Da,Ia=function(e){return t({Toggle:e,ToggleComponent:e}),e}((qs=E("cc.Toggle"),Qs=P(),Js=R(110),$s=x(),ta=z(Lt),ea=N(),ia=H(),oa=O(Ct),na=N(),ra=H(),sa=O([L]),aa=H(),qs(ha=Qs(ha=Js(ha=$s(ha=ta((da=pa=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"checkEvents",ca,a(e)),s(e,"_isChecked",ua,a(e)),s(e,"_checkMark",_a,a(e)),e}i(e,t);var n=e.prototype;return n._internalToggle=function(){this.isChecked=!this.isChecked},n._set=function(t,e){if(void 0===e&&(e=!0),this._isChecked!=t){this._isChecked=t;var i=this._toggleContainer;i&&i.enabled&&this.enabled&&(t||!i.anyTogglesChecked()&&!i.allowSwitchOff)&&(this._isChecked=!0,i.notifyToggleCheck(this,e)),this.playEffect(),e&&this._emitToggleEvents()}},n.playEffect=function(){this._checkMark&&(this._checkMark.node.active=this._isChecked)},n.setIsCheckedWithoutNotify=function(t){this._set(t,!1)},n.onEnable=function(){t.prototype.onEnable.call(this),this.playEffect(),this.node.on(e.EventType.CLICK,this._internalToggle,this)},n.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(e.EventType.CLICK,this._internalToggle,this)},n.OnDestroy=function(){var t=this._toggleContainer;t&&t.ensureValidState()},n._emitToggleEvents=function(){this.node.emit(e.EventType.TOGGLE,this),this.checkEvents&&L.emitEvents(this.checkEvents,this)},o(e,[{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._set(t)}},{key:"checkMark",get:function(){return this._checkMark},set:function(t){this._checkMark!==t&&(this._checkMark=t)}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){var t=this.node.parent;return r.Node.isNode(t)?t.getComponent("cc.ToggleContainer"):null}}]),e}(Ue),pa.EventType=ya(ga,ke),n((la=da).prototype,"isChecked",[ea,ia],Object.getOwnPropertyDescriptor(la.prototype,"isChecked"),la.prototype),n(la.prototype,"checkMark",[oa,na,ra],Object.getOwnPropertyDescriptor(la.prototype,"checkMark"),la.prototype),ca=n(la.prototype,"checkEvents",[sa,V,aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ua=n(la.prototype,"_isChecked",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_a=n(la.prototype,"_checkMark",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ha=la))||ha)||ha)||ha)||ha)||ha));r.Toggle=Ia;var Pa,Ra,xa,za,Na,Ha,Ba,Ma,ka,Va,Fa,Ua,Ga,ja,Wa,Za,Xa,Ya,Ka,qa,Qa,Ja,$a,th,eh,ih,oh,nh,rh,sh,ah,hh,lh,ch,uh,_h,ph,dh,gh,fh,yh,bh,Th,mh,vh,Ch=function(e){return t({ToggleContainer:e,ToggleContainerComponent:e}),e}((ba=E("cc.ToggleContainer"),Ta=P(),ma=R(110),va=x(),Ca=H(),Sa=O([L]),Ea=H(),ba(Oa=Ta(Oa=ma(Oa=va(Oa=w((Da=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"_allowSwitchOff",La,a(e)),s(e,"checkEvents",wa,a(e)),e}i(e,t);var n=e.prototype;return n.onEnable=function(){this.ensureValidState(),this.node.on(D.CHILD_ADDED,this.ensureValidState,this),this.node.on(D.CHILD_REMOVED,this.ensureValidState,this)},n.onDisable=function(){this.node.off(D.CHILD_ADDED,this.ensureValidState,this),this.node.off(D.CHILD_REMOVED,this.ensureValidState,this)},n.activeToggles=function(){return this.toggleItems.filter((function(t){return t.isChecked}))},n.anyTogglesChecked=function(){return!!this.toggleItems.find((function(t){return t.isChecked}))},n.notifyToggleCheck=function(t,e){if(void 0===e&&(e=!0),this.enabledInHierarchy){for(var i=0;i<this.toggleItems.length;i++){var o=this.toggleItems[i];o!==t&&(e?o.isChecked=!1:o.setIsCheckedWithoutNotify(!1))}this.checkEvents&&r.Component.EventHandler.emitEvents(this.checkEvents,t)}},n.ensureValidState=function(){var t=this.toggleItems;if(!this._allowSwitchOff&&!this.anyTogglesChecked()&&0!==t.length){var e=t[0];e.isChecked=!0,this.notifyToggleCheck(e)}var i=this.activeToggles();if(i.length>1)for(var o=i[0],n=0;n<i.length;++n){var r=i[n];r!==o&&(r.isChecked=!1)}},o(e,[{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(t){this._allowSwitchOff=t}},{key:"toggleItems",get:function(){return this.node.children.map((function(t){var e=t.getComponent("cc.Toggle");return e&&e.enabled?e:null})).filter(Boolean)}}]),e}(k),La=n((Aa=Da).prototype,"_allowSwitchOff",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n(Aa.prototype,"allowSwitchOff",[Ca],Object.getOwnPropertyDescriptor(Aa.prototype,"allowSwitchOff"),Aa.prototype),wa=n(Aa.prototype,"checkEvents",[Sa,V,Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oa=Aa))||Oa)||Oa)||Oa)||Oa)||Oa));r.ToggleContainer=Ch;var Sh,Eh,Oh=new nt;function Ah(t){return t instanceof X?ut:t._uiProps.uiTransformComp?t._uiProps.uiTransformComp.contentSize:ot.ZERO}function Lh(t,e,i,o){t.parent?Oh.set(t.parent.getScale().x,t.parent.getScale().y):Oh.set(0,0);for(var n=Oh.x,r=Oh.y,s=0,a=0,h=t.parent;;){if(!h)return i.x=i.y=0,void(o.x=o.y=1);var l=h.getPosition();if(s+=l.x,a+=l.y,(h=h.parent)===e)break;h?Oh.set(h.getScale().x,h.getScale().y):Oh.set(0,0);var c=Oh.x,u=Oh.y;s*=c,a*=u,n*=c,r*=u}o.x=0!==n?1/n:1,o.y=0!==r?1/r:1,i.x=-s,i.y=-a}!function(t){t[t.ONCE=0]="ONCE",t[t.ALWAYS=1]="ALWAYS",t[t.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(Sh||(Sh={})),e(Sh),function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(Eh||(Eh={}));var wh,Dh,Ih,Ph,Rh,xh,zh,Nh,Hh,Bh,Mh,kh,Vh,Fh,Uh,Gh,jh,Wh,Zh,Xh=Eh.TOP|Eh.BOT,Yh=Eh.LEFT|Eh.RIGHT,Kh=function(e){return t({Widget:e,WidgetComponent:e}),e}((Pa=E("cc.Widget"),Ra=P(),xa=R(110),za=x(),Na=z(Lt),Ha=O(A),Ba=H(),Ma=H(),ka=H(),Va=H(),Fa=H(),Ua=H(),Ga=H(),ja=F(),Wa=F(),Za=H(),Xa=H(),Ya=H(),Ka=H(),qa=H(),Qa=H(),Ja=O(Sh),$a=H(),Pa(th=Ra(th=xa(th=za(th=Na(th=w((vh=mh=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._lastPos=new et,e._lastSize=new ot,e._dirty=!0,e._hadAlignOnce=!1,s(e,"_alignFlags",ih,a(e)),s(e,"_target",oh,a(e)),s(e,"_left",nh,a(e)),s(e,"_right",rh,a(e)),s(e,"_top",sh,a(e)),s(e,"_bottom",ah,a(e)),s(e,"_horizontalCenter",hh,a(e)),s(e,"_verticalCenter",lh,a(e)),s(e,"_isAbsLeft",ch,a(e)),s(e,"_isAbsRight",uh,a(e)),s(e,"_isAbsTop",_h,a(e)),s(e,"_isAbsBottom",ph,a(e)),s(e,"_isAbsHorizontalCenter",dh,a(e)),s(e,"_isAbsVerticalCenter",gh,a(e)),s(e,"_originalWidth",fh,a(e)),s(e,"_originalHeight",yh,a(e)),s(e,"_alignMode",bh,a(e)),s(e,"_lockFlags",Th,a(e)),e}i(e,t);var n=e.prototype;return n.updateAlignment=function(){r._widgetManager.updateAlignment(this.node)},n._validateTargetInDEV=function(){},n.setDirty=function(){this._recursiveDirty()},n.onEnable=function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),r._widgetManager.add(this),this._hadAlignOnce=!1,this._registerEvent(),this._registerTargetEvents()},n.onDisable=function(){r._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()},n.onDestroy=function(){this._removeParentEvent()},n._adjustWidgetToAllowMovingInEditor=function(){},n._adjustWidgetToAllowResizingInEditor=function(){},n._adjustWidgetToAnchorChanged=function(){this.setDirty()},n._adjustTargetToParentChanged=function(t){t&&this._unregisterOldParentEvents(t),this.node.getParent()&&this._registerTargetEvents(),this._setDirtyByMode()},n._registerEvent=function(){this.node.on(D.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.on(D.SIZE_CHANGED,this._setDirtyByMode,this),this.node.on(D.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(D.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},n._unregisterEvent=function(){this.node.off(D.TRANSFORM_CHANGED,this._setDirtyByMode,this),this.node.off(D.SIZE_CHANGED,this._setDirtyByMode,this),this.node.off(D.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)},n._removeParentEvent=function(){this.node.off(D.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},n._autoChangedValue=function(t,e){if((this._alignFlags&t)>0){var i=this.node.parent&&this.node.parent._uiProps,o=i&&i.uiTransformComp,n=o?o.contentSize:ut;this.isAlignLeft&&t===Eh.LEFT?this._left=e?this._left*n.width:this._left/n.width:this.isAlignRight&&t===Eh.RIGHT?this._right=e?this._right*n.width:this._right/n.width:this.isAlignHorizontalCenter&&t===Eh.CENTER?this._horizontalCenter=e?this._horizontalCenter*n.width:this._horizontalCenter/n.width:this.isAlignTop&&t===Eh.TOP?this._top=e?this._top*n.height:this._top/n.height:this.isAlignBottom&&t===Eh.BOT?this._bottom=e?this._bottom*n.height:this._bottom/n.height:this.isAbsoluteVerticalCenter&&t===Eh.MID&&(this._verticalCenter=this._verticalCenter/n.height),this._recursiveDirty()}},n._registerTargetEvents=function(){var t=this._target||this.node.parent;t&&t.getComponent(Lt)&&(t.on(D.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.on(D.SIZE_CHANGED,this._setDirtyByMode,this),t.on(D.ANCHOR_CHANGED,this._setDirtyByMode,this))},n._unregisterTargetEvents=function(){var t=this._target||this.node.parent;t&&(t.off(D.TRANSFORM_CHANGED,this._setDirtyByMode,this),t.off(D.SIZE_CHANGED,this._setDirtyByMode,this),t.off(D.ANCHOR_CHANGED,this._setDirtyByMode,this))},n._unregisterOldParentEvents=function(t){var e=this._target||t;e&&(e.off(D.TRANSFORM_CHANGED,this._setDirtyByMode,this),e.off(D.SIZE_CHANGED,this._setDirtyByMode,this))},n._setDirtyByMode=function(){(this.alignMode===Sh.ALWAYS||f)&&this._recursiveDirty()},n._setAlign=function(t,e){if(e!==(this._alignFlags&t)>0){var i=(t&Yh)>0,o=this.node._uiProps.uiTransformComp;e?(this._alignFlags|=t,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=o.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=o.height))):(i?this.isStretchWidth&&(o.width=this._originalWidth):this.isStretchHeight&&(o.height=this._originalHeight),this._alignFlags&=~t)}},n._recursiveDirty=function(){this._dirty||(this._dirty=!0)},o(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._unregisterTargetEvents(),this._target=t,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&Eh.TOP)>0},set:function(t){this._setAlign(Eh.TOP,t),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&Eh.BOT)>0},set:function(t){this._setAlign(Eh.BOT,t),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&Eh.LEFT)>0},set:function(t){this._setAlign(Eh.LEFT,t),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&Eh.RIGHT)>0},set:function(t){this._setAlign(Eh.RIGHT,t),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&Eh.MID)>0},set:function(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=Eh.MID):this._alignFlags&=~Eh.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&Eh.CENTER)>0},set:function(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=Eh.CENTER):this._alignFlags&=~Eh.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&Yh)===Yh}},{key:"isStretchHeight",get:function(){return(this._alignFlags&Xh)===Xh}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(t){this._top=this._isAbsTop?t:t/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(t){this._bottom=this._isAbsBottom?t:t/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(t){this._left=this._isAbsLeft?t:t/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(t){this._right=this._isAbsRight?t:t/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter=t,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(t){this._horizontalCenter=this._isAbsHorizontalCenter?t:t/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(t){this._verticalCenter=t,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(t){this._verticalCenter=this._isAbsVerticalCenter?t:t/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(t){this._isAbsTop!==t&&(this._isAbsTop=t,this._autoChangedValue(Eh.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(t){this._isAbsBottom!==t&&(this._isAbsBottom=t,this._autoChangedValue(Eh.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(t){this._isAbsLeft!==t&&(this._isAbsLeft=t,this._autoChangedValue(Eh.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(t){this._isAbsRight!==t&&(this._isAbsRight=t,this._autoChangedValue(Eh.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(t){this._isAbsHorizontalCenter!==t&&(this._isAbsHorizontalCenter=t,this._autoChangedValue(Eh.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(t){this._isAbsVerticalCenter!==t&&(this._isAbsVerticalCenter=t,this._autoChangedValue(Eh.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(t){this._alignMode=t,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(t){this._alignFlags!==t&&(this._alignFlags=t,this._recursiveDirty())}}]),e}(k),mh.AlignMode=Sh,n((eh=vh).prototype,"target",[Ha,Ba],Object.getOwnPropertyDescriptor(eh.prototype,"target"),eh.prototype),n(eh.prototype,"isAlignTop",[Ma],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignTop"),eh.prototype),n(eh.prototype,"isAlignBottom",[ka],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignBottom"),eh.prototype),n(eh.prototype,"isAlignLeft",[Va],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignLeft"),eh.prototype),n(eh.prototype,"isAlignRight",[Fa],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignRight"),eh.prototype),n(eh.prototype,"isAlignVerticalCenter",[Ua],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignVerticalCenter"),eh.prototype),n(eh.prototype,"isAlignHorizontalCenter",[Ga],Object.getOwnPropertyDescriptor(eh.prototype,"isAlignHorizontalCenter"),eh.prototype),n(eh.prototype,"isStretchWidth",[ja],Object.getOwnPropertyDescriptor(eh.prototype,"isStretchWidth"),eh.prototype),n(eh.prototype,"isStretchHeight",[Wa],Object.getOwnPropertyDescriptor(eh.prototype,"isStretchHeight"),eh.prototype),n(eh.prototype,"top",[Za],Object.getOwnPropertyDescriptor(eh.prototype,"top"),eh.prototype),n(eh.prototype,"editorTop",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorTop"),eh.prototype),n(eh.prototype,"bottom",[Xa],Object.getOwnPropertyDescriptor(eh.prototype,"bottom"),eh.prototype),n(eh.prototype,"editorBottom",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorBottom"),eh.prototype),n(eh.prototype,"left",[Ya],Object.getOwnPropertyDescriptor(eh.prototype,"left"),eh.prototype),n(eh.prototype,"editorLeft",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorLeft"),eh.prototype),n(eh.prototype,"right",[Ka],Object.getOwnPropertyDescriptor(eh.prototype,"right"),eh.prototype),n(eh.prototype,"editorRight",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorRight"),eh.prototype),n(eh.prototype,"horizontalCenter",[qa],Object.getOwnPropertyDescriptor(eh.prototype,"horizontalCenter"),eh.prototype),n(eh.prototype,"editorHorizontalCenter",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorHorizontalCenter"),eh.prototype),n(eh.prototype,"verticalCenter",[Qa],Object.getOwnPropertyDescriptor(eh.prototype,"verticalCenter"),eh.prototype),n(eh.prototype,"editorVerticalCenter",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"editorVerticalCenter"),eh.prototype),n(eh.prototype,"isAbsoluteTop",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteTop"),eh.prototype),n(eh.prototype,"isAbsoluteBottom",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteBottom"),eh.prototype),n(eh.prototype,"isAbsoluteLeft",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteLeft"),eh.prototype),n(eh.prototype,"isAbsoluteRight",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteRight"),eh.prototype),n(eh.prototype,"isAbsoluteHorizontalCenter",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteHorizontalCenter"),eh.prototype),n(eh.prototype,"isAbsoluteVerticalCenter",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"isAbsoluteVerticalCenter"),eh.prototype),n(eh.prototype,"alignMode",[Ja,$a],Object.getOwnPropertyDescriptor(eh.prototype,"alignMode"),eh.prototype),n(eh.prototype,"alignFlags",[Z],Object.getOwnPropertyDescriptor(eh.prototype,"alignFlags"),eh.prototype),ih=n(eh.prototype,"_alignFlags",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oh=n(eh.prototype,"_target",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nh=n(eh.prototype,"_left",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rh=n(eh.prototype,"_right",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sh=n(eh.prototype,"_top",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ah=n(eh.prototype,"_bottom",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),hh=n(eh.prototype,"_horizontalCenter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lh=n(eh.prototype,"_verticalCenter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ch=n(eh.prototype,"_isAbsLeft",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),uh=n(eh.prototype,"_isAbsRight",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_h=n(eh.prototype,"_isAbsTop",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ph=n(eh.prototype,"_isAbsBottom",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),dh=n(eh.prototype,"_isAbsHorizontalCenter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gh=n(eh.prototype,"_isAbsVerticalCenter",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),fh=n(eh.prototype,"_originalWidth",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yh=n(eh.prototype,"_originalHeight",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),bh=n(eh.prototype,"_alignMode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Sh.ON_WINDOW_RESIZE}}),Th=n(eh.prototype,"_lockFlags",[V,Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),th=eh))||th)||th)||th)||th)||th)||th));r.internal.computeInverseTransForTarget=Lh,r.internal.getReadonlyNodeSize=Ah,r.Widget=Kh;var qh,Qh=new $;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(qh||(qh={})),e(qh);var Jh,$h,tl,el,il,ol,nl,rl,sl,al,hl,ll,cl,ul,_l,pl,dl,gl,fl,yl,bl,Tl,ml,vl,Cl,Sl,El,Ol,Al,Ll,wl,Dl,Il,Pl,Rl,xl,zl,Nl,Hl,Bl,Ml,kl,Vl,Fl=function(e){return t({PageViewIndicator:e,PageViewIndicatorComponent:e}),e}((wh=E("cc.PageViewIndicator"),Dh=P(),Ih=R(110),Ph=x(),Rh=O(vt),xh=H(),zh=O(qh),Nh=H(),Hh=O(ot),Bh=H(),Mh=H(),wh(kh=Dh(kh=Ih(kh=Ph((Zh=Wh=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"spacing",Fh,a(e)),s(e,"_spriteFrame",Uh,a(e)),s(e,"_direction",Gh,a(e)),s(e,"_cellSize",jh,a(e)),e._layout=null,e._pageView=null,e._indicators=[],e}i(e,t);var n=e.prototype;return n.onLoad=function(){this._updateLayout()},n.setPageView=function(t){this._pageView=t,this._refresh()},n._updateLayout=function(){this._layout=this.getComponent(Fn),this._layout||(this._layout=this.addComponent(Fn));var t=this._layout;this.direction===qh.HORIZONTAL?(t.type=Fn.Type.HORIZONTAL,t.spacingX=this.spacing):this.direction===qh.VERTICAL&&(t.type=Fn.Type.VERTICAL,t.spacingY=this.spacing),t.resizeMode=Fn.ResizeMode.CONTAINER},n._createIndicator=function(){var t=new A;t.layer=this.node.layer;var e=t.addComponent(Ct);return e.spriteFrame=this.spriteFrame,e.sizeMode=Ct.SizeMode.CUSTOM,t.parent=this.node,t._uiProps.uiTransformComp.setContentSize(this._cellSize),t},n._changedState=function(){var t=this._indicators;if(0!==t.length&&this._pageView){var e=this._pageView.curPageIdx;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var o=t[i];if(o._uiProps.uiComp){var n=o._uiProps.uiComp;Qh.set(n.color),Qh.a=127.5,n.color=Qh}}if(t[e]._uiProps.uiComp){var r=t[e]._uiProps.uiComp;Qh.set(r.color),Qh.a=255,r.color=Qh}}}},n._refresh=function(){if(this._pageView){var t=this._indicators,e=this._pageView.getPages();if(e.length!==t.length){var i=0;if(e.length>t.length)for(i=0;i<e.length;++i)t[i]||(t[i]=this._createIndicator());else for(i=t.length-e.length;i>0;--i){var o=t[i-1];this.node.removeChild(o),t.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}},o(e,[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame!==t&&(this._spriteFrame=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t)}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize=t)}}]),e}(k),Wh.Direction=qh,n((Vh=Zh).prototype,"spriteFrame",[Rh,xh],Object.getOwnPropertyDescriptor(Vh.prototype,"spriteFrame"),Vh.prototype),n(Vh.prototype,"direction",[zh,Nh],Object.getOwnPropertyDescriptor(Vh.prototype,"direction"),Vh.prototype),n(Vh.prototype,"cellSize",[Hh,Bh],Object.getOwnPropertyDescriptor(Vh.prototype,"cellSize"),Vh.prototype),Fh=n(Vh.prototype,"spacing",[V,Mh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uh=n(Vh.prototype,"_spriteFrame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gh=n(Vh.prototype,"_direction",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qh.HORIZONTAL}}),jh=n(Vh.prototype,"_cellSize",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ot(20,20)}}),kh=Vh))||kh)||kh)||kh)||kh));r.PageViewIndicator=Fl;var Ul,Gl,jl,Wl=new nt;!function(t){t[t.Unified=0]="Unified",t[t.Free=1]="Free"}(Ul||(Ul={})),e(Ul),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(Gl||(Gl={})),e(Gl),function(t){t.PAGE_TURNING="page-turning"}(jl||(jl={}));var Zl=function(e){return t({PageView:e,PageViewComponent:e}),e}((Jh=E("cc.PageView"),$h=P(),tl=R(110),el=x(),il=O(Ul),ol=H(),nl=O(Gl),rl=H(),sl=G(),al=H(),hl=G(),ll=H(),cl=O(Fl),ul=H(),_l=H(),pl=O(vr),dl=F(),gl=O(vr),fl=F(),yl=F(),bl=F(),Tl=F(),ml=O([L]),vl=F(),Cl=H(),Sl=O([L]),El=H(),Jh(Ol=$h(Ol=tl(Ol=el((Vl=kl=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"autoPageTurningThreshold",Ll,a(e)),s(e,"horizontal",wl,a(e)),s(e,"vertical",Dl,a(e)),s(e,"cancelInnerEvents",Il,a(e)),s(e,"scrollEvents",Pl,a(e)),s(e,"pageTurningSpeed",Rl,a(e)),s(e,"pageEvents",xl,a(e)),s(e,"_sizeMode",zl,a(e)),s(e,"_direction",Nl,a(e)),s(e,"_scrollThreshold",Hl,a(e)),s(e,"_pageTurningEventTiming",Bl,a(e)),s(e,"_indicator",Ml,a(e)),e._curPageIdx=0,e._lastPageIdx=0,e._pages=[],e._initContentPos=new et,e._scrollCenterOffsetX=[],e._scrollCenterOffsetY=[],e._touchBeganPosition=new nt,e._touchEndPosition=new nt,e}i(e,t);var n=e.prototype;return n.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(D.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.on(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},n.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(D.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.off(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},n.onLoad=function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},n.getCurrentPageIndex=function(){return this._curPageIdx},n.setCurrentPageIndex=function(t){this.scrollToPage(t,1)},n.getPages=function(){return this._pages},n.addPage=function(t){t&&-1===this._pages.indexOf(t)&&this.content&&(t._uiProps.uiTransformComp?(this.content.addChild(t),this._pages.push(t),this._updatePageView()):g(4301))},n.insertPage=function(t,e){if(!(e<0)&&t&&-1===this._pages.indexOf(t)&&this.content)if(e>=this._pages.length)this.addPage(t);else{if(!t._uiProps.uiTransformComp)return void g(4301);this._pages.splice(e,0,t),this.content.insertChild(t,e),this._updatePageView()}},n.removePage=function(t){if(t&&this.content){var e=this._pages.indexOf(t);-1!==e?this.removePageAtIndex(e):y(4300,t.name)}},n.removePageAtIndex=function(t){var e=this._pages;if(!(t<0||t>=e.length)){var i=e[t];i&&this.content&&(this.content.removeChild(i),e.splice(t,1),this._updatePageView())}},n.removeAllPages=function(){if(this.content){for(var t=this._pages,e=0,i=t.length;e<i;e++)this.content.removeChild(t[e]);this._pages.length=0,this._updatePageView()}},n.scrollToPage=function(t,e){void 0===e&&(e=.3),t<0||t>=this._pages.length||(this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0),this.indicator&&this.indicator._changedState())},n.getScrollEndedEventTiming=function(){return this.pageTurningEventTiming},n._updatePageView=function(){if(this.content){var t=this.content.getComponent(Fn);t&&t.enabled&&t.updateLayout();var e=this._pages.length;this._curPageIdx>=e&&(this._curPageIdx=0===e?0:e-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,o=0;o<e;++o){var n=this._pages[o].position;this.direction===Gl.Horizontal?this._scrollCenterOffsetX[o]=Math.abs(i.x+n.x):this._scrollCenterOffsetY[o]=Math.abs(i.y+n.y)}this.indicator&&this.indicator._refresh()}},n._updateAllPagesSize=function(){var t=this.view;if(this.content&&t&&this._sizeMode===Ul.Unified)for(var e=this._pages,i=t.contentSize,o=0,n=e.length;o<n;o++)e[o]._uiProps.uiTransformComp.setContentSize(i)},n._handleReleaseLogic=function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(e.EventType.SCROLL_ENDED))},n._onTouchBegan=function(e,i){e.touch.getUILocation(Wl),nt.set(this._touchBeganPosition,Wl.x,Wl.y),t.prototype._onTouchBegan.call(this,e,i)},n._onTouchMoved=function(e,i){t.prototype._onTouchMoved.call(this,e,i)},n._onTouchEnded=function(e,i){e.touch.getUILocation(Wl),nt.set(this._touchEndPosition,Wl.x,Wl.y),t.prototype._onTouchEnded.call(this,e,i)},n._onTouchCancelled=function(e,i){e.touch.getUILocation(Wl),nt.set(this._touchEndPosition,Wl.x,Wl.y),t.prototype._onTouchCancelled.call(this,e,i)},n._onMouseWheel=function(){},n._syncScrollDirection=function(){this.horizontal=this.direction===Gl.Horizontal,this.vertical=this.direction===Gl.Vertical},n._syncSizeMode=function(){var t=this.view;if(this.content&&t){var e=this.content.getComponent(Fn);if(e){if(this._sizeMode===Ul.Free&&this._pages.length>0){var i=this._pages[0]._uiProps.uiTransformComp,o=this._pages[this._pages.length-1]._uiProps.uiTransformComp;this.direction===Gl.Horizontal?(e.paddingLeft=(t.width-i.width)/2,e.paddingRight=(t.width-o.width)/2):this.direction===Gl.Vertical&&(e.paddingTop=(t.height-i.height)/2,e.paddingBottom=(t.height-o.height)/2)}e.updateLayout()}}},n._initPages=function(){if(this.content){this._initContentPos=this.content.position;for(var t=this.content.children,e=0;e<t.length;++e){var i=t[e];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},n._dispatchPageTurningEvent=function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,L.emitEvents(this.pageEvents,this,jl.PAGE_TURNING),this.node.emit(jl.PAGE_TURNING,this))},n._isQuicklyScrollable=function(t){if(this.direction===Gl.Horizontal){if(Math.abs(t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===Gl.Vertical&&Math.abs(t.y)>this.autoPageTurningThreshold)return!0;return!1},n._moveOffsetValue=function(t){var e=new nt;if(this._sizeMode===Ul.Free)this.direction===Gl.Horizontal?e.x=this._scrollCenterOffsetX[t]:this.direction===Gl.Vertical&&(e.y=this._scrollCenterOffsetY[t]);else{var i=this.view;if(!i)return e;this.direction===Gl.Horizontal?e.x=t*i.width:this.direction===Gl.Vertical&&(e.y=t*i.height)}return e},n._getDragDirection=function(t){return this._direction===Gl.Horizontal?0===t.x?0:t.x>0?1:-1:0===t.y?0:t.y<0?1:-1},n._isScrollable=function(t,e,i){if(this._sizeMode===Ul.Free){var o=0,n=0;if(this.direction===Gl.Horizontal)return o=this._scrollCenterOffsetX[e],n=this._scrollCenterOffsetX[i],Math.abs(t.x)>=Math.abs(o-n)*this.scrollThreshold;if(this.direction===Gl.Vertical)return o=this._scrollCenterOffsetY[e],n=this._scrollCenterOffsetY[i],Math.abs(t.y)>=Math.abs(o-n)*this.scrollThreshold}else{var r=this.view;if(!r)return!1;if(this.direction===Gl.Horizontal)return Math.abs(t.x)>=r.width*this.scrollThreshold;if(this.direction===Gl.Vertical)return Math.abs(t.y)>=r.height*this.scrollThreshold}return!1},n._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();this._clampDelta(t),(t.x>0||t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(t.x<0||t.y>0)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var e=new nt;nt.subtract(e,this._touchBeganPosition,this._touchEndPosition);var i=this._curPageIdx,o=i+this._getDragDirection(e),n=this.pageTurningSpeed*Math.abs(i-o);if(o<this._pages.length){if(this._isScrollable(e,i,o))return void this.scrollToPage(o,n);var r=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(r))return void this.scrollToPage(o,n)}this.scrollToPage(i,n)}},o(e,[{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(t){this._scrollThreshold!==t&&(this._scrollThreshold=t)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(t){this._pageTurningEventTiming!==t&&(this._pageTurningEventTiming=t)}},{key:"indicator",get:function(){return this._indicator},set:function(t){this._indicator!==t&&(this._indicator=t,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return t.prototype.verticalScrollBar},set:function(t){this.verticalScrollBar=t}},{key:"horizontalScrollBar",get:function(){return t.prototype.horizontalScrollBar},set:function(t){this.horizontalScrollBar=t}}]),e}(Xs),kl.SizeMode=Ul,kl.Direction=Gl,kl.EventType=ya(jl,ys),n((Al=Vl).prototype,"sizeMode",[il,ol],Object.getOwnPropertyDescriptor(Al.prototype,"sizeMode"),Al.prototype),n(Al.prototype,"direction",[nl,rl],Object.getOwnPropertyDescriptor(Al.prototype,"direction"),Al.prototype),n(Al.prototype,"scrollThreshold",[U,sl,al],Object.getOwnPropertyDescriptor(Al.prototype,"scrollThreshold"),Al.prototype),n(Al.prototype,"pageTurningEventTiming",[U,hl,ll],Object.getOwnPropertyDescriptor(Al.prototype,"pageTurningEventTiming"),Al.prototype),n(Al.prototype,"indicator",[cl,ul],Object.getOwnPropertyDescriptor(Al.prototype,"indicator"),Al.prototype),Ll=n(Al.prototype,"autoPageTurningThreshold",[V,_l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),n(Al.prototype,"verticalScrollBar",[pl,K,dl],Object.getOwnPropertyDescriptor(Al.prototype,"verticalScrollBar"),Al.prototype),n(Al.prototype,"horizontalScrollBar",[gl,K,fl],Object.getOwnPropertyDescriptor(Al.prototype,"horizontalScrollBar"),Al.prototype),wl=n(Al.prototype,"horizontal",[K,V,yl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dl=n(Al.prototype,"vertical",[K,V,bl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Il=n(Al.prototype,"cancelInnerEvents",[K,V,Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pl=n(Al.prototype,"scrollEvents",[ml,V,K,vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rl=n(Al.prototype,"pageTurningSpeed",[V,Z,Cl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),xl=n(Al.prototype,"pageEvents",[Sl,V,El],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zl=n(Al.prototype,"_sizeMode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ul.Unified}}),Nl=n(Al.prototype,"_direction",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Gl.Horizontal}}),Hl=n(Al.prototype,"_scrollThreshold",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Bl=n(Al.prototype,"_pageTurningEventTiming",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Ml=n(Al.prototype,"_indicator",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ol=Al))||Ol)||Ol)||Ol)||Ol));r.PageView=Zl;var Xl=new et,Yl=new nt,Kl=new nt,ql=new nt(1,1),Ql=new nt,Jl=new nt;function $l(t,e){if(!e._hadAlignOnce){e.alignMode===Sh.ONCE&&(e._hadAlignOnce=!0);var i,o=e.target,n=Kl,r=ql;o?Lh(t,i=o,n,r):i=t.parent;var s=Ah(i),a=i instanceof X||!i.getComponent(Lt),h=a?Yl:i.getComponent(Lt).anchorPoint,l=a;t.getPosition(Xl);var c=t._uiProps.uiTransformComp,u=Xl.x,_=Xl.y,p=c.anchorPoint,d=t.getScale();if(e.alignFlags&Eh.HORIZONTAL){var g=0,f=0,y=s.width;l?(g=ut.left.x,f=ut.right.x):f=(g=-h.x*y)+y,g+=e.isAbsoluteLeft?e.left:e.left*y,f-=e.isAbsoluteRight?e.right:e.right*y,o&&(g+=n.x,g*=r.x,f+=n.x,f*=r.x);var b=0,T=p.x,m=d.x;if(m<0&&(T=1-T,m=-m),e.isStretchWidth)b=f-g,0!==m&&(c.width=b/m),u=g+T*b;else if(b=c.width*m,e.isAlignHorizontalCenter){var v=e.isAbsoluteHorizontalCenter?e.horizontalCenter:e.horizontalCenter*y,C=(.5-h.x)*s.width;o&&(v*=r.x,C+=n.x,C*=r.x),u=C+(T-.5)*b+v}else u=e.isAlignLeft?g+T*b:f+(T-1)*b;e._lastSize.width=b}if(e.alignFlags&Eh.VERTICAL){var S=0,E=0,O=s.height;l?(E=ut.bottom.y,S=ut.top.y):S=(E=-h.y*O)+O,E+=e.isAbsoluteBottom?e.bottom:e.bottom*O,S-=e.isAbsoluteTop?e.top:e.top*O,o&&(E+=n.y,E*=r.y,S+=n.y,S*=r.y);var A=0,L=p.y,w=d.y;if(w<0&&(L=1-L,w=-w),e.isStretchHeight)A=S-E,0!==w&&(c.height=A/w),_=E+L*A;else if(A=c.height*w,e.isAlignVerticalCenter){var D=e.isAbsoluteVerticalCenter?e.verticalCenter:e.verticalCenter*O,I=(.5-h.y)*s.height;o&&(D*=r.y,I+=n.y,I*=r.y),_=I+(L-.5)*A+D}else _=e.isAlignBottom?E+L*A:S+(L-1)*A;e._lastSize.height=A}t.setPosition(u,_,Xl.z),et.set(e._lastPos,u,_,Xl.z)}}function tc(t){var e=t.getComponent(Kh);if(e&&e.enabled){if(!r.isValid(t,!0))return;hc.push(e)}for(var i,o=t.children,n=d(o);!(i=n()).done;){var s=i.value;s.active&&tc(s)}}function ec(){var t=ct.getScene();if(t){lc.isAligning=!0,lc._nodesOrderDirty&&(hc.length=0,tc(t),lc._nodesOrderDirty=!1);var e=null,i=lc._activeWidgetsIterator;for(i.i=0;i.i<hc.length;++i.i)(e=hc[i.i])._dirty&&($l(e.node,e),e._dirty=!1);lc.isAligning=!1}}var ic,oc,nc,rc,sc,ac,hc=[],lc=t("widgetManager",r._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new b.MutableForwardIterator(hc),animationState:null,init:function(){ct.on(_t.EVENT_AFTER_SCENE_LAUNCH,ec),ct.on(_t.EVENT_AFTER_UPDATE,ec),pt.instance.on("design-resolution-changed",this.onResized,this);var t=this.onResized.bind(this);pt.instance.on("canvas-resize",t),ht.on("orientation-change",t)},add:function(){this._nodesOrderDirty=!0},remove:function(t){this._activeWidgetsIterator.remove(t)},onResized:function(){var t=ct.getScene();t&&this.refreshWidgetOnResized(t)},refreshWidgetOnResized:function(t){var e=A.isNode(t)&&t.getComponent(Kh);e&&e.enabled&&(e.alignMode===Sh.ON_WINDOW_RESIZE||e.alignMode===Sh.ALWAYS)&&e.setDirty();for(var i,o=t.children,n=d(o);!(i=n()).done;){var r=i.value;this.refreshWidgetOnResized(r)}},updateOffsetsToStayPut:function(t,e){function i(t,e){return Math.abs(t-e)>1e-10?e:t}var o=t.node,n=o.parent;if(n){var r=Ql;r.set(0,0);var s=Jl;if(s.set(1,1),t.target&&Lh(o,n=t.target,r,s),!e)return;var a=n._uiProps&&n._uiProps.uiTransformComp,h=a?a.anchorPoint:Yl,l=o._uiProps.uiTransformComp,c=Ah(n),u=l.anchorPoint,_=o.getPosition(),p=Eh,d=o.getScale(),g=0;if(e&p.LEFT){var f=-h.x*c.width;f+=r.x,f*=s.x,g=_.x-u.x*l.width*Math.abs(d.x)-f,t.isAbsoluteLeft||(g/=c.width),g/=s.x,t.left=i(t.left,g)}if(e&p.RIGHT){var y=(1-h.x)*c.width;y+=r.x,g=(y*=s.x)-(_.x+(1-u.x)*l.width*Math.abs(d.x)),t.isAbsoluteRight||(g/=c.width),g/=s.x,t.right=i(t.right,g)}if(e&p.TOP){var b=(1-h.y)*c.height;b+=r.y,g=(b*=s.y)-(_.y+(1-u.y)*l.height*Math.abs(d.y)),t.isAbsoluteTop||(g/=c.height),g/=s.y,t.top=i(t.top,g)}if(e&p.BOT){var T=-h.y*c.height;T+=r.y,T*=s.y,g=_.y-u.y*l.height*Math.abs(d.y)-T,t.isAbsoluteBottom||(g/=c.height),g/=s.y,t.bottom=i(t.bottom,g)}}},updateAlignment:function t(e){var i=e.parent;i&&A.isNode(i)&&t(i);var o=e.getComponent(Kh);o&&i&&$l(e,o)},AlignMode:Sh,AlignFlags:Eh});ct.on(_t.EVENT_INIT,(function(){lc.init()}));var cc,uc,_c,pc,dc,gc,fc,yc,bc,Tc,mc,vc,Cc,Sc,Ec,Oc,Ac,Lc,wc,Dc,Ic=function(e){return t({SafeArea:e,SafeAreaComponent:e}),e}((ic=E("cc.SafeArea"),oc=P(),nc=R(110),rc=x(),sc=z(Kh),ic(ac=oc(ac=nc(ac=w(ac=rc(ac=sc(ac=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var o=e.prototype;return o.onEnable=function(){this.updateArea(),ht.on("window-resize",this.updateArea,this),ht.on("orientation-change",this.updateArea,this)},o.onDisable=function(){ht.off("window-resize",this.updateArea,this),ht.off("orientation-change",this.updateArea,this)},o.updateArea=function(){var t=this.node.getComponent(Kh),e=this.node.getComponent(Lt);if(t&&e){t.updateAlignment();var i=this.node.position.clone(),o=e.anchorPoint.clone();t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var n=lt.getVisibleSize(),r=n.width,s=n.height,a=at.getSafeAreaRect();t.top=s-a.y-a.height,t.bottom=a.y,t.left=a.x,t.right=r-a.x-a.width,t.updateAlignment();var h=this.node.position.clone(),l=o.x-(h.x-i.x)/e.width,c=o.y-(h.y-i.y)/e.height;e.setAnchorPoint(l,c),lc.add(t)}},e}(k))||ac)||ac)||ac)||ac)||ac)||ac));r.SafeArea=Ic;var Pc,Rc=function(e){return t({UICoordinateTracker:e,UICoordinateTrackerComponent:e}),e}((cc=E("cc.UICoordinateTracker"),uc=P(),_c=x(),pc=R(110),dc=O(A),gc=H(),fc=O(q),yc=H(),bc=H(),Tc=H(),mc=O([L]),vc=H(),cc(Cc=uc(Cc=_c(Cc=pc((Dc=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,s(e,"syncEvents",Ec,a(e)),s(e,"_target",Oc,a(e)),s(e,"_camera",Ac,a(e)),s(e,"_useScale",Lc,a(e)),s(e,"_distance",wc,a(e)),e._transformPos=new et,e._viewPos=new et,e._canMove=!0,e._lastWPos=new et,e._lastCameraPos=new et,e}i(e,t);var n=e.prototype;return n.onEnable=function(){this._checkCanMove()},n.update=function(){var t=this.node.worldPosition,e=this._camera;if(this._canMove&&e&&e.camera&&(!this._lastWPos.equals(t)||!this._lastCameraPos.equals(e.node.worldPosition))&&(this._lastWPos.set(t),this._lastCameraPos.set(e.node.worldPosition),e.camera.update(),e.convertToUINode(t,this._target,this._transformPos),this._useScale&&et.transformMat4(this._viewPos,this.node.worldPosition,e.camera.matView),this.syncEvents.length>0)){var i=this._distance/Math.abs(this._viewPos.z);L.emitEvents(this.syncEvents,this._transformPos,i)}},n._checkCanMove=function(){this._canMove=!(!this._camera||!this._target)},o(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera!==t&&(this._camera=t,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(t){this._useScale!==t&&(this._useScale=t)}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t)}}]),e}(k),n((Sc=Dc).prototype,"target",[dc,gc],Object.getOwnPropertyDescriptor(Sc.prototype,"target"),Sc.prototype),n(Sc.prototype,"camera",[fc,yc],Object.getOwnPropertyDescriptor(Sc.prototype,"camera"),Sc.prototype),n(Sc.prototype,"useScale",[bc],Object.getOwnPropertyDescriptor(Sc.prototype,"useScale"),Sc.prototype),n(Sc.prototype,"distance",[Tc],Object.getOwnPropertyDescriptor(Sc.prototype,"distance"),Sc.prototype),Ec=n(Sc.prototype,"syncEvents",[mc,V,vc],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oc=n(Sc.prototype,"_target",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ac=n(Sc.prototype,"_camera",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lc=n(Sc.prototype,"_useScale",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wc=n(Sc.prototype,"_distance",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Cc=Sc))||Cc)||Cc)||Cc)||Cc)),xc=[D.TOUCH_START,D.TOUCH_END,D.TOUCH_MOVE,D.MOUSE_DOWN,D.MOUSE_MOVE,D.MOUSE_UP,D.MOUSE_ENTER,D.MOUSE_LEAVE,D.MOUSE_WHEEL];function zc(t){t.propagationStopped=!0}var Nc,Hc,Bc,Mc,kc,Vc,Fc,Uc,Gc,jc,Wc,Zc,Xc,Yc=function(e){return t({BlockInputEvents:e,BlockInputEventsComponent:e}),e}(E("cc.BlockInputEvents")(Pc=P()(Pc=x()(Pc=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var o=e.prototype;return o.onEnable=function(){for(var t=0;t<xc.length;t++)this.node.on(xc[t],zc,this)},o.onDisable=function(){for(var t=0;t<xc.length;t++)this.node.off(xc[t],zc,this)},e}(k))||Pc)||Pc)||Pc),Kc=t("SubContextView",(Nc=E("cc.SubContextView"),Hc=P(),Bc=R(110),Mc=z(Lt),kc=x(),Vc=H(),Fc=H(),Nc(Uc=Hc(Uc=Bc(Uc=Mc(Uc=kc((Zc=function(t){function e(){var e;return e=t.call(this)||this,s(e,"_fps",jc,a(e)),e._sprite=void 0,e._imageAsset=void 0,e._texture=void 0,e._updatedTime=0,e._updateInterval=0,e._openDataContext=void 0,e._content=void 0,s(e,"_designResolutionSize",Wc,a(e)),e._content=new A("content"),e._content.hideFlags|=S.Flags.DontSave|S.Flags.HideInHierarchy,e._sprite=null,e._imageAsset=new Q,e._openDataContext=null,e._updatedTime=performance.now(),e._texture=new J,e}i(e,t);var n=e.prototype;return n.onLoad=function(){C.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._openDataContext=C.getOpenDataContext(),this._initSharedCanvas(),this._initContentNode(),this._updateSubContextView(),this._updateContentLayer()):this.enabled=!1},n.onEnable=function(){this._registerNodeEvent()},n.onDisable=function(){this._unregisterNodeEvent()},n._initSharedCanvas=function(){if(this._openDataContext){var t=this._openDataContext.canvas,e=this._designResolutionSize.width,i=this._designResolutionSize.height,o=513;if(e<=o&&i<=o){var n=o/e,r=o/i,s=n<r?n:r;e*=s,i*=s}t.width=e,t.height=i}},n._initContentNode=function(){if(this._openDataContext){var t=this._openDataContext.canvas,e=this._imageAsset;if(e.reset(t),this._texture.image=e,this._texture.create(t.width,t.height),this._sprite=this._content.getComponent(Ct),this._sprite||(this._sprite=this._content.addComponent(Ct)),this._sprite.spriteFrame)this._sprite.spriteFrame.texture=this._texture;else{var i=new vt;i.texture=this._texture,this._sprite.spriteFrame=i}this._content.parent=this.node}},n._updateSubContextView=function(){if(this._openDataContext){var t=this.node.getComponent(Lt),e=this._content.getComponent(Lt),i=t.width/e.width,o=t.height/e.height,n=i>o?o:i;e.width*=n,e.height*=n;var r=lt.getViewportRect(),s=e.getBoundingBoxToWorld(),a=lt.getVisibleSize(),h=ht.devicePixelRatio,l=(r.width*(s.x/a.width)+r.x)/h,c=(r.height*(s.y/a.height)+r.y)/h,u=r.width*(s.width/a.width)/h,_=r.height*(s.height/a.height)/h;this._openDataContext.postMessage({fromEngine:!0,type:"engine",event:"viewport",x:l,y:c,width:u,height:_})}},n._updateSubContextTexture=function(){var t=this._imageAsset;if(t&&this._openDataContext&&!(t.width<=0||t.height<=0)){var e=this._openDataContext.canvas;t.reset(e),(e.width>t.width||e.height>t.height)&&this._texture.create(e.width,e.height),this._texture.uploadData(e)}},n._registerNodeEvent=function(){this.node.on(D.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.on(D.SIZE_CHANGED,this._updateSubContextView,this),this.node.on(D.LAYER_CHANGED,this._updateContentLayer,this)},n._unregisterNodeEvent=function(){this.node.off(D.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.off(D.SIZE_CHANGED,this._updateSubContextView,this),this.node.off(D.LAYER_CHANGED,this._updateContentLayer,this)},n._updateContentLayer=function(){this._content.layer=this.node.layer},n.update=function(t){void 0===t?this._updateSubContextTexture():performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},n.onDestroy=function(){this._content.destroy(),this._texture.destroy(),this._sprite&&this._sprite.destroy(),this._imageAsset.destroy(),this._openDataContext=null},o(e,[{key:"designResolutionSize",get:function(){return this._designResolutionSize},set:function(){}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps!==t&&(this._fps=t,this._updateInterval=1e3/t)}}]),e}(k),n((Gc=Zc).prototype,"designResolutionSize",[Vc],Object.getOwnPropertyDescriptor(Gc.prototype,"designResolutionSize"),Gc.prototype),n(Gc.prototype,"fps",[Fc],Object.getOwnPropertyDescriptor(Gc.prototype,"fps"),Gc.prototype),jc=n(Gc.prototype,"_fps",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),Wc=n(Gc.prototype,"_designResolutionSize",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ot(640,960)}}),Uc=Gc))||Uc)||Uc)||Uc)||Uc)||Uc));r.SubContextView=Kc,st({ButtonComponent:{newName:"Button",since:"1.2.0",removed:!1},EditBoxComponent:{newName:"EditBox",since:"1.2.0",removed:!1},LayoutComponent:{newName:"Layout",since:"1.2.0",removed:!1},ProgressBarComponent:{newName:"ProgressBar",since:"1.2.0",removed:!1},ScrollViewComponent:{newName:"ScrollView",since:"1.2.0",removed:!1},ScrollBarComponent:{newName:"ScrollBar",since:"1.2.0",removed:!1},SliderComponent:{newName:"Slider",since:"1.2.0",removed:!1},ToggleComponent:{newName:"Toggle",since:"1.2.0",removed:!1},ToggleContainerComponent:{newName:"ToggleContainer",since:"1.2.0",removed:!1},WidgetComponent:{newName:"Widget",since:"1.2.0",removed:!1},PageViewComponent:{newName:"PageView",since:"1.2.0",removed:!1},PageViewIndicatorComponent:{newName:"PageViewIndicator",since:"1.2.0",removed:!1},SafeAreaComponent:{newName:"SafeArea",since:"1.2.0",removed:!1},UICoordinateTrackerComponent:{newName:"UICoordinateTracker",since:"1.2.0",removed:!1},BlockInputEventsComponent:{newName:"BlockInputEvents",since:"1.2.0",removed:!1}});var qc=t("UIReorderComponent",E("cc.UIReorderComponent")(Xc=function(){y(1408,"UIReorderComponent")})||Xc);r.UIReorderComponent=qc,r.ButtonComponent=Ue,T.setClassAlias(Ue,"cc.ButtonComponent"),r.EditBoxComponent=fn,T.setClassAlias(fn,"cc.EditBoxComponent"),r.LayoutComponent=Fn,T.setClassAlias(Fn,"cc.LayoutComponent"),r.ProgressBarComponent=_r,T.setClassAlias(_r,"cc.ProgressBarComponent"),r.ScrollViewComponent=Xs,T.setClassAlias(Xs,"cc.ScrollViewComponent"),r.ScrollBarComponent=vr,T.setClassAlias(vr,"cc.ScrollBarComponent"),r.SliderComponent=fa,T.setClassAlias(fa,"cc.SliderComponent"),r.ToggleComponent=Ia,T.setClassAlias(Ia,"cc.ToggleComponent"),r.ToggleContainerComponent=Ch,T.setClassAlias(Ch,"cc.ToggleContainerComponent"),r.WidgetComponent=Kh,T.setClassAlias(Kh,"cc.WidgetComponent"),r.PageViewComponent=Zl,T.setClassAlias(Zl,"cc.PageViewComponent"),r.PageViewIndicatorComponent=Fl,T.setClassAlias(Fl,"cc.PageViewIndicatorComponent"),r.SafeAreaComponent=Ic,T.setClassAlias(Ic,"cc.SafeAreaComponent"),T.setClassAlias(Rc,"cc.UICoordinateTrackerComponent"),r.BlockInputEventsComponent=Yc,T.setClassAlias(Yc,"cc.BlockInputEventsComponent")}}}));
