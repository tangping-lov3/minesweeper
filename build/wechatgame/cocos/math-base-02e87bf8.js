System.register(["./bits-b8bc8b22.js"],(function(t){"use strict";var m,i,a,n,s,h,e,r,u,o;return{setters:[function(t){m=t.w,i=t.e,a=t.i,n=t.f,s=t.d,h=t.F,e=t.C,r=t.l,u=t.V,o=t.A}],execute:function(){t({B:function(t,m){return t=_(t,2*m),m-Math.abs(t-m)},D:function(t,m,i){return(i-t)/(m-t)},F:function(t){return Math.abs(t.x)>Math.abs(t.y)?Math.abs(t.x)>Math.abs(t.z)?t.x:t.z:Math.abs(t.y)>Math.abs(t.z)?t.y:t.z},G:function(t,m){return Math.abs(t)>Math.abs(m)?t:m},H:function(t,m){m.forEach((function(m){Object.defineProperty(t,m,{enumerable:!0})}))},K:function(t){t>0&&(M=t)},L:void 0,N:void 0,O:void 0,P:function(t){for(var m in t){var i=t[m];w[m]=i}},T:function(t){return b||(b="undefined"==typeof Proxy?{}:new Proxy(t,{get:function(t,m,i){return v(m),Reflect.get(t,m,i)}})),b},_:function(t){for(var m,i=a(t);!(m=i()).done;)v(m.value)},b:U,d:A,f:R,g:function(t,m){return Math.abs(t-m)<=p*Math.max(1,Math.abs(t),Math.abs(m))},h:function(t,m,i){return i=i||p,Math.abs(t-m)<=i},i:N,j:function(t){return t<0?0:t>1?1:t},k:q,l:function(t,m,i){return t+(m-t)*i},m:st,o:E,p:function(t,m){return Math.floor(E(t,m))},q:tt,r:ft,s:yt,t:function(t){return t*g},u:j,v:ut,w:V,x:function(t,m,i){return Math.floor(V(t,m,i))},y:function(t){return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},z:_});var c,y,x,f,M=10,l=0,z=new Map;y=function(t,m,i,a,n,s,h){var e=z.get(s);e&&e.logTimes>e.count&&(n("'%s' is deprecated, please use '%s' instead. "+h,t+"."+m,i+"."+a),e.count++)},c=t("L",(function(t,i,a){null!=t&&a.forEach((function(a){var n=l++;z.set(n,{id:n,count:0,logTimes:void 0!==a.logTimes?a.logTimes:M});var s=null!=a.target?a.target:t,h=null!=a.newName?a.newName:a.name,e=null!=a.targetName?a.targetName:i,r=s===t,u=a.suggest?"("+a.suggest+")":"";if(null!=a.customFunction)t[a.name]=function(){var t;return y(i,a.name,e,h,m,n,u),(t=a.customFunction).call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))};else if(null!=a.customSetter||null!=a.customGetter){var o=null!=a.customSetter,c=null!=a.customGetter;o&&c?Object.defineProperty(t,a.name,{get:function(){return y(i,a.name,e,h,m,n,u),a.customGetter.call(this)},set:function(t){y(i,a.name,e,h,m,n,u),a.customSetter.call(this,t)},enumerable:!1}):o?Object.defineProperty(t,a.name,{set:function(t){y(i,a.name,e,h,m,n,u),a.customSetter.call(this,t)},enumerable:!1}):c&&Object.defineProperty(t,a.name,{get:function(){return y(i,a.name,e,h,m,n,u),a.customGetter.call(this)},enumerable:!1})}else Object.defineProperty(t,a.name,{get:function(){return y(i,a.name,e,h,m,n,u),r?this[h]:s[h]},set:function(t){y(i,a.name,e,h,m,n,u),r?this[h]=t:s[h]=t},enumerable:!1})}))})),f=function(t,m,i,a,n){var s=z.get(a);s&&s.logTimes>s.count&&(i("'%s' has been removed. "+n,t+"."+m),s.count++)},t("N",(function(t,m,a){null!=t&&a.forEach((function(a){var n=l++;z.set(n,{id:n,count:0,logTimes:void 0!==a.logTimes?a.logTimes:M});var s=a.suggest?"("+a.suggest+")":"";Object.defineProperty(t,a.name,{get:function(){return f(m,a.name,i,n,s)},set:function(){f(m,a.name,i,n,s)},enumerable:!1})}))})),x=function(t,m,i,a,n){var s=z.get(a);s&&s.logTimes>s.count&&(i("'%s' is deprecated. "+n,t+"."+m),s.count++)},t("O",(function(t,i,a){null!=t&&a.forEach((function(a){var n=a.name,s=Object.getOwnPropertyDescriptor(t,n);if(s&&s.configurable){var h=l++;z.set(h,{id:h,count:0,logTimes:void 0!==a.logTimes?a.logTimes:M});var e=a.suggest?"("+a.suggest+")":"";if(void 0!==s.value)if("function"==typeof s.value){var r=s.value;t[n]=function(){return x(i,n,m,h,e),r.call.apply(r,[this].concat(Array.prototype.slice.call(arguments)))}}else{var u=s.value;Object.defineProperty(t,n,{configurable:!0,get:function(){return x(i,n,m,h,e),u}}),s.writable&&Object.defineProperty(t,n,{set:function(t){x(i,n,m,h,e),u=t}})}else!function(m,i,a,n,s,h){if(m.get){var e=m.get;m.get=function(){return x(i,a,n,s,h),e.call(this)}}if(m.set){var r=m.set;m.set=function(t){x(i,a,n,s,h),r.call(this,t)}}Object.defineProperty(t,a,m)}(s,i,n,m,h,e);Object.defineProperty(t,n,{enumerable:!1})}}))}));var b,w={};function v(t){var m=w[t];if(m){var i=m.newName,a=m.since;m.removed?i?n(16003,t,a,i):n(16002,t,a):i?s(16001,t,a,i):s(16e3,t,a)}}var g=Math.PI/180,d=180/Math.PI,p=t("E",1e-6);function N(t,m,i){if(m>i){var a=m;m=i,i=a}return t<m?m:t>i?i:t}function q(t){return t*d}var S=t("n",Math.random);function E(t,m){return Math.random()*(m-t)+t}function j(t){return(t=(9301*t+49297)%233280)/233280}function V(t,m,i){return j(t)*(i-m)+m}function _(t,m){return t-Math.floor(t/m)*m}var O=t("c",function(t){function m(m,i,a,n){var s;return s=t.call(this)||this,m&&"object"==typeof m?(s.x=m.x,s.y=m.y,s.z=m.z,s.w=m.w):(s.x=m||0,s.y=i||0,s.z=a||0,s.w=n||0),s}h(m,t),m.clone=function(t){return new m(t.x,t.y,t.z,t.w)},m.copy=function(t,m){return t.x=m.x,t.y=m.y,t.z=m.z,t.w=m.w,t},m.set=function(t,m,i,a,n){return t.x=m,t.y=i,t.z=a,t.w=n,t},m.add=function(t,m,i){return t.x=m.x+i.x,t.y=m.y+i.y,t.z=m.z+i.z,t.w=m.w+i.w,t},m.subtract=function(t,m,i){return t.x=m.x-i.x,t.y=m.y-i.y,t.z=m.z-i.z,t.w=m.w-i.w,t},m.multiply=function(t,m,i){return t.x=m.x*i.x,t.y=m.y*i.y,t.z=m.z*i.z,t.w=m.w*i.w,t},m.divide=function(t,m,i){return t.x=m.x/i.x,t.y=m.y/i.y,t.z=m.z/i.z,t.w=m.w/i.w,t},m.ceil=function(t,m){return t.x=Math.ceil(m.x),t.y=Math.ceil(m.y),t.z=Math.ceil(m.z),t.w=Math.ceil(m.w),t},m.floor=function(t,m){return t.x=Math.floor(m.x),t.y=Math.floor(m.y),t.z=Math.floor(m.z),t.w=Math.floor(m.w),t},m.min=function(t,m,i){return t.x=Math.min(m.x,i.x),t.y=Math.min(m.y,i.y),t.z=Math.min(m.z,i.z),t.w=Math.min(m.w,i.w),t},m.max=function(t,m,i){return t.x=Math.max(m.x,i.x),t.y=Math.max(m.y,i.y),t.z=Math.max(m.z,i.z),t.w=Math.max(m.w,i.w),t},m.round=function(t,m){return t.x=Math.round(m.x),t.y=Math.round(m.y),t.z=Math.round(m.z),t.w=Math.round(m.w),t},m.multiplyScalar=function(t,m,i){return t.x=m.x*i,t.y=m.y*i,t.z=m.z*i,t.w=m.w*i,t},m.scaleAndAdd=function(t,m,i,a){return t.x=m.x+i.x*a,t.y=m.y+i.y*a,t.z=m.z+i.z*a,t.w=m.w+i.w*a,t},m.distance=function(t,m){var i=m.x-t.x,a=m.y-t.y,n=m.z-t.z,s=m.w-t.w;return Math.sqrt(i*i+a*a+n*n+s*s)},m.squaredDistance=function(t,m){var i=m.x-t.x,a=m.y-t.y,n=m.z-t.z,s=m.w-t.w;return i*i+a*a+n*n+s*s},m.len=function(t){var m=t.x,i=t.y,a=t.z,n=t.w;return Math.sqrt(m*m+i*i+a*a+n*n)},m.lengthSqr=function(t){var m=t.x,i=t.y,a=t.z,n=t.w;return m*m+i*i+a*a+n*n},m.negate=function(t,m){return t.x=-m.x,t.y=-m.y,t.z=-m.z,t.w=-m.w,t},m.inverse=function(t,m){return t.x=1/m.x,t.y=1/m.y,t.z=1/m.z,t.w=1/m.w,t},m.inverseSafe=function(t,m){var i=m.x,a=m.y,n=m.z,s=m.w;return Math.abs(i)<p?t.x=0:t.x=1/i,Math.abs(a)<p?t.y=0:t.y=1/a,Math.abs(n)<p?t.z=0:t.z=1/n,Math.abs(s)<p?t.w=0:t.w=1/s,t},m.normalize=function(t,m){var i=m.x,a=m.y,n=m.z,s=m.w,h=i*i+a*a+n*n+s*s;return h>0&&(h=1/Math.sqrt(h),t.x=i*h,t.y=a*h,t.z=n*h,t.w=s*h),t},m.dot=function(t,m){return t.x*m.x+t.y*m.y+t.z*m.z+t.w*m.w},m.lerp=function(t,m,i,a){return t.x=m.x+a*(i.x-m.x),t.y=m.y+a*(i.y-m.y),t.z=m.z+a*(i.z-m.z),t.w=m.w+a*(i.w-m.w),t},m.random=function(t,m){m=m||1;var i=2*S()*Math.PI,a=2*S()-1,n=Math.sqrt(1-a*a);return t.x=n*Math.cos(i)*m,t.y=n*Math.sin(i)*m,t.z=a*m,t.w=0,t},m.transformMat4=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=m.w;return t.x=i.m00*a+i.m04*n+i.m08*s+i.m12*h,t.y=i.m01*a+i.m05*n+i.m09*s+i.m13*h,t.z=i.m02*a+i.m06*n+i.m10*s+i.m14*h,t.w=i.m03*a+i.m07*n+i.m11*s+i.m15*h,t},m.transformAffine=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=m.w;return t.x=i.m00*a+i.m04*n+i.m08*s+i.m12*h,t.y=i.m01*a+i.m05*n+i.m09*s+i.m13*h,t.z=i.m02*a+i.m06*n+i.m10*s+i.m14*h,t.w=m.w,t},m.transformQuat=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=i.x,e=i.y,r=i.z,u=i.w,o=u*a+e*s-r*n,c=u*n+r*a-h*s,y=u*s+h*n-e*a,x=-h*a-e*n-r*s;return t.x=o*u+x*-h+c*-r-y*-e,t.y=c*u+x*-e+y*-h-o*-r,t.z=y*u+x*-r+o*-e-c*-h,t.w=m.w,t},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.x,t[i+1]=m.y,t[i+2]=m.z,t[i+3]=m.w,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.x=m[i+0],t.y=m[i+1],t.z=m[i+2],t.w=m[i+3],t},m.strictEquals=function(t,m){return t.x===m.x&&t.y===m.y&&t.z===m.z&&t.w===m.w},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.x-m.x)<=i*Math.max(1,Math.abs(t.x),Math.abs(m.x))&&Math.abs(t.y-m.y)<=i*Math.max(1,Math.abs(t.y),Math.abs(m.y))&&Math.abs(t.z-m.z)<=i*Math.max(1,Math.abs(t.z),Math.abs(m.z))&&Math.abs(t.w-m.w)<=i*Math.max(1,Math.abs(t.w),Math.abs(m.w))};var i=m.prototype;return i.clone=function(){return new m(this.x,this.y,this.z,this.w)},i.set=function(t,m,i,a){return t&&"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=m||0,this.z=i||0,this.w=a||0),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.x-t.x)<=m*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=m*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=m*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=m*Math.max(1,Math.abs(this.w),Math.abs(t.w))},i.equals4f=function(t,m,i,a,n){return void 0===n&&(n=p),Math.abs(this.x-t)<=n*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-m)<=n*Math.max(1,Math.abs(this.y),Math.abs(m))&&Math.abs(this.z-i)<=n*Math.max(1,Math.abs(this.z),Math.abs(i))&&Math.abs(this.w-a)<=n*Math.max(1,Math.abs(this.w),Math.abs(a))},i.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},i.strictEquals4f=function(t,m,i,a){return this.x===t&&this.y===m&&this.z===i&&this.w===a},i.lerp=function(t,m){var i=this.x,a=this.y,n=this.z,s=this.w;return this.x=i+m*(t.x-i),this.y=a+m*(t.y-a),this.z=n+m*(t.z-n),this.w=s+m*(t.w-s),this},i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+", "+this.w.toFixed(2)+")"},i.clampf=function(t,m){return this.x=N(this.x,t.x,m.x),this.y=N(this.y,t.y,m.y),this.z=N(this.z,t.z,m.z),this.w=N(this.w,t.w,m.w),this},i.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},i.add4f=function(t,m,i,a){return this.x+=t,this.y+=m,this.z+=i,this.w+=a,this},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},i.subtract4f=function(t,m,i,a){return this.x-=t,this.y-=m,this.z-=i,this.w-=a,this},i.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec4.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},i.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec4.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},i.multiply4f=function(t,m,i,a){return this.x*=t,this.y*=m,this.z*=i,this.w*=a,this},i.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this},i.divide4f=function(t,m,i,a){return this.x/=t,this.y/=m,this.z/=i,this.w/=a,this},i.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},i.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},i.cross=function(t){var m=this.x,i=this.y,a=this.z,n=t.x,s=t.y,h=t.z;return this.x=i*h-a*s,this.y=a*n-m*h,this.z=m*s-i*n,this},i.length=function(){var t=this.x,m=this.y,i=this.z,a=this.w;return Math.sqrt(t*t+m*m+i*i+a*a)},i.lengthSqr=function(){var t=this.x,m=this.y,i=this.z,a=this.w;return t*t+m*m+i*i+a*a},i.normalize=function(){var t=this.x,m=this.y,i=this.z,a=this.w,n=t*t+m*m+i*i+a*a;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=m*n,this.z=i*n,this.w=a*n),this},i.transformMat4=function(t){var m=this.x,i=this.y,a=this.z,n=this.w;return this.x=t.m00*m+t.m04*i+t.m08*a+t.m12*n,this.y=t.m01*m+t.m05*i+t.m09*a+t.m13*n,this.z=t.m02*m+t.m06*i+t.m10*a+t.m14*n,this.w=t.m03*m+t.m07*i+t.m11*a+t.m15*n,this},m}(u));function A(t,m,i,a){return new O(t,m,i,a)}O.ZERO=Object.freeze(new O(0,0,0,0)),O.ONE=Object.freeze(new O(1,1,1,1)),O.NEG_ONE=Object.freeze(new O(-1,-1,-1,-1)),e.fastDefine("cc.Vec4",O,{x:0,y:0,z:0,w:0}),r.Vec4=O,r.v4=A;var T=1/255,I=t("C",function(t){function m(m,i,a,n){var s;return(s=t.call(this)||this)._val=0,"string"==typeof m?s.fromHEX(m):void 0!==i?s.set(m,i,a,n):s.set(m),s}h(m,t),m.clone=function(t){var i=new m;return t._val?i._val=t._val:i._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,i},m.copy=function(t,m){return t.r=m.r,t.g=m.g,t.b=m.b,t.a=m.a,t},m.set=function(t,m,i,a,n){return t.r=m,t.g=i,t.b=a,t.a=n,t},m.toVec4=function(t,m){return(m=void 0!==m?m:new O).x=F(t.r),m.y=F(t.g),m.z=F(t.b),m.w=F(t.a),m},m.fromVec4=function(t,i){return(i=void 0===i?new m:i).r=k(t.x),i.g=k(t.y),i.b=k(t.z),i.a=k(t.w),i},m.fromHEX=function(t,m){m=0===m.indexOf("#")?m.substring(1):m,t.r=parseInt(m.substr(0,2),16)||0,t.g=parseInt(m.substr(2,2),16)||0,t.b=parseInt(m.substr(4,2),16)||0;var i=parseInt(m.substr(6,2),16);return t.a=Number.isNaN(i)?255:i,t._val=(t.a<<24>>>0)+(t.b<<16)+(t.g<<8)+t.r,t},m.add=function(t,m,i){return t.r=m.r+i.r,t.g=m.g+i.g,t.b=m.b+i.b,t.a=m.a+i.a,t},m.subtract=function(t,m,i){return t.r=m.r-i.r,t.g=m.g-i.g,t.b=m.b-i.b,t.a=m.a-i.a,t},m.multiply=function(t,m,i){return t.r=m.r*i.r,t.g=m.g*i.g,t.b=m.b*i.b,t.a=m.a*i.a,t},m.divide=function(t,m,i){return t.r=m.r/i.r,t.g=m.g/i.g,t.b=m.b/i.b,t.a=m.a/i.a,t},m.scale=function(t,m,i){return t.r=m.r*i,t.g=m.g*i,t.b=m.b*i,t.a=m.a*i,t},m.lerp=function(t,m,i,a){var n=m.r,s=m.g,h=m.b,e=m.a;return n+=(i.r-n)*a,s+=(i.g-s)*a,h+=(i.b-h)*a,e+=(i.a-e)*a,t._val=Math.floor((e<<24>>>0)+(h<<16)+(s<<8)+n),t},m.toArray=function(t,i,a){void 0===a&&(a=0);var n=i instanceof m||i.a>1?1/255:1;return t[a+0]=i.r*n,t[a+1]=i.g*n,t[a+2]=i.b*n,t[a+3]=i.a*n,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),m.r=255*t[i+0],m.g=255*t[i+1],m.b=255*t[i+2],m.a=255*t[i+3],m},m.strictEquals=function(t,m){return t.r===m.r&&t.g===m.g&&t.b===m.b&&t.a===m.a},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.r-m.r)<=i*Math.max(1,Math.abs(t.r),Math.abs(m.r))&&Math.abs(t.g-m.g)<=i*Math.max(1,Math.abs(t.g),Math.abs(m.g))&&Math.abs(t.b-m.b)<=i*Math.max(1,Math.abs(t.b),Math.abs(m.b))&&Math.abs(t.a-m.a)<=i*Math.max(1,Math.abs(t.a),Math.abs(m.a))},m.hex=function(t){return(255*t.r<<24|255*t.g<<16|255*t.b<<8|255*t.a)>>>0};var i=m.prototype;return i.clone=function(){var t=new m;return t._val=this._val,t},i.equals=function(t){return t&&this._val===t._val},i.lerp=function(t,m){var i=this.r,a=this.g,n=this.b,s=this.a;return i+=(t.r-i)*m,a+=(t.g-a)*m,n+=(t.b-n)*m,s+=(t.a-s)*m,this._val=Math.floor((s<<24>>>0)+(n<<16)+(a<<8)+i),this},i.toString=function(){return"rgba("+this.r.toFixed()+", "+this.g.toFixed()+", "+this.b.toFixed()+", "+this.a.toFixed()+")"},i.toCSS=function(t){return void 0===t&&(t="rgba"),"rgba"===t?"rgba("+this.r+","+this.g+","+this.b+","+(this.a*T).toFixed(2)+")":"rgb"===t?"rgb("+this.r+","+this.g+","+this.b+")":"#"+this.toHEX(t)},i.fromHEX=function(t){t=0===t.indexOf("#")?t.substring(1):t;var m=parseInt(t.substr(0,2),16)||0,i=parseInt(t.substr(2,2),16)||0,a=parseInt(t.substr(4,2),16)||0,n=parseInt(t.substr(6,2),16);return n=Number.isNaN(n)?255:n,this._val=(n<<24>>>0)+(a<<16)+(i<<8)+(0|m),this},i.toHEX=function(t){void 0===t&&(t="#rrggbb");var m="0",i=[(this.r<16?m:"")+this.r.toString(16),(this.g<16?m:"")+this.g.toString(16),(this.b<16?m:"")+this.b.toString(16)];return"#rgb"===t?(i[0]=i[0][0],i[1]=i[1][0],i[2]=i[2][0]):"#rrggbbaa"===t&&i.push((this.a<16?m:"")+this.a.toString(16)),i.join("")},i.toRGBValue=function(){return 16777215&this._val},i.fromHSV=function(t,m,i){var a=0,n=0,s=0;if(0===m)a=n=s=i;else if(0===i)a=n=s=0;else{1===t&&(t=0),t*=6;var h=Math.floor(t),e=t-h,r=i*(1-m),u=i*(1-m*e),o=i*(1-m*(1-e));switch(h){default:case 0:a=i,n=o,s=r;break;case 1:a=u,n=i,s=r;break;case 2:a=r,n=i,s=o;break;case 3:a=r,n=u,s=i;break;case 4:a=o,n=r,s=i;break;case 5:a=i,n=r,s=u}}return a*=255,n*=255,s*=255,this._val=(this.a<<24>>>0)+(s<<16)+(n<<8)+(0|a),this},i.toHSV=function(){var t=this.r*T,m=this.g*T,i=this.b*T,a={h:0,s:0,v:0},n=Math.max(t,m,i),s=Math.min(t,m,i),h=0;return a.v=n,a.s=n?(n-s)/n:0,a.s?(h=n-s,a.h=t===n?(m-i)/h:m===n?2+(i-t)/h:4+(t-m)/h,a.h/=6,a.h<0&&(a.h+=1)):a.h=0,a},i.set=function(t,m,i,a){return"object"==typeof t?null!=t._val?this._val=t._val:(m=t.g||0,i=t.b||0,a="number"==typeof t.a?t.a:255,t=t.r||0,this._val=(a<<24>>>0)+(i<<16)+(m<<8)+(0|t)):(t=t||0,m=m||0,i=i||0,a="number"==typeof a?a:255,this._val=(a<<24>>>0)+(i<<16)+(m<<8)+(0|t)),this},i.multiply=function(t){var m=(255&this._val)*t.r>>8,i=(65280&this._val)*t.g>>8,a=(16711680&this._val)*t.b>>8,n=((4278190080&this._val)>>>8)*t.a;return this._val=4278190080&n|16711680&a|65280&i|255&m,this},i._set_r_unsafe=function(t){return this._val=(4294967040&this._val|t)>>>0,this},i._set_g_unsafe=function(t){return this._val=(4294902015&this._val|t<<8)>>>0,this},i._set_b_unsafe=function(t){return this._val=(4278255615&this._val|t<<16)>>>0,this},i._set_a_unsafe=function(t){return this._val=(16777215&this._val|t<<24)>>>0,this},o(m,[{key:"r",get:function(){return 255&this._val},set:function(t){t=~~N(t,0,255),this._val=(4294967040&this._val|t)>>>0}},{key:"g",get:function(){return(65280&this._val)>>8},set:function(t){t=~~N(t,0,255),this._val=(4294902015&this._val|t<<8)>>>0}},{key:"b",get:function(){return(16711680&this._val)>>16},set:function(t){t=~~N(t,0,255),this._val=(4278255615&this._val|t<<16)>>>0}},{key:"a",get:function(){return(4278190080&this._val)>>>24},set:function(t){t=~~N(t,0,255),this._val=(16777215&this._val|t<<24)>>>0}},{key:"x",get:function(){return this.r*T},set:function(t){this.r=255*t}},{key:"y",get:function(){return this.g*T},set:function(t){this.g=255*t}},{key:"z",get:function(){return this.b*T},set:function(t){this.b=255*t}},{key:"w",get:function(){return this.a*T},set:function(t){this.a=255*t}}]),m}(u));function R(t,m,i,a){return new I(t,m,i,a)}function F(t){if((0|t)!==t||t>>>8!=0)throw new RangeError("Value out of 8-bit range");return D[t]}function k(t){if(t<=0)return 0;var m=D;if(t>=1)return m.length-1;for(var i=0,a=m.length>>>1;0!==a;a>>>=1)m[i|a]<=t&&(i|=a);return t-m[i]<=m[i+1]-t?i:i+1}I.WHITE=Object.freeze(new I(255,255,255,255)),I.GRAY=Object.freeze(new I(127,127,127,255)),I.BLACK=Object.freeze(new I(0,0,0,255)),I.TRANSPARENT=Object.freeze(new I(0,0,0,0)),I.RED=Object.freeze(new I(255,0,0,255)),I.GREEN=Object.freeze(new I(0,255,0,255)),I.BLUE=Object.freeze(new I(0,0,255,255)),I.CYAN=Object.freeze(new I(0,255,255,255)),I.MAGENTA=Object.freeze(new I(255,0,255,255)),I.YELLOW=Object.freeze(new I(255,255,0,255)),e.fastDefine("cc.Color",I,{r:0,g:0,b:0,a:255}),r.Color=I,r.color=R;for(var P,D=[],Q=0;Q<256;Q++)D.push((P=Q/255)<=0?0:P>=1?1:P<.04045?P/12.92:Math.pow((P+.055)/1.055,2.4));var X=t("a",function(t){function m(m,i,a){var n;return n=t.call(this)||this,m&&"object"==typeof m?(n.x=m.x,n.y=m.y,n.z=m.z):(n.x=m||0,n.y=i||0,n.z=a||0),n}h(m,t),m.zero=function(t){return t.x=0,t.y=0,t.z=0,t},m.clone=function(t){return new m(t.x,t.y,t.z)},m.copy=function(t,m){return t.x=m.x,t.y=m.y,t.z=m.z,t},m.set=function(t,m,i,a){return t.x=m,t.y=i,t.z=a,t},m.add=function(t,m,i){return t.x=m.x+i.x,t.y=m.y+i.y,t.z=m.z+i.z,t},m.subtract=function(t,m,i){return t.x=m.x-i.x,t.y=m.y-i.y,t.z=m.z-i.z,t},m.multiply=function(t,m,i){return t.x=m.x*i.x,t.y=m.y*i.y,t.z=m.z*i.z,t},m.divide=function(t,m,i){return t.x=m.x/i.x,t.y=m.y/i.y,t.z=m.z/i.z,t},m.ceil=function(t,m){return t.x=Math.ceil(m.x),t.y=Math.ceil(m.y),t.z=Math.ceil(m.z),t},m.floor=function(t,m){return t.x=Math.floor(m.x),t.y=Math.floor(m.y),t.z=Math.floor(m.z),t},m.min=function(t,m,i){return t.x=Math.min(m.x,i.x),t.y=Math.min(m.y,i.y),t.z=Math.min(m.z,i.z),t},m.max=function(t,m,i){return t.x=Math.max(m.x,i.x),t.y=Math.max(m.y,i.y),t.z=Math.max(m.z,i.z),t},m.round=function(t,m){return t.x=Math.round(m.x),t.y=Math.round(m.y),t.z=Math.round(m.z),t},m.multiplyScalar=function(t,m,i){return t.x=m.x*i,t.y=m.y*i,t.z=m.z*i,t},m.scaleAndAdd=function(t,m,i,a){return t.x=m.x+i.x*a,t.y=m.y+i.y*a,t.z=m.z+i.z*a,t},m.distance=function(t,m){var i=m.x-t.x,a=m.y-t.y,n=m.z-t.z;return Math.sqrt(i*i+a*a+n*n)},m.squaredDistance=function(t,m){var i=m.x-t.x,a=m.y-t.y,n=m.z-t.z;return i*i+a*a+n*n},m.len=function(t){var m=t.x,i=t.y,a=t.z;return Math.sqrt(m*m+i*i+a*a)},m.lengthSqr=function(t){var m=t.x,i=t.y,a=t.z;return m*m+i*i+a*a},m.negate=function(t,m){return t.x=-m.x,t.y=-m.y,t.z=-m.z,t},m.invert=function(t,m){return t.x=1/m.x,t.y=1/m.y,t.z=1/m.z,t},m.invertSafe=function(t,m){var i=m.x,a=m.y,n=m.z;return Math.abs(i)<p?t.x=0:t.x=1/i,Math.abs(a)<p?t.y=0:t.y=1/a,Math.abs(n)<p?t.z=0:t.z=1/n,t},m.normalize=function(t,m){var i=m.x,a=m.y,n=m.z,s=i*i+a*a+n*n;return s>0&&(s=1/Math.sqrt(s),t.x=i*s,t.y=a*s,t.z=n*s),t},m.dot=function(t,m){return t.x*m.x+t.y*m.y+t.z*m.z},m.cross=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=i.x,e=i.y,r=i.z;return t.x=n*r-s*e,t.y=s*h-a*r,t.z=a*e-n*h,t},m.lerp=function(t,m,i,a){return t.x=m.x+a*(i.x-m.x),t.y=m.y+a*(i.y-m.y),t.z=m.z+a*(i.z-m.z),t},m.random=function(t,m){m=m||1;var i=2*S()*Math.PI,a=2*S()-1,n=Math.sqrt(1-a*a);return t.x=n*Math.cos(i)*m,t.y=n*Math.sin(i)*m,t.z=a*m,t},m.transformMat4=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=i.m03*a+i.m07*n+i.m11*s+i.m15;return h=h?Math.abs(1/h):1,t.x=(i.m00*a+i.m04*n+i.m08*s+i.m12)*h,t.y=(i.m01*a+i.m05*n+i.m09*s+i.m13)*h,t.z=(i.m02*a+i.m06*n+i.m10*s+i.m14)*h,t},m.transformMat4Normal=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=i.m03*a+i.m07*n+i.m11*s;return h=h?Math.abs(1/h):1,t.x=(i.m00*a+i.m04*n+i.m08*s)*h,t.y=(i.m01*a+i.m05*n+i.m09*s)*h,t.z=(i.m02*a+i.m06*n+i.m10*s)*h,t},m.transformMat3=function(t,m,i){var a=m.x,n=m.y,s=m.z;return t.x=a*i.m00+n*i.m03+s*i.m06,t.y=a*i.m01+n*i.m04+s*i.m07,t.z=a*i.m02+n*i.m05+s*i.m08,t},m.transformAffine=function(t,m,i){var a=m.x,n=m.y,s=m.z;return t.x=i.m00*a+i.m04*n+i.m08*s+i.m12,t.y=i.m01*a+i.m05*n+i.m09*s+i.m13,t.z=i.m02*a+i.m06*n+i.m10*s+i.m14,t},m.transformQuat=function(t,m,i){var a=i.w*m.x+i.y*m.z-i.z*m.y,n=i.w*m.y+i.z*m.x-i.x*m.z,s=i.w*m.z+i.x*m.y-i.y*m.x,h=-i.x*m.x-i.y*m.y-i.z*m.z;return t.x=a*i.w+h*-i.x+n*-i.z-s*-i.y,t.y=n*i.w+h*-i.y+s*-i.x-a*-i.z,t.z=s*i.w+h*-i.z+a*-i.y-n*-i.x,t},m.transformRTS=function(t,m,i,a,n){var s=m.x*n.x,h=m.y*n.y,e=m.z*n.z,r=i.w*s+i.y*e-i.z*h,u=i.w*h+i.z*s-i.x*e,o=i.w*e+i.x*h-i.y*s,c=-i.x*s-i.y*h-i.z*e;return t.x=r*i.w+c*-i.x+u*-i.z-o*-i.y+a.x,t.y=u*i.w+c*-i.y+o*-i.x-r*-i.z+a.y,t.z=o*i.w+c*-i.z+r*-i.y-u*-i.x+a.z,t},m.transformInverseRTS=function(t,m,i,a,n){var s=m.x-a.x,h=m.y-a.y,e=m.z-a.z,r=i.w*s-i.y*e+i.z*h,u=i.w*h-i.z*s+i.x*e,o=i.w*e-i.x*h+i.y*s,c=i.x*s+i.y*h+i.z*e;return t.x=(r*i.w+c*i.x+u*i.z-o*i.y)/n.x,t.y=(u*i.w+c*i.y+o*i.x-r*i.z)/n.y,t.z=(o*i.w+c*i.z+r*i.y-u*i.x)/n.z,t},m.rotateX=function(t,m,i,a){var n=m.x-i.x,s=m.y-i.y,h=m.z-i.z,e=Math.cos(a),r=Math.sin(a),u=n,o=s*e-h*r,c=s*r+h*e;return t.x=u+i.x,t.y=o+i.y,t.z=c+i.z,t},m.rotateY=function(t,m,i,a){var n=m.x-i.x,s=m.y-i.y,h=m.z-i.z,e=Math.cos(a),r=Math.sin(a),u=h*r+n*e,o=s,c=h*e-n*r;return t.x=u+i.x,t.y=o+i.y,t.z=c+i.z,t},m.rotateZ=function(t,m,i,a){var n=m.x-i.x,s=m.y-i.y,h=m.z-i.z,e=Math.cos(a),r=Math.sin(a),u=n*e-s*r,o=n*r+s*e,c=h;return t.x=u+i.x,t.y=o+i.y,t.z=c+i.z,t},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.x,t[i+1]=m.y,t[i+2]=m.z,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.x=m[i+0],t.y=m[i+1],t.z=m[i+2],t},m.strictEquals=function(t,m){return t.x===m.x&&t.y===m.y&&t.z===m.z},m.equals=function(t,m,i){void 0===i&&(i=p);var a=t.x,n=t.y,s=t.z,h=m.x,e=m.y,r=m.z;return Math.abs(a-h)<=i*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(n-e)<=i*Math.max(1,Math.abs(n),Math.abs(e))&&Math.abs(s-r)<=i*Math.max(1,Math.abs(s),Math.abs(r))},m.angle=function(t,i){m.normalize(Y,t),m.normalize(C,i);var a=m.dot(Y,C);return a>1?0:a<-1?Math.PI:Math.acos(a)},m.projectOnPlane=function(t,i,a){return m.subtract(t,i,m.project(t,i,a))},m.project=function(t,i,a){var n=m.lengthSqr(a);return n<1e-6?m.set(t,0,0,0):m.multiplyScalar(t,a,m.dot(i,a)/n)};var i=m.prototype;return i.clone=function(){return new m(this.x,this.y,this.z)},i.set=function(t,m,i){return t&&"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t||0,this.y=m||0,this.z=i||0),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.x-t.x)<=m*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=m*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=m*Math.max(1,Math.abs(this.z),Math.abs(t.z))},i.equals3f=function(t,m,i,a){return void 0===a&&(a=p),Math.abs(this.x-t)<=a*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-m)<=a*Math.max(1,Math.abs(this.y),Math.abs(m))&&Math.abs(this.z-i)<=a*Math.max(1,Math.abs(this.z),Math.abs(i))},i.strictEquals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},i.strictEquals3f=function(t,m,i){return this.x===t&&this.y===m&&this.z===i},i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.z.toFixed(2)+")"},i.lerp=function(t,m){return this.x+=m*(t.x-this.x),this.y+=m*(t.y-this.y),this.z+=m*(t.z-this.z),this},i.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},i.add3f=function(t,m,i){return this.x+=t,this.y+=m,this.z+=i,this},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},i.subtract3f=function(t,m,i){return this.x-=t,this.y-=m,this.z-=i,this},i.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec3.multiply for vector * vector operation"),this.x*=t,this.y*=t,this.z*=t,this},i.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec3.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this.z*=t.z,this},i.multiply3f=function(t,m,i){return this.x*=t,this.y*=m,this.z*=i,this},i.divide=function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},i.divide3f=function(t,m,i){return this.x/=t,this.y/=m,this.z/=i,this},i.negative=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},i.clampf=function(t,m){return this.x=N(this.x,t.x,m.x),this.y=N(this.y,t.y,m.y),this.z=N(this.z,t.z,m.z),this},i.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},i.cross=function(t){var m=this.x,i=this.y,a=this.z,n=t.x,s=t.y,h=t.z;return this.x=i*h-a*s,this.y=a*n-m*h,this.z=m*s-i*n,this},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},i.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z},i.normalize=function(){var t=this.x,m=this.y,i=this.z,a=t*t+m*m+i*i;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=m*a,this.z=i*a),this},i.transformMat4=function(t){var m=this.x,i=this.y,a=this.z,n=t.m03*m+t.m07*i+t.m11*a+t.m15;return n=n?1/n:1,this.x=(t.m00*m+t.m04*i+t.m08*a+t.m12)*n,this.y=(t.m01*m+t.m05*i+t.m09*a+t.m13)*n,this.z=(t.m02*m+t.m06*i+t.m10*a+t.m14)*n,this},m}(u));X.UNIT_X=Object.freeze(new X(1,0,0)),X.UNIT_Y=Object.freeze(new X(0,1,0)),X.UNIT_Z=Object.freeze(new X(0,0,1)),X.RIGHT=Object.freeze(new X(1,0,0)),X.UP=Object.freeze(new X(0,1,0)),X.FORWARD=Object.freeze(new X(0,0,-1)),X.ZERO=Object.freeze(new X(0,0,0)),X.ONE=Object.freeze(new X(1,1,1)),X.NEG_ONE=Object.freeze(new X(-1,-1,-1));var Y=new X,C=new X;function U(t,m,i){return new X(t,m,i)}e.fastDefine("cc.Vec3",X,{x:0,y:0,z:0}),r.Vec3=X,r.v3=U;var G=t("M",function(t){function m(m,i,a,n,s,h,e,r,u){var o;return void 0===m&&(m=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===h&&(h=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===u&&(u=1),o=t.call(this)||this,"object"==typeof m?(o.m00=m.m00,o.m01=m.m01,o.m02=m.m02,o.m03=m.m03,o.m04=m.m04,o.m05=m.m05,o.m06=m.m06,o.m07=m.m07,o.m08=m.m08):(o.m00=m,o.m01=i,o.m02=a,o.m03=n,o.m04=s,o.m05=h,o.m06=e,o.m07=r,o.m08=u),o}h(m,t),m.clone=function(t){return new m(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},m.copy=function(t,m){return t.m00=m.m00,t.m01=m.m01,t.m02=m.m02,t.m03=m.m03,t.m04=m.m04,t.m05=m.m05,t.m06=m.m06,t.m07=m.m07,t.m08=m.m08,t},m.set=function(t,m,i,a,n,s,h,e,r,u){return t.m00=m,t.m01=i,t.m02=a,t.m03=n,t.m04=s,t.m05=h,t.m06=e,t.m07=r,t.m08=u,t},m.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},m.transpose=function(t,m){if(t===m){var i=m.m01,a=m.m02,n=m.m05;t.m01=m.m03,t.m02=m.m06,t.m03=i,t.m05=m.m07,t.m06=a,t.m07=n}else t.m00=m.m00,t.m01=m.m03,t.m02=m.m06,t.m03=m.m01,t.m04=m.m04,t.m05=m.m07,t.m06=m.m02,t.m07=m.m05,t.m08=m.m08;return t},m.invert=function(t,m){var i=m.m00,a=m.m01,n=m.m02,s=m.m03,h=m.m04,e=m.m05,r=m.m06,u=m.m07,o=m.m08,c=o*h-e*u,y=-o*s+e*r,x=u*s-h*r,f=i*c+a*y+n*x;return 0===f?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t):(f=1/f,t.m00=c*f,t.m01=(-o*a+n*u)*f,t.m02=(e*a-n*h)*f,t.m03=y*f,t.m04=(o*i-n*r)*f,t.m05=(-e*i+n*s)*f,t.m06=x*f,t.m07=(-u*i+a*r)*f,t.m08=(h*i-a*s)*f,t)},m.determinant=function(t){var m=t.m00,i=t.m01,a=t.m02,n=t.m03,s=t.m04,h=t.m05,e=t.m06,r=t.m07,u=t.m08;return m*(u*s-h*r)+i*(-u*n+h*e)+a*(r*n-s*e)},m.multiply=function(t,m,i){var a=m.m00,n=m.m01,s=m.m02,h=m.m03,e=m.m04,r=m.m05,u=m.m06,o=m.m07,c=m.m08,y=i.m00,x=i.m01,f=i.m02,M=i.m03,l=i.m04,z=i.m05,b=i.m06,w=i.m07,v=i.m08;return t.m00=y*a+x*h+f*u,t.m01=y*n+x*e+f*o,t.m02=y*s+x*r+f*c,t.m03=M*a+l*h+z*u,t.m04=M*n+l*e+z*o,t.m05=M*s+l*r+z*c,t.m06=b*a+w*h+v*u,t.m07=b*n+w*e+v*o,t.m08=b*s+w*r+v*c,t},m.multiplyMat4=function(t,m,i){var a=m.m00,n=m.m01,s=m.m02,h=m.m03,e=m.m04,r=m.m05,u=m.m06,o=m.m07,c=m.m08,y=i.m00,x=i.m01,f=i.m02,M=i.m04,l=i.m05,z=i.m06,b=i.m08,w=i.m09,v=i.m10;return t.m00=y*a+x*h+f*u,t.m01=y*n+x*e+f*o,t.m02=y*s+x*r+f*c,t.m03=M*a+l*h+z*u,t.m04=M*n+l*e+z*o,t.m05=M*s+l*r+z*c,t.m06=b*a+w*h+v*u,t.m07=b*n+w*e+v*o,t.m08=b*s+w*r+v*c,t},m.transform=function(t,m,i){var a=m.m00,n=m.m01,s=m.m02,h=m.m03,e=m.m04,r=m.m05,u=m.m06,o=m.m07,c=m.m08,y=i.x,x=i.y;return t.m00=a,t.m01=n,t.m02=s,t.m03=h,t.m04=e,t.m05=r,t.m06=y*a+x*h+u,t.m07=y*n+x*e+o,t.m08=y*s+x*r+c,t},m.scale=function(t,m,i){var a=i.x,n=i.y;return t.m00=a*m.m00,t.m01=a*m.m01,t.m02=a*m.m02,t.m03=n*m.m03,t.m04=n*m.m04,t.m05=n*m.m05,t.m06=m.m06,t.m07=m.m07,t.m08=m.m08,t},m.rotate=function(t,m,i){var a=m.m00,n=m.m01,s=m.m02,h=m.m03,e=m.m04,r=m.m05,u=m.m06,o=m.m07,c=m.m08,y=Math.sin(i),x=Math.cos(i);return t.m00=x*a+y*h,t.m01=x*n+y*e,t.m02=x*s+y*r,t.m03=x*h-y*a,t.m04=x*e-y*n,t.m05=x*r-y*s,t.m06=u,t.m07=o,t.m08=c,t},m.fromMat4=function(t,m){return t.m00=m.m00,t.m01=m.m01,t.m02=m.m02,t.m03=m.m04,t.m04=m.m05,t.m05=m.m06,t.m06=m.m08,t.m07=m.m09,t.m08=m.m10,t},m.fromViewUp=function(t,i,a){return X.lengthSqr(i)<p*p?(m.identity(t),t):(a=a||X.UNIT_Y,X.normalize(H,X.cross(H,a,i)),X.lengthSqr(H)<p*p?(m.identity(t),t):(X.cross(Z,i,H),m.set(t,H.x,H.y,H.z,Z.x,Z.y,Z.z,i.x,i.y,i.z),t))},m.fromTranslation=function(t,m){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=1,t.m05=0,t.m06=m.x,t.m07=m.y,t.m08=1,t},m.fromScaling=function(t,m){return t.m00=m.x,t.m01=0,t.m02=0,t.m03=0,t.m04=m.y,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},m.fromRotation=function(t,m){var i=Math.sin(m),a=Math.cos(m);return t.m00=a,t.m01=i,t.m02=0,t.m03=-i,t.m04=a,t.m05=0,t.m06=0,t.m07=0,t.m08=1,t},m.fromQuat=function(t,m){var i=m.x,a=m.y,n=m.z,s=m.w,h=i+i,e=a+a,r=n+n,u=i*h,o=a*h,c=a*e,y=n*h,x=n*e,f=n*r,M=s*h,l=s*e,z=s*r;return t.m00=1-c-f,t.m03=o-z,t.m06=y+l,t.m01=o+z,t.m04=1-u-f,t.m07=x-M,t.m02=y-l,t.m05=x+M,t.m08=1-u-c,t},m.inverseTransposeMat4=function(t,m){var i=m.m00,a=m.m01,n=m.m02,s=m.m03,h=m.m04,e=m.m05,r=m.m06,u=m.m07,o=m.m08,c=m.m09,y=m.m10,x=m.m11,f=m.m12,M=m.m13,l=m.m14,z=m.m15,b=i*e-a*h,w=i*r-n*h,v=i*u-s*h,g=a*r-n*e,d=a*u-s*e,p=n*u-s*r,N=o*M-c*f,q=o*l-y*f,S=o*z-x*f,E=c*l-y*M,j=c*z-x*M,V=y*z-x*l,_=b*V-w*j+v*E+g*S-d*q+p*N;return _?(_=1/_,t.m00=(e*V-r*j+u*E)*_,t.m01=(r*S-h*V-u*q)*_,t.m02=(h*j-e*S+u*N)*_,t.m03=(n*j-a*V-s*E)*_,t.m04=(i*V-n*S+s*q)*_,t.m05=(a*S-i*j-s*N)*_,t.m06=(M*p-l*d+z*g)*_,t.m07=(l*v-f*p-z*w)*_,t.m08=(f*d-M*v+z*b)*_,t):null},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.m00,t[i+1]=m.m01,t[i+2]=m.m02,t[i+3]=m.m03,t[i+4]=m.m04,t[i+5]=m.m05,t[i+6]=m.m06,t[i+7]=m.m07,t[i+8]=m.m08,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.m00=m[i+0],t.m01=m[i+1],t.m02=m[i+2],t.m03=m[i+3],t.m04=m[i+4],t.m05=m[i+5],t.m06=m[i+6],t.m07=m[i+7],t.m08=m[i+8],t},m.add=function(t,m,i){return t.m00=m.m00+i.m00,t.m01=m.m01+i.m01,t.m02=m.m02+i.m02,t.m03=m.m03+i.m03,t.m04=m.m04+i.m04,t.m05=m.m05+i.m05,t.m06=m.m06+i.m06,t.m07=m.m07+i.m07,t.m08=m.m08+i.m08,t},m.subtract=function(t,m,i){return t.m00=m.m00-i.m00,t.m01=m.m01-i.m01,t.m02=m.m02-i.m02,t.m03=m.m03-i.m03,t.m04=m.m04-i.m04,t.m05=m.m05-i.m05,t.m06=m.m06-i.m06,t.m07=m.m07-i.m07,t.m08=m.m08-i.m08,t},m.multiplyScalar=function(t,m,i){return t.m00=m.m00*i,t.m01=m.m01*i,t.m02=m.m02*i,t.m03=m.m03*i,t.m04=m.m04*i,t.m05=m.m05*i,t.m06=m.m06*i,t.m07=m.m07*i,t.m08=m.m08*i,t},m.multiplyScalarAndAdd=function(t,m,i,a){return t.m00=i.m00*a+m.m00,t.m01=i.m01*a+m.m01,t.m02=i.m02*a+m.m02,t.m03=i.m03*a+m.m03,t.m04=i.m04*a+m.m04,t.m05=i.m05*a+m.m05,t.m06=i.m06*a+m.m06,t.m07=i.m07*a+m.m07,t.m08=i.m08*a+m.m08,t},m.strictEquals=function(t,m){return t.m00===m.m00&&t.m01===m.m01&&t.m02===m.m02&&t.m03===m.m03&&t.m04===m.m04&&t.m05===m.m05&&t.m06===m.m06&&t.m07===m.m07&&t.m08===m.m08},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.m00-m.m00)<=i*Math.max(1,Math.abs(t.m00),Math.abs(m.m00))&&Math.abs(t.m01-m.m01)<=i*Math.max(1,Math.abs(t.m01),Math.abs(m.m01))&&Math.abs(t.m02-m.m02)<=i*Math.max(1,Math.abs(t.m02),Math.abs(m.m02))&&Math.abs(t.m03-m.m03)<=i*Math.max(1,Math.abs(t.m03),Math.abs(m.m03))&&Math.abs(t.m04-m.m04)<=i*Math.max(1,Math.abs(t.m04),Math.abs(m.m04))&&Math.abs(t.m05-m.m05)<=i*Math.max(1,Math.abs(t.m05),Math.abs(m.m05))&&Math.abs(t.m06-m.m06)<=i*Math.max(1,Math.abs(t.m06),Math.abs(m.m06))&&Math.abs(t.m07-m.m07)<=i*Math.max(1,Math.abs(t.m07),Math.abs(m.m07))&&Math.abs(t.m08-m.m08)<=i*Math.max(1,Math.abs(t.m08),Math.abs(m.m08))};var i=m.prototype;return i.clone=function(){var t=this;return new m(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08)},i.set=function(t,m,i,a,n,s,h,e,r){return void 0===t&&(t=1),void 0===m&&(m=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===h&&(h=0),void 0===e&&(e=0),void 0===r&&(r=1),"object"==typeof t?(this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08):(this.m00=t,this.m01=m,this.m02=i,this.m03=a,this.m04=n,this.m05=s,this.m06=h,this.m07=e,this.m08=r),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.m00-t.m00)<=m*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=m*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=m*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=m*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=m*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=m*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=m*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=m*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=m*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))},i.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08},i.toString=function(){var t=this;return"[\n"+t.m00+", "+t.m01+", "+t.m02+",\n"+t.m03+",\n"+t.m04+", "+t.m05+",\n"+t.m06+", "+t.m07+",\n"+t.m08+"\n]"},i.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=1,this.m05=0,this.m06=0,this.m07=0,this.m08=1,this},i.transpose=function(){var t=this.m01,m=this.m02,i=this.m05;return this.m01=this.m03,this.m02=this.m06,this.m03=t,this.m05=this.m07,this.m06=m,this.m07=i,this},i.invert=function(){var t=this.m00,m=this.m01,i=this.m02,a=this.m03,n=this.m04,s=this.m05,h=this.m06,e=this.m07,r=this.m08,u=r*n-s*e,o=-r*a+s*h,c=e*a-n*h,y=t*u+m*o+i*c;return 0===y?(this.set(0,0,0,0,0,0,0,0,0),this):(y=1/y,this.m00=u*y,this.m01=(-r*m+i*e)*y,this.m02=(s*m-i*n)*y,this.m03=o*y,this.m04=(r*t-i*h)*y,this.m05=(-s*t+i*a)*y,this.m06=c*y,this.m07=(-e*t+m*h)*y,this.m08=(n*t-m*a)*y,this)},i.determinant=function(){var t=this.m00,m=this.m01,i=this.m02,a=this.m03,n=this.m04,s=this.m05,h=this.m06,e=this.m07,r=this.m08;return t*(r*n-s*e)+m*(-r*a+s*h)+i*(e*a-n*h)},i.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this},i.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this},i.multiply=function(t){var m=this.m00,i=this.m01,a=this.m02,n=this.m03,s=this.m04,h=this.m05,e=this.m06,r=this.m07,u=this.m08,o=t.m00,c=t.m01,y=t.m02,x=t.m03,f=t.m04,M=t.m05,l=t.m06,z=t.m07,b=t.m08;return this.m00=o*m+c*n+y*e,this.m01=o*i+c*s+y*r,this.m02=o*a+c*h+y*u,this.m03=x*m+f*n+M*e,this.m04=x*i+f*s+M*r,this.m05=x*a+f*h+M*u,this.m06=l*m+z*n+b*e,this.m07=l*i+z*s+b*r,this.m08=l*a+z*h+b*u,this},i.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this},i.scale=function(t){var m=t.x,i=t.y;return this.m00=m*this.m00,this.m01=m*this.m01,this.m02=m*this.m02,this.m03=i*this.m03,this.m04=i*this.m04,this.m05=i*this.m05,this.m06=this.m06,this.m07=this.m07,this.m08=this.m08,this},i.rotate=function(t){var m=this.m00,i=this.m01,a=this.m02,n=this.m03,s=this.m04,h=this.m05,e=this.m06,r=this.m07,u=this.m08,o=Math.sin(t),c=Math.cos(t);return this.m00=c*m+o*n,this.m01=c*i+o*s,this.m02=c*a+o*h,this.m03=c*n-o*m,this.m04=c*s-o*i,this.m05=c*h-o*a,this.m06=e,this.m07=r,this.m08=u,this},i.fromQuat=function(t){var m=t.x,i=t.y,a=t.z,n=t.w,s=m+m,h=i+i,e=a+a,r=m*s,u=i*s,o=i*h,c=a*s,y=a*h,x=a*e,f=n*s,M=n*h,l=n*e;return this.m00=1-o-x,this.m03=u-l,this.m06=c+M,this.m01=u+l,this.m04=1-r-x,this.m07=y-f,this.m02=c-M,this.m05=y+f,this.m08=1-r-o,this},m}(u));G.IDENTITY=Object.freeze(new G);var H=new X,Z=new X;e.fastDefine("cc.Mat3",G,{m00:1,m01:0,m02:0,m03:0,m04:1,m05:0,m06:0,m07:0,m08:1}),r.Mat3=G;var L=t("Q",function(t){function m(m,i,a,n){var s;return s=t.call(this)||this,m&&"object"==typeof m?(s.x=m.x,s.y=m.y,s.z=m.z,s.w=m.w):(s.x=m||0,s.y=i||0,s.z=a||0,s.w=null!=n?n:1),s}h(m,t),m.clone=function(t){return new m(t.x,t.y,t.z,t.w)},m.copy=function(t,m){return t.x=m.x,t.y=m.y,t.z=m.z,t.w=m.w,t},m.set=function(t,m,i,a,n){return t.x=m,t.y=i,t.z=a,t.w=n,t},m.identity=function(t){return t.x=0,t.y=0,t.z=0,t.w=1,t},m.rotationTo=function(t,i,a){var n=X.dot(i,a);return n<-.999999?(X.cross(K,X.UNIT_X,i),K.length()<1e-6&&X.cross(K,X.UNIT_Y,i),X.normalize(K,K),m.fromAxisAngle(t,K,Math.PI),t):n>.999999?(t.x=0,t.y=0,t.z=0,t.w=1,t):(X.cross(K,i,a),t.x=K.x,t.y=K.y,t.z=K.z,t.w=1+n,m.normalize(t,t))},m.getAxisAngle=function(t,m){var i=2*Math.acos(m.w),a=Math.sin(i/2);return 0!==a?(t.x=m.x/a,t.y=m.y/a,t.z=m.z/a):(t.x=1,t.y=0,t.z=0),i},m.multiply=function(t,m,i){var a=m.x*i.w+m.w*i.x+m.y*i.z-m.z*i.y,n=m.y*i.w+m.w*i.y+m.z*i.x-m.x*i.z,s=m.z*i.w+m.w*i.z+m.x*i.y-m.y*i.x,h=m.w*i.w-m.x*i.x-m.y*i.y-m.z*i.z;return t.x=a,t.y=n,t.z=s,t.w=h,t},m.multiplyScalar=function(t,m,i){return t.x=m.x*i,t.y=m.y*i,t.z=m.z*i,t.w=m.w*i,t},m.scaleAndAdd=function(t,m,i,a){return t.x=m.x+i.x*a,t.y=m.y+i.y*a,t.z=m.z+i.z*a,t.w=m.w+i.w*a,t},m.rotateX=function(t,m,i){i*=.5;var a=Math.sin(i),n=Math.cos(i),s=m.x,h=m.y,e=m.z,r=m.w;return t.x=s*n+r*a,t.y=h*n+e*a,t.z=e*n-h*a,t.w=r*n-s*a,t},m.rotateY=function(t,m,i){i*=.5;var a=Math.sin(i),n=Math.cos(i),s=m.x,h=m.y,e=m.z,r=m.w;return t.x=s*n-e*a,t.y=h*n+r*a,t.z=e*n+s*a,t.w=r*n-h*a,t},m.rotateZ=function(t,m,i){i*=.5;var a=Math.sin(i),n=Math.cos(i),s=m.x,h=m.y,e=m.z,r=m.w;return t.x=s*n+h*a,t.y=h*n-s*a,t.z=e*n+r*a,t.w=r*n-e*a,t},m.rotateAround=function(t,i,a,n){return m.invert(B,i),X.transformQuat(K,a,B),m.fromAxisAngle(B,K,n),m.multiply(t,i,B),t},m.rotateAroundLocal=function(t,i,a,n){return m.fromAxisAngle(B,a,n),m.multiply(t,i,B),t},m.calculateW=function(t,m){return t.x=m.x,t.y=m.y,t.z=m.z,t.w=Math.sqrt(Math.abs(1-m.x*m.x-m.y*m.y-m.z*m.z)),t},m.dot=function(t,m){return t.x*m.x+t.y*m.y+t.z*m.z+t.w*m.w},m.lerp=function(t,m,i,a){return t.x=m.x+a*(i.x-m.x),t.y=m.y+a*(i.y-m.y),t.z=m.z+a*(i.z-m.z),t.w=m.w+a*(i.w-m.w),t},m.slerp=function(t,m,i,a){var n=0,s=0,h=i.x,e=i.y,r=i.z,u=i.w,o=m.x*i.x+m.y*i.y+m.z*i.z+m.w*i.w;if(o<0&&(o=-o,h=-h,e=-e,r=-r,u=-u),1-o>1e-6){var c=Math.acos(o),y=Math.sin(c);n=Math.sin((1-a)*c)/y,s=Math.sin(a*c)/y}else n=1-a,s=a;return t.x=n*m.x+s*h,t.y=n*m.y+s*e,t.z=n*m.z+s*r,t.w=n*m.w+s*u,t},m.sqlerp=function(t,i,a,n,s,h){return m.slerp(B,i,s,h),m.slerp(W,a,n,h),m.slerp(t,B,W,2*h*(1-h)),t},m.invert=function(t,m){var i=m.x*m.x+m.y*m.y+m.z*m.z+m.w*m.w,a=i?1/i:0;return t.x=-m.x*a,t.y=-m.y*a,t.z=-m.z*a,t.w=m.w*a,t},m.conjugate=function(t,m){return t.x=-m.x,t.y=-m.y,t.z=-m.z,t.w=m.w,t},m.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w)},m.lengthSqr=function(t){return t.x*t.x+t.y*t.y+t.z*t.z+t.w*t.w},m.normalize=function(t,m){var i=m.x*m.x+m.y*m.y+m.z*m.z+m.w*m.w;return i>0&&(i=1/Math.sqrt(i),t.x=m.x*i,t.y=m.y*i,t.z=m.z*i,t.w=m.w*i),t},m.fromAxes=function(t,i,a,n){return G.set(J,i.x,i.y,i.z,a.x,a.y,a.z,n.x,n.y,n.z),m.normalize(t,m.fromMat3(t,J))},m.fromViewUp=function(t,i,a){return G.fromViewUp(J,i,a),m.normalize(t,m.fromMat3(t,J))},m.fromAxisAngle=function(t,m,i){i*=.5;var a=Math.sin(i);return t.x=a*m.x,t.y=a*m.y,t.z=a*m.z,t.w=Math.cos(i),t},m.fromMat3=function(t,m){var i=m.m00,a=m.m03,n=m.m06,s=m.m01,h=m.m04,e=m.m07,r=m.m02,u=m.m05,o=m.m08,c=i+h+o;if(c>0){var y=.5/Math.sqrt(c+1);t.w=.25/y,t.x=(u-e)*y,t.y=(n-r)*y,t.z=(s-a)*y}else if(i>h&&i>o){var x=2*Math.sqrt(1+i-h-o);t.w=(u-e)/x,t.x=.25*x,t.y=(a+s)/x,t.z=(n+r)/x}else if(h>o){var f=2*Math.sqrt(1+h-i-o);t.w=(n-r)/f,t.x=(a+s)/f,t.y=.25*f,t.z=(e+u)/f}else{var M=2*Math.sqrt(1+o-i-h);t.w=(s-a)/M,t.x=(n+r)/M,t.y=(e+u)/M,t.z=.25*M}return t},m.fromEuler=function(t,m,i,a){m*=$,i*=$,a*=$;var n=Math.sin(m),s=Math.cos(m),h=Math.sin(i),e=Math.cos(i),r=Math.sin(a),u=Math.cos(a);return t.x=n*e*u+s*h*r,t.y=s*h*u+n*e*r,t.z=s*e*r-n*h*u,t.w=s*e*u-n*h*r,t},m.fromAngleZ=function(t,m){return m*=$,t.x=t.y=0,t.z=Math.sin(m),t.w=Math.cos(m),t},m.toAxisX=function(t,m){var i=2*m.y,a=2*m.z;return t.x=1-i*m.y-a*m.z,t.y=i*m.x+a*m.w,t.z=a*m.x+i*m.w,t},m.toAxisY=function(t,m){var i=2*m.x,a=2*m.y,n=2*m.z;return t.x=a*m.x-n*m.w,t.y=1-i*m.x-n*m.z,t.z=n*m.y+i*m.w,t},m.toAxisZ=function(t,m){var i=2*m.x,a=2*m.y,n=2*m.z;return t.x=n*m.x-a*m.w,t.y=n*m.y-i*m.w,t.z=1-i*m.x-a*m.y,t},m.toEuler=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=m.w,e=0,r=0,u=0,o=a*n+s*h;if(o>.499999)e=0,r=q(2*Math.atan2(a,h)),u=90;else if(o<-.499999)e=0,r=-q(2*Math.atan2(a,h)),u=-90;else{var c=a*a,y=n*n,x=s*s;e=q(Math.atan2(2*a*h-2*n*s,1-2*c-2*x)),r=q(Math.atan2(2*n*h-2*a*s,1-2*y-2*x)),u=q(Math.asin(2*o)),i&&(e=-180*Math.sign(e+1e-6)+e,r=-180*Math.sign(r+1e-6)+r,u=180*Math.sign(u+1e-6)-u)}return t.x=e,t.y=r,t.z=u,t},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.x,t[i+1]=m.y,t[i+2]=m.z,t[i+3]=m.w,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.x=m[i+0],t.y=m[i+1],t.z=m[i+2],t.w=m[i+3],t},m.strictEquals=function(t,m){return t.x===m.x&&t.y===m.y&&t.z===m.z&&t.w===m.w},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.x-m.x)<=i*Math.max(1,Math.abs(t.x),Math.abs(m.x))&&Math.abs(t.y-m.y)<=i*Math.max(1,Math.abs(t.y),Math.abs(m.y))&&Math.abs(t.z-m.z)<=i*Math.max(1,Math.abs(t.z),Math.abs(m.z))&&Math.abs(t.w-m.w)<=i*Math.max(1,Math.abs(t.w),Math.abs(m.w))};var i=m.prototype;return i.clone=function(){return new m(this.x,this.y,this.z,this.w)},i.set=function(t,m,i,a){return t&&"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w):(this.x=t||0,this.y=m||0,this.z=i||0,this.w=null!=a?a:1),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.x-t.x)<=m*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=m*Math.max(1,Math.abs(this.y),Math.abs(t.y))&&Math.abs(this.z-t.z)<=m*Math.max(1,Math.abs(this.z),Math.abs(t.z))&&Math.abs(this.w-t.w)<=m*Math.max(1,Math.abs(this.w),Math.abs(t.w))},i.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},i.getEulerAngles=function(t){return m.toEuler(t,this)},i.lerp=function(t,m){return this.x+=m*(t.x-this.x),this.y+=m*(t.y-this.y),this.z+=m*(t.z-this.z),this.w+=m*(t.w-this.w),this},i.slerp=function(t,i){return m.slerp(this,this,t,i)},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},i.lengthSqr=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},m}(u));L.IDENTITY=Object.freeze(new L);var B=new L,W=new L,K=new X,J=new G,$=.5*Math.PI/180;function tt(t,m,i,a){return void 0===t&&(t=0),void 0===m&&(m=0),void 0===i&&(i=0),void 0===a&&(a=1),new L(t,m,i,a)}e.fastDefine("cc.Quat",L,{x:0,y:0,z:0,w:1}),r.Quat=L,r.quat=tt;var mt=t("U",Object.freeze([Object.freeze([1,0,0,1]),Object.freeze([0,1,-1,0]),Object.freeze([-1,0,0,-1]),Object.freeze([0,-1,1,0])])),it=t("e",function(t){function m(m,i,a,n,s,h,e,r,u,o,c,y,x,f,M,l){var z;return void 0===m&&(m=1),void 0===i&&(i=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===s&&(s=0),void 0===h&&(h=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===u&&(u=0),void 0===o&&(o=0),void 0===c&&(c=1),void 0===y&&(y=0),void 0===x&&(x=0),void 0===f&&(f=0),void 0===M&&(M=0),void 0===l&&(l=1),(z=t.call(this)||this).m00=void 0,z.m01=void 0,z.m02=void 0,z.m03=void 0,z.m04=void 0,z.m05=void 0,z.m06=void 0,z.m07=void 0,z.m08=void 0,z.m09=void 0,z.m10=void 0,z.m11=void 0,z.m12=void 0,z.m13=void 0,z.m14=void 0,z.m15=void 0,"object"==typeof m?(z.m00=m.m00,z.m01=m.m01,z.m02=m.m02,z.m03=m.m03,z.m04=m.m04,z.m05=m.m05,z.m06=m.m06,z.m07=m.m07,z.m08=m.m08,z.m09=m.m09,z.m10=m.m10,z.m11=m.m11,z.m12=m.m12,z.m13=m.m13,z.m14=m.m14,z.m15=m.m15):(z.m00=m,z.m01=i,z.m02=a,z.m03=n,z.m04=s,z.m05=h,z.m06=e,z.m07=r,z.m08=u,z.m09=o,z.m10=c,z.m11=y,z.m12=x,z.m13=f,z.m14=M,z.m15=l),z}h(m,t),m.clone=function(t){return new m(t.m00,t.m01,t.m02,t.m03,t.m04,t.m05,t.m06,t.m07,t.m08,t.m09,t.m10,t.m11,t.m12,t.m13,t.m14,t.m15)},m.copy=function(t,m){return t.m00=m.m00,t.m01=m.m01,t.m02=m.m02,t.m03=m.m03,t.m04=m.m04,t.m05=m.m05,t.m06=m.m06,t.m07=m.m07,t.m08=m.m08,t.m09=m.m09,t.m10=m.m10,t.m11=m.m11,t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15,t},m.set=function(t,m,i,a,n,s,h,e,r,u,o,c,y,x,f,M,l){return t.m00=m,t.m01=i,t.m02=a,t.m03=n,t.m04=s,t.m05=h,t.m06=e,t.m07=r,t.m08=u,t.m09=o,t.m10=c,t.m11=y,t.m12=x,t.m13=f,t.m14=M,t.m15=l,t},m.identity=function(t){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.transpose=function(t,m){if(t===m){var i=m.m01,a=m.m02,n=m.m03,s=m.m06,h=m.m07,e=m.m11;t.m01=m.m04,t.m02=m.m08,t.m03=m.m12,t.m04=i,t.m06=m.m09,t.m07=m.m13,t.m08=a,t.m09=s,t.m11=m.m14,t.m12=n,t.m13=h,t.m14=e}else t.m00=m.m00,t.m01=m.m04,t.m02=m.m08,t.m03=m.m12,t.m04=m.m01,t.m05=m.m05,t.m06=m.m09,t.m07=m.m13,t.m08=m.m02,t.m09=m.m06,t.m10=m.m10,t.m11=m.m14,t.m12=m.m03,t.m13=m.m07,t.m14=m.m11,t.m15=m.m15;return t},m.invert=function(t,m){var i=m.m00,a=m.m01,n=m.m02,s=m.m03,h=m.m04,e=m.m05,r=m.m06,u=m.m07,o=m.m08,c=m.m09,y=m.m10,x=m.m11,f=m.m12,M=m.m13,l=m.m14,z=m.m15,b=i*e-a*h,w=i*r-n*h,v=i*u-s*h,g=a*r-n*e,d=a*u-s*e,p=n*u-s*r,N=o*M-c*f,q=o*l-y*f,S=o*z-x*f,E=c*l-y*M,j=c*z-x*M,V=y*z-x*l,_=b*V-w*j+v*E+g*S-d*q+p*N;return 0===_?(t.m00=0,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=0,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=0,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=0,t):(_=1/_,t.m00=(e*V-r*j+u*E)*_,t.m01=(n*j-a*V-s*E)*_,t.m02=(M*p-l*d+z*g)*_,t.m03=(y*d-c*p-x*g)*_,t.m04=(r*S-h*V-u*q)*_,t.m05=(i*V-n*S+s*q)*_,t.m06=(l*v-f*p-z*w)*_,t.m07=(o*p-y*v+x*w)*_,t.m08=(h*j-e*S+u*N)*_,t.m09=(a*S-i*j-s*N)*_,t.m10=(f*d-M*v+z*b)*_,t.m11=(c*v-o*d-x*b)*_,t.m12=(e*q-h*E-r*N)*_,t.m13=(i*E-a*q+n*N)*_,t.m14=(M*w-f*g-l*b)*_,t.m15=(o*g-c*w+y*b)*_,t)},m.determinant=function(t){var m=t.m00,i=t.m01,a=t.m02,n=t.m03,s=t.m04,h=t.m05,e=t.m06,r=t.m07,u=t.m08,o=t.m09,c=t.m10,y=t.m11,x=t.m12,f=t.m13,M=t.m14,l=t.m15;return(m*h-i*s)*(c*l-y*M)-(m*e-a*s)*(o*l-y*f)+(m*r-n*s)*(o*M-c*f)+(i*e-a*h)*(u*l-y*x)-(i*r-n*h)*(u*M-c*x)+(a*r-n*e)*(u*f-o*x)},m.multiply=function(t,m,i){var a=m.m00,n=m.m01,s=m.m02,h=m.m03,e=m.m04,r=m.m05,u=m.m06,o=m.m07,c=m.m08,y=m.m09,x=m.m10,f=m.m11,M=m.m12,l=m.m13,z=m.m14,b=m.m15,w=i.m00,v=i.m01,g=i.m02,d=i.m03;return t.m00=w*a+v*e+g*c+d*M,t.m01=w*n+v*r+g*y+d*l,t.m02=w*s+v*u+g*x+d*z,t.m03=w*h+v*o+g*f+d*b,w=i.m04,v=i.m05,g=i.m06,d=i.m07,t.m04=w*a+v*e+g*c+d*M,t.m05=w*n+v*r+g*y+d*l,t.m06=w*s+v*u+g*x+d*z,t.m07=w*h+v*o+g*f+d*b,w=i.m08,v=i.m09,g=i.m10,d=i.m11,t.m08=w*a+v*e+g*c+d*M,t.m09=w*n+v*r+g*y+d*l,t.m10=w*s+v*u+g*x+d*z,t.m11=w*h+v*o+g*f+d*b,w=i.m12,v=i.m13,g=i.m14,d=i.m15,t.m12=w*a+v*e+g*c+d*M,t.m13=w*n+v*r+g*y+d*l,t.m14=w*s+v*u+g*x+d*z,t.m15=w*h+v*o+g*f+d*b,t},m.transform=function(t,m,i){var a=i.x,n=i.y,s=i.z;if(m===t)t.m12=m.m00*a+m.m04*n+m.m08*s+m.m12,t.m13=m.m01*a+m.m05*n+m.m09*s+m.m13,t.m14=m.m02*a+m.m06*n+m.m10*s+m.m14,t.m15=m.m03*a+m.m07*n+m.m11*s+m.m15;else{var h=m.m00,e=m.m01,r=m.m02,u=m.m03,o=m.m04,c=m.m05,y=m.m06,x=m.m07,f=m.m08,M=m.m09,l=m.m10,z=m.m11;m.m12,m.m13,m.m14,m.m15,t.m00=h,t.m01=e,t.m02=r,t.m03=u,t.m04=o,t.m05=c,t.m06=y,t.m07=x,t.m08=f,t.m09=M,t.m10=l,t.m11=z,t.m12=h*a+o*n+f*s+m.m12,t.m13=e*a+c*n+M*s+m.m13,t.m14=r*a+y*n+l*s+m.m14,t.m15=u*a+x*n+z*s+m.m15}return t},m.translate=function(t,m,i){return m===t?(t.m12+=i.x,t.m13+=i.y,t.m14+=i.z):(t.m00=m.m00,t.m01=m.m01,t.m02=m.m02,t.m03=m.m03,t.m04=m.m04,t.m05=m.m05,t.m06=m.m06,t.m07=m.m07,t.m08=m.m08,t.m09=m.m09,t.m10=m.m10,t.m11=m.m11,t.m12+=i.x,t.m13+=i.y,t.m14+=i.z,t.m15=m.m15),t},m.scale=function(t,m,i){var a=i.x,n=i.y,s=i.z;return t.m00=m.m00*a,t.m01=m.m01*a,t.m02=m.m02*a,t.m03=m.m03*a,t.m04=m.m04*n,t.m05=m.m05*n,t.m06=m.m06*n,t.m07=m.m07*n,t.m08=m.m08*s,t.m09=m.m09*s,t.m10=m.m10*s,t.m11=m.m11*s,t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15,t},m.rotate=function(t,m,i,a){var n=a.x,s=a.y,h=a.z,e=Math.sqrt(n*n+s*s+h*h);if(Math.abs(e)<p)return null;n*=e=1/e,s*=e,h*=e;var r=Math.sin(i),u=Math.cos(i),o=1-u,c=m.m00,y=m.m01,x=m.m02,f=m.m03,M=m.m04,l=m.m05,z=m.m06,b=m.m07,w=m.m08,v=m.m09,g=m.m10,d=m.m11,N=n*n*o+u,q=s*n*o+h*r,S=h*n*o-s*r,E=n*s*o-h*r,j=s*s*o+u,V=h*s*o+n*r,_=n*h*o+s*r,O=s*h*o-n*r,A=h*h*o+u;return t.m00=c*N+M*q+w*S,t.m01=y*N+l*q+v*S,t.m02=x*N+z*q+g*S,t.m03=f*N+b*q+d*S,t.m04=c*E+M*j+w*V,t.m05=y*E+l*j+v*V,t.m06=x*E+z*j+g*V,t.m07=f*E+b*j+d*V,t.m08=c*_+M*O+w*A,t.m09=y*_+l*O+v*A,t.m10=x*_+z*O+g*A,t.m11=f*_+b*O+d*A,m!==t&&(t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15),t},m.rotateX=function(t,m,i){var a=Math.sin(i),n=Math.cos(i),s=m.m04,h=m.m05,e=m.m06,r=m.m07,u=m.m08,o=m.m09,c=m.m10,y=m.m11;return m!==t&&(t.m00=m.m00,t.m01=m.m01,t.m02=m.m02,t.m03=m.m03,t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15),t.m04=s*n+u*a,t.m05=h*n+o*a,t.m06=e*n+c*a,t.m07=r*n+y*a,t.m08=u*n-s*a,t.m09=o*n-h*a,t.m10=c*n-e*a,t.m11=y*n-r*a,t},m.rotateY=function(t,m,i){var a=Math.sin(i),n=Math.cos(i),s=m.m00,h=m.m01,e=m.m02,r=m.m03,u=m.m08,o=m.m09,c=m.m10,y=m.m11;return m!==t&&(t.m04=m.m04,t.m05=m.m05,t.m06=m.m06,t.m07=m.m07,t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15),t.m00=s*n-u*a,t.m01=h*n-o*a,t.m02=e*n-c*a,t.m03=r*n-y*a,t.m08=s*a+u*n,t.m09=h*a+o*n,t.m10=e*a+c*n,t.m11=r*a+y*n,t},m.rotateZ=function(t,m,i){var a=Math.sin(i),n=Math.cos(i),s=m.m00,h=m.m01,e=m.m02,r=m.m03,u=m.m04,o=m.m05,c=m.m06,y=m.m07;return m!==t&&(t.m08=m.m08,t.m09=m.m09,t.m10=m.m10,t.m11=m.m11,t.m12=m.m12,t.m13=m.m13,t.m14=m.m14,t.m15=m.m15),t.m00=s*n+u*a,t.m01=h*n+o*a,t.m02=e*n+c*a,t.m03=r*n+y*a,t.m04=u*n-s*a,t.m05=o*n-h*a,t.m06=c*n-e*a,t.m07=y*n-r*a,t},m.fromTranslation=function(t,m){return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=m.x,t.m13=m.y,t.m14=m.z,t.m15=1,t},m.fromScaling=function(t,m){return t.m00=m.x,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=m.y,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=m.z,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.fromRotation=function(t,m,i){var a=i.x,n=i.y,s=i.z,h=Math.sqrt(a*a+n*n+s*s);if(Math.abs(h)<p)return null;a*=h=1/h,n*=h,s*=h;var e=Math.sin(m),r=Math.cos(m),u=1-r;return t.m00=a*a*u+r,t.m01=n*a*u+s*e,t.m02=s*a*u-n*e,t.m03=0,t.m04=a*n*u-s*e,t.m05=n*n*u+r,t.m06=s*n*u+a*e,t.m07=0,t.m08=a*s*u+n*e,t.m09=n*s*u-a*e,t.m10=s*s*u+r,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.fromXRotation=function(t,m){var i=Math.sin(m),a=Math.cos(m);return t.m00=1,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=a,t.m06=i,t.m07=0,t.m08=0,t.m09=-i,t.m10=a,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.fromYRotation=function(t,m){var i=Math.sin(m),a=Math.cos(m);return t.m00=a,t.m01=0,t.m02=-i,t.m03=0,t.m04=0,t.m05=1,t.m06=0,t.m07=0,t.m08=i,t.m09=0,t.m10=a,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.fromZRotation=function(t,m){var i=Math.sin(m),a=Math.cos(m);return t.m00=a,t.m01=i,t.m02=0,t.m03=0,t.m04=-i,t.m05=a,t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=1,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.fromRT=function(t,m,i){var a=m.x,n=m.y,s=m.z,h=m.w,e=a+a,r=n+n,u=s+s,o=a*e,c=a*r,y=a*u,x=n*r,f=n*u,M=s*u,l=h*e,z=h*r,b=h*u;return t.m00=1-(x+M),t.m01=c+b,t.m02=y-z,t.m03=0,t.m04=c-b,t.m05=1-(o+M),t.m06=f+l,t.m07=0,t.m08=y+z,t.m09=f-l,t.m10=1-(o+x),t.m11=0,t.m12=i.x,t.m13=i.y,t.m14=i.z,t.m15=1,t},m.getTranslation=function(t,m){return t.x=m.m12,t.y=m.m13,t.z=m.m14,t},m.getScaling=function(t,m){var i=nt.m00=m.m00,a=nt.m01=m.m01,n=nt.m02=m.m02,s=nt.m03=m.m04,h=nt.m04=m.m05,e=nt.m05=m.m06,r=nt.m06=m.m08,u=nt.m07=m.m09,o=nt.m08=m.m10;return t.x=Math.sqrt(i*i+a*a+n*n),t.y=Math.sqrt(s*s+h*h+e*e),t.z=Math.sqrt(r*r+u*u+o*o),G.determinant(nt)<0&&(t.x*=-1),t},m.getRotation=function(t,m){var i=m.m00+m.m05+m.m10,a=0;return i>0?(a=2*Math.sqrt(i+1),t.w=.25*a,t.x=(m.m06-m.m09)/a,t.y=(m.m08-m.m02)/a,t.z=(m.m01-m.m04)/a):m.m00>m.m05&&m.m00>m.m10?(a=2*Math.sqrt(1+m.m00-m.m05-m.m10),t.w=(m.m06-m.m09)/a,t.x=.25*a,t.y=(m.m01+m.m04)/a,t.z=(m.m08+m.m02)/a):m.m05>m.m10?(a=2*Math.sqrt(1+m.m05-m.m00-m.m10),t.w=(m.m08-m.m02)/a,t.x=(m.m01+m.m04)/a,t.y=.25*a,t.z=(m.m06+m.m09)/a):(a=2*Math.sqrt(1+m.m10-m.m00-m.m05),t.w=(m.m01-m.m04)/a,t.x=(m.m08+m.m02)/a,t.y=(m.m06+m.m09)/a,t.z=.25*a),t},m.toRTS=function(t,m,i,a){a.x=X.set(at,t.m00,t.m01,t.m02).length(),nt.m00=t.m00/a.x,nt.m01=t.m01/a.x,nt.m02=t.m02/a.x,a.y=X.set(at,t.m04,t.m05,t.m06).length(),nt.m03=t.m04/a.y,nt.m04=t.m05/a.y,nt.m05=t.m06/a.y,a.z=X.set(at,t.m08,t.m09,t.m10).length(),nt.m06=t.m08/a.z,nt.m07=t.m09/a.z,nt.m08=t.m10/a.z,G.determinant(nt)<0&&(a.x*=-1,nt.m00*=-1,nt.m01*=-1,nt.m02*=-1),L.fromMat3(m,nt),X.set(i,t.m12,t.m13,t.m14)},m.fromRTS=function(t,m,i,a){var n=m.x,s=m.y,h=m.z,e=m.w,r=n+n,u=s+s,o=h+h,c=n*r,y=n*u,x=n*o,f=s*u,M=s*o,l=h*o,z=e*r,b=e*u,w=e*o,v=a.x,g=a.y,d=a.z;return t.m00=(1-(f+l))*v,t.m01=(y+w)*v,t.m02=(x-b)*v,t.m03=0,t.m04=(y-w)*g,t.m05=(1-(c+l))*g,t.m06=(M+z)*g,t.m07=0,t.m08=(x+b)*d,t.m09=(M-z)*d,t.m10=(1-(c+f))*d,t.m11=0,t.m12=i.x,t.m13=i.y,t.m14=i.z,t.m15=1,t},m.fromRTSOrigin=function(t,m,i,a,n){var s=m.x,h=m.y,e=m.z,r=m.w,u=s+s,o=h+h,c=e+e,y=s*u,x=s*o,f=s*c,M=h*o,l=h*c,z=e*c,b=r*u,w=r*o,v=r*c,g=a.x,d=a.y,p=a.z,N=n.x,q=n.y,S=n.z;return t.m00=(1-(M+z))*g,t.m01=(x+v)*g,t.m02=(f-w)*g,t.m03=0,t.m04=(x-v)*d,t.m05=(1-(y+z))*d,t.m06=(l+b)*d,t.m07=0,t.m08=(f+w)*p,t.m09=(l-b)*p,t.m10=(1-(y+M))*p,t.m11=0,t.m12=i.x+N-(t.m00*N+t.m04*q+t.m08*S),t.m13=i.y+q-(t.m01*N+t.m05*q+t.m09*S),t.m14=i.z+S-(t.m02*N+t.m06*q+t.m10*S),t.m15=1,t},m.fromQuat=function(t,m){var i=m.x,a=m.y,n=m.z,s=m.w,h=i+i,e=a+a,r=n+n,u=i*h,o=a*h,c=a*e,y=n*h,x=n*e,f=n*r,M=s*h,l=s*e,z=s*r;return t.m00=1-c-f,t.m01=o+z,t.m02=y-l,t.m03=0,t.m04=o-z,t.m05=1-u-f,t.m06=x+M,t.m07=0,t.m08=y+l,t.m09=x-M,t.m10=1-u-c,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t},m.frustum=function(t,m,i,a,n,s,h){var e=1/(i-m),r=1/(n-a),u=1/(s-h);return t.m00=2*s*e,t.m01=0,t.m02=0,t.m03=0,t.m04=0,t.m05=2*s*r,t.m06=0,t.m07=0,t.m08=(i+m)*e,t.m09=(n+a)*r,t.m10=(h+s)*u,t.m11=-1,t.m12=0,t.m13=0,t.m14=h*s*2*u,t.m15=0,t},m.perspective=function(t,m,i,a,n,s,h,e,r){void 0===s&&(s=!0),void 0===h&&(h=-1),void 0===e&&(e=1),void 0===r&&(r=0);var u=1/Math.tan(m/2),o=1/(a-n),c=s?u/i:u,y=(s?u:u*i)*e,x=mt[r];return t.m00=c*x[0],t.m01=c*x[1],t.m02=0,t.m03=0,t.m04=y*x[2],t.m05=y*x[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=(n-h*a)*o,t.m11=-1,t.m12=0,t.m13=0,t.m14=n*a*o*(1-h),t.m15=0,t},m.ortho=function(t,m,i,a,n,s,h,e,r,u){void 0===e&&(e=-1),void 0===r&&(r=1),void 0===u&&(u=0);var o=1/(m-i),c=1/(a-n)*r,y=1/(s-h),x=-2*o,f=-2*c,M=(m+i)*o,l=(n+a)*c,z=mt[u];return t.m00=x*z[0],t.m01=x*z[1],t.m02=0,t.m03=0,t.m04=f*z[2],t.m05=f*z[3],t.m06=0,t.m07=0,t.m08=0,t.m09=0,t.m10=y*(1-e),t.m11=0,t.m12=M*z[0]+l*z[2],t.m13=M*z[1]+l*z[3],t.m14=(s-e*h)*y,t.m15=1,t},m.lookAt=function(t,m,i,a){var n=m.x,s=m.y,h=m.z,e=a.x,r=a.y,u=a.z,o=n-i.x,c=s-i.y,y=h-i.z,x=1/Math.sqrt(o*o+c*c+y*y),f=r*(y*=x)-u*(c*=x),M=u*(o*=x)-e*y,l=e*c-r*o,z=c*(l*=x=1/Math.sqrt(f*f+M*M+l*l))-y*(M*=x),b=y*(f*=x)-o*l,w=o*M-c*f;return t.m00=f,t.m01=z,t.m02=o,t.m03=0,t.m04=M,t.m05=b,t.m06=c,t.m07=0,t.m08=l,t.m09=w,t.m10=y,t.m11=0,t.m12=-(f*n+M*s+l*h),t.m13=-(z*n+b*s+w*h),t.m14=-(o*n+c*s+y*h),t.m15=1,t},m.inverseTranspose=function(t,m){var i=m.m00,a=m.m01,n=m.m02,s=m.m03,h=m.m04,e=m.m05,r=m.m06,u=m.m07,o=m.m08,c=m.m09,y=m.m10,x=m.m11,f=m.m12,M=m.m13,l=m.m14,z=m.m15,b=i*e-a*h,w=i*r-n*h,v=i*u-s*h,g=a*r-n*e,d=a*u-s*e,p=n*u-s*r,N=o*M-c*f,q=o*l-y*f,S=o*z-x*f,E=c*l-y*M,j=c*z-x*M,V=y*z-x*l,_=b*V-w*j+v*E+g*S-d*q+p*N;return _?(_=1/_,t.m00=(e*V-r*j+u*E)*_,t.m01=(r*S-h*V-u*q)*_,t.m02=(h*j-e*S+u*N)*_,t.m03=0,t.m04=(n*j-a*V-s*E)*_,t.m05=(i*V-n*S+s*q)*_,t.m06=(a*S-i*j-s*N)*_,t.m07=0,t.m08=(M*p-l*d+z*g)*_,t.m09=(l*v-f*p-z*w)*_,t.m10=(f*d-M*v+z*b)*_,t.m11=0,t.m12=0,t.m13=0,t.m14=0,t.m15=1,t):null},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.m00,t[i+1]=m.m01,t[i+2]=m.m02,t[i+3]=m.m03,t[i+4]=m.m04,t[i+5]=m.m05,t[i+6]=m.m06,t[i+7]=m.m07,t[i+8]=m.m08,t[i+9]=m.m09,t[i+10]=m.m10,t[i+11]=m.m11,t[i+12]=m.m12,t[i+13]=m.m13,t[i+14]=m.m14,t[i+15]=m.m15,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.m00=m[i+0],t.m01=m[i+1],t.m02=m[i+2],t.m03=m[i+3],t.m04=m[i+4],t.m05=m[i+5],t.m06=m[i+6],t.m07=m[i+7],t.m08=m[i+8],t.m09=m[i+9],t.m10=m[i+10],t.m11=m[i+11],t.m12=m[i+12],t.m13=m[i+13],t.m14=m[i+14],t.m15=m[i+15],t},m.add=function(t,m,i){return t.m00=m.m00+i.m00,t.m01=m.m01+i.m01,t.m02=m.m02+i.m02,t.m03=m.m03+i.m03,t.m04=m.m04+i.m04,t.m05=m.m05+i.m05,t.m06=m.m06+i.m06,t.m07=m.m07+i.m07,t.m08=m.m08+i.m08,t.m09=m.m09+i.m09,t.m10=m.m10+i.m10,t.m11=m.m11+i.m11,t.m12=m.m12+i.m12,t.m13=m.m13+i.m13,t.m14=m.m14+i.m14,t.m15=m.m15+i.m15,t},m.subtract=function(t,m,i){return t.m00=m.m00-i.m00,t.m01=m.m01-i.m01,t.m02=m.m02-i.m02,t.m03=m.m03-i.m03,t.m04=m.m04-i.m04,t.m05=m.m05-i.m05,t.m06=m.m06-i.m06,t.m07=m.m07-i.m07,t.m08=m.m08-i.m08,t.m09=m.m09-i.m09,t.m10=m.m10-i.m10,t.m11=m.m11-i.m11,t.m12=m.m12-i.m12,t.m13=m.m13-i.m13,t.m14=m.m14-i.m14,t.m15=m.m15-i.m15,t},m.multiplyScalar=function(t,m,i){return t.m00=m.m00*i,t.m01=m.m01*i,t.m02=m.m02*i,t.m03=m.m03*i,t.m04=m.m04*i,t.m05=m.m05*i,t.m06=m.m06*i,t.m07=m.m07*i,t.m08=m.m08*i,t.m09=m.m09*i,t.m10=m.m10*i,t.m11=m.m11*i,t.m12=m.m12*i,t.m13=m.m13*i,t.m14=m.m14*i,t.m15=m.m15*i,t},m.multiplyScalarAndAdd=function(t,m,i,a){return t.m00=m.m00+i.m00*a,t.m01=m.m01+i.m01*a,t.m02=m.m02+i.m02*a,t.m03=m.m03+i.m03*a,t.m04=m.m04+i.m04*a,t.m05=m.m05+i.m05*a,t.m06=m.m06+i.m06*a,t.m07=m.m07+i.m07*a,t.m08=m.m08+i.m08*a,t.m09=m.m09+i.m09*a,t.m10=m.m10+i.m10*a,t.m11=m.m11+i.m11*a,t.m12=m.m12+i.m12*a,t.m13=m.m13+i.m13*a,t.m14=m.m14+i.m14*a,t.m15=m.m15+i.m15*a,t},m.strictEquals=function(t,m){return t.m00===m.m00&&t.m01===m.m01&&t.m02===m.m02&&t.m03===m.m03&&t.m04===m.m04&&t.m05===m.m05&&t.m06===m.m06&&t.m07===m.m07&&t.m08===m.m08&&t.m09===m.m09&&t.m10===m.m10&&t.m11===m.m11&&t.m12===m.m12&&t.m13===m.m13&&t.m14===m.m14&&t.m15===m.m15},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.m00-m.m00)<=i*Math.max(1,Math.abs(t.m00),Math.abs(m.m00))&&Math.abs(t.m01-m.m01)<=i*Math.max(1,Math.abs(t.m01),Math.abs(m.m01))&&Math.abs(t.m02-m.m02)<=i*Math.max(1,Math.abs(t.m02),Math.abs(m.m02))&&Math.abs(t.m03-m.m03)<=i*Math.max(1,Math.abs(t.m03),Math.abs(m.m03))&&Math.abs(t.m04-m.m04)<=i*Math.max(1,Math.abs(t.m04),Math.abs(m.m04))&&Math.abs(t.m05-m.m05)<=i*Math.max(1,Math.abs(t.m05),Math.abs(m.m05))&&Math.abs(t.m06-m.m06)<=i*Math.max(1,Math.abs(t.m06),Math.abs(m.m06))&&Math.abs(t.m07-m.m07)<=i*Math.max(1,Math.abs(t.m07),Math.abs(m.m07))&&Math.abs(t.m08-m.m08)<=i*Math.max(1,Math.abs(t.m08),Math.abs(m.m08))&&Math.abs(t.m09-m.m09)<=i*Math.max(1,Math.abs(t.m09),Math.abs(m.m09))&&Math.abs(t.m10-m.m10)<=i*Math.max(1,Math.abs(t.m10),Math.abs(m.m10))&&Math.abs(t.m11-m.m11)<=i*Math.max(1,Math.abs(t.m11),Math.abs(m.m11))&&Math.abs(t.m12-m.m12)<=i*Math.max(1,Math.abs(t.m12),Math.abs(m.m12))&&Math.abs(t.m13-m.m13)<=i*Math.max(1,Math.abs(t.m13),Math.abs(m.m13))&&Math.abs(t.m14-m.m14)<=i*Math.max(1,Math.abs(t.m14),Math.abs(m.m14))&&Math.abs(t.m15-m.m15)<=i*Math.max(1,Math.abs(t.m15),Math.abs(m.m15))};var i=m.prototype;return i.clone=function(){return new m(this.m00,this.m01,this.m02,this.m03,this.m04,this.m05,this.m06,this.m07,this.m08,this.m09,this.m10,this.m11,this.m12,this.m13,this.m14,this.m15)},i.set=function(t,m,i,a,n,s,h,e,r,u,o,c,y,x,f,M){return void 0===t&&(t=1),void 0===m&&(m=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===n&&(n=0),void 0===s&&(s=1),void 0===h&&(h=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===u&&(u=0),void 0===o&&(o=1),void 0===c&&(c=0),void 0===y&&(y=0),void 0===x&&(x=0),void 0===f&&(f=0),void 0===M&&(M=1),"object"==typeof t?(this.m01=t.m01,this.m02=t.m02,this.m03=t.m03,this.m04=t.m04,this.m05=t.m05,this.m06=t.m06,this.m07=t.m07,this.m08=t.m08,this.m09=t.m09,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m15=t.m15,this.m00=t.m00):(this.m01=m,this.m02=i,this.m03=a,this.m04=n,this.m05=s,this.m06=h,this.m07=e,this.m08=r,this.m09=u,this.m10=o,this.m11=c,this.m12=y,this.m13=x,this.m14=f,this.m15=M,this.m00=t),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.m00-t.m00)<=m*Math.max(1,Math.abs(this.m00),Math.abs(t.m00))&&Math.abs(this.m01-t.m01)<=m*Math.max(1,Math.abs(this.m01),Math.abs(t.m01))&&Math.abs(this.m02-t.m02)<=m*Math.max(1,Math.abs(this.m02),Math.abs(t.m02))&&Math.abs(this.m03-t.m03)<=m*Math.max(1,Math.abs(this.m03),Math.abs(t.m03))&&Math.abs(this.m04-t.m04)<=m*Math.max(1,Math.abs(this.m04),Math.abs(t.m04))&&Math.abs(this.m05-t.m05)<=m*Math.max(1,Math.abs(this.m05),Math.abs(t.m05))&&Math.abs(this.m06-t.m06)<=m*Math.max(1,Math.abs(this.m06),Math.abs(t.m06))&&Math.abs(this.m07-t.m07)<=m*Math.max(1,Math.abs(this.m07),Math.abs(t.m07))&&Math.abs(this.m08-t.m08)<=m*Math.max(1,Math.abs(this.m08),Math.abs(t.m08))&&Math.abs(this.m09-t.m09)<=m*Math.max(1,Math.abs(this.m09),Math.abs(t.m09))&&Math.abs(this.m10-t.m10)<=m*Math.max(1,Math.abs(this.m10),Math.abs(t.m10))&&Math.abs(this.m11-t.m11)<=m*Math.max(1,Math.abs(this.m11),Math.abs(t.m11))&&Math.abs(this.m12-t.m12)<=m*Math.max(1,Math.abs(this.m12),Math.abs(t.m12))&&Math.abs(this.m13-t.m13)<=m*Math.max(1,Math.abs(this.m13),Math.abs(t.m13))&&Math.abs(this.m14-t.m14)<=m*Math.max(1,Math.abs(this.m14),Math.abs(t.m14))&&Math.abs(this.m15-t.m15)<=m*Math.max(1,Math.abs(this.m15),Math.abs(t.m15))},i.strictEquals=function(t){return this.m00===t.m00&&this.m01===t.m01&&this.m02===t.m02&&this.m03===t.m03&&this.m04===t.m04&&this.m05===t.m05&&this.m06===t.m06&&this.m07===t.m07&&this.m08===t.m08&&this.m09===t.m09&&this.m10===t.m10&&this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m14===t.m14&&this.m15===t.m15},i.toString=function(){return"[\n"+this.m00+", "+this.m01+", "+this.m02+", "+this.m03+",\n"+this.m04+", "+this.m05+", "+this.m06+", "+this.m07+",\n"+this.m08+", "+this.m09+", "+this.m10+", "+this.m11+",\n"+this.m12+", "+this.m13+", "+this.m14+", "+this.m15+"\n]"},i.identity=function(){return this.m00=1,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=1,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=1,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},i.zero=function(){return this.m00=0,this.m01=0,this.m02=0,this.m03=0,this.m04=0,this.m05=0,this.m06=0,this.m07=0,this.m08=0,this.m09=0,this.m10=0,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=0,this},i.transpose=function(){var t=this.m01,m=this.m02,i=this.m03,a=this.m06,n=this.m07,s=this.m11;return this.m01=this.m04,this.m02=this.m08,this.m03=this.m12,this.m04=t,this.m06=this.m09,this.m07=this.m13,this.m08=m,this.m09=a,this.m11=this.m14,this.m12=i,this.m13=n,this.m14=s,this},i.invert=function(){var t=this.m00,m=this.m01,i=this.m02,a=this.m03,n=this.m04,s=this.m05,h=this.m06,e=this.m07,r=this.m08,u=this.m09,o=this.m10,c=this.m11,y=this.m12,x=this.m13,f=this.m14,M=this.m15,l=t*s-m*n,z=t*h-i*n,b=t*e-a*n,w=m*h-i*s,v=m*e-a*s,g=i*e-a*h,d=r*x-u*y,p=r*f-o*y,N=r*M-c*y,q=u*f-o*x,S=u*M-c*x,E=o*M-c*f,j=l*E-z*S+b*q+w*N-v*p+g*d;return 0===j?(this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),this):(j=1/j,this.m00=(s*E-h*S+e*q)*j,this.m01=(i*S-m*E-a*q)*j,this.m02=(x*g-f*v+M*w)*j,this.m03=(o*v-u*g-c*w)*j,this.m04=(h*N-n*E-e*p)*j,this.m05=(t*E-i*N+a*p)*j,this.m06=(f*b-y*g-M*z)*j,this.m07=(r*g-o*b+c*z)*j,this.m08=(n*S-s*N+e*d)*j,this.m09=(m*N-t*S-a*d)*j,this.m10=(y*v-x*b+M*l)*j,this.m11=(u*b-r*v-c*l)*j,this.m12=(s*p-n*q-h*d)*j,this.m13=(t*q-m*p+i*d)*j,this.m14=(x*z-y*w-f*l)*j,this.m15=(r*w-u*z+o*l)*j,this)},i.determinant=function(){var t=this.m00,m=this.m01,i=this.m02,a=this.m03,n=this.m04,s=this.m05,h=this.m06,e=this.m07,r=this.m08,u=this.m09,o=this.m10,c=this.m11,y=this.m12,x=this.m13,f=this.m14,M=this.m15;return(t*s-m*n)*(o*M-c*f)-(t*h-i*n)*(u*M-c*x)+(t*e-a*n)*(u*f-o*x)+(m*h-i*s)*(r*M-c*y)-(m*e-a*s)*(r*f-o*y)+(i*e-a*h)*(r*x-u*y)},i.add=function(t){return this.m00+=t.m00,this.m01+=t.m01,this.m02+=t.m02,this.m03+=t.m03,this.m04+=t.m04,this.m05+=t.m05,this.m06+=t.m06,this.m07+=t.m07,this.m08+=t.m08,this.m09+=t.m09,this.m10+=t.m10,this.m11+=t.m11,this.m12+=t.m12,this.m13+=t.m13,this.m14+=t.m14,this.m15+=t.m15,this},i.subtract=function(t){return this.m00-=t.m00,this.m01-=t.m01,this.m02-=t.m02,this.m03-=t.m03,this.m04-=t.m04,this.m05-=t.m05,this.m06-=t.m06,this.m07-=t.m07,this.m08-=t.m08,this.m09-=t.m09,this.m10-=t.m10,this.m11-=t.m11,this.m12-=t.m12,this.m13-=t.m13,this.m14-=t.m14,this.m15-=t.m15,this},i.multiply=function(t){var m=this.m00,i=this.m01,a=this.m02,n=this.m03,s=this.m04,h=this.m05,e=this.m06,r=this.m07,u=this.m08,o=this.m09,c=this.m10,y=this.m11,x=this.m12,f=this.m13,M=this.m14,l=this.m15,z=t.m00,b=t.m01,w=t.m02,v=t.m03;return this.m00=z*m+b*s+w*u+v*x,this.m01=z*i+b*h+w*o+v*f,this.m02=z*a+b*e+w*c+v*M,this.m03=z*n+b*r+w*y+v*l,z=t.m04,b=t.m05,w=t.m06,v=t.m07,this.m04=z*m+b*s+w*u+v*x,this.m05=z*i+b*h+w*o+v*f,this.m06=z*a+b*e+w*c+v*M,this.m07=z*n+b*r+w*y+v*l,z=t.m08,b=t.m09,w=t.m10,v=t.m11,this.m08=z*m+b*s+w*u+v*x,this.m09=z*i+b*h+w*o+v*f,this.m10=z*a+b*e+w*c+v*M,this.m11=z*n+b*r+w*y+v*l,z=t.m12,b=t.m13,w=t.m14,v=t.m15,this.m12=z*m+b*s+w*u+v*x,this.m13=z*i+b*h+w*o+v*f,this.m14=z*a+b*e+w*c+v*M,this.m15=z*n+b*r+w*y+v*l,this},i.multiplyScalar=function(t){return this.m00*=t,this.m01*=t,this.m02*=t,this.m03*=t,this.m04*=t,this.m05*=t,this.m06*=t,this.m07*=t,this.m08*=t,this.m09*=t,this.m10*=t,this.m11*=t,this.m12*=t,this.m13*=t,this.m14*=t,this.m15*=t,this},i.translate=function(t){return this.m12+=t.x,this.m13+=t.y,this.m14+=t.z,this},i.scale=function(t){var m=t.x,i=t.y,a=t.z;return this.m00*=m,this.m01*=m,this.m02*=m,this.m03*=m,this.m04*=i,this.m05*=i,this.m06*=i,this.m07*=i,this.m08*=a,this.m09*=a,this.m10*=a,this.m11*=a,this},i.rotate=function(t,m){var i=m.x,a=m.y,n=m.z,s=Math.sqrt(i*i+a*a+n*n);if(Math.abs(s)<p)return null;i*=s=1/s,a*=s,n*=s;var h=Math.sin(t),e=Math.cos(t),r=1-e,u=this.m00,o=this.m01,c=this.m02,y=this.m03,x=this.m04,f=this.m05,M=this.m06,l=this.m07,z=this.m08,b=this.m09,w=this.m10,v=this.m11,g=i*i*r+e,d=a*i*r+n*h,N=n*i*r-a*h,q=i*a*r-n*h,S=a*a*r+e,E=n*a*r+i*h,j=i*n*r+a*h,V=a*n*r-i*h,_=n*n*r+e;return this.m00=u*g+x*d+z*N,this.m01=o*g+f*d+b*N,this.m02=c*g+M*d+w*N,this.m03=y*g+l*d+v*N,this.m04=u*q+x*S+z*E,this.m05=o*q+f*S+b*E,this.m06=c*q+M*S+w*E,this.m07=y*q+l*S+v*E,this.m08=u*j+x*V+z*_,this.m09=o*j+f*V+b*_,this.m10=c*j+M*V+w*_,this.m11=y*j+l*V+v*_,this},i.getTranslation=function(t){return t.x=this.m12,t.y=this.m13,t.z=this.m14,t},i.getScale=function(t){var m=nt.m00=this.m00,i=nt.m01=this.m01,a=nt.m02=this.m02,n=nt.m03=this.m04,s=nt.m04=this.m05,h=nt.m05=this.m06,e=nt.m06=this.m08,r=nt.m07=this.m09,u=nt.m08=this.m10;return t.x=Math.sqrt(m*m+i*i+a*a),t.y=Math.sqrt(n*n+s*s+h*h),t.z=Math.sqrt(e*e+r*r+u*u),G.determinant(nt)<0&&(t.x*=-1),t},i.getRotation=function(t){var m=this.m00+this.m05+this.m10,i=0;return m>0?(i=2*Math.sqrt(m+1),t.w=.25*i,t.x=(this.m06-this.m09)/i,t.y=(this.m08-this.m02)/i,t.z=(this.m01-this.m04)/i):this.m00>this.m05&&this.m00>this.m10?(i=2*Math.sqrt(1+this.m00-this.m05-this.m10),t.w=(this.m06-this.m09)/i,t.x=.25*i,t.y=(this.m01+this.m04)/i,t.z=(this.m08+this.m02)/i):this.m05>this.m10?(i=2*Math.sqrt(1+this.m05-this.m00-this.m10),t.w=(this.m08-this.m02)/i,t.x=(this.m01+this.m04)/i,t.y=.25*i,t.z=(this.m06+this.m09)/i):(i=2*Math.sqrt(1+this.m10-this.m00-this.m05),t.w=(this.m01-this.m04)/i,t.x=(this.m08+this.m02)/i,t.y=(this.m06+this.m09)/i,t.z=.25*i),t},i.fromRTS=function(t,m,i){var a=t.x,n=t.y,s=t.z,h=t.w,e=a+a,r=n+n,u=s+s,o=a*e,c=a*r,y=a*u,x=n*r,f=n*u,M=s*u,l=h*e,z=h*r,b=h*u,w=i.x,v=i.y,g=i.z;return this.m00=(1-(x+M))*w,this.m01=(c+b)*w,this.m02=(y-z)*w,this.m03=0,this.m04=(c-b)*v,this.m05=(1-(o+M))*v,this.m06=(f+l)*v,this.m07=0,this.m08=(y+z)*g,this.m09=(f-l)*g,this.m10=(1-(o+x))*g,this.m11=0,this.m12=m.x,this.m13=m.y,this.m14=m.z,this.m15=1,this},i.fromQuat=function(t){var m=t.x,i=t.y,a=t.z,n=t.w,s=m+m,h=i+i,e=a+a,r=m*s,u=i*s,o=i*h,c=a*s,y=a*h,x=a*e,f=n*s,M=n*h,l=n*e;return this.m00=1-o-x,this.m01=u+l,this.m02=c-M,this.m03=0,this.m04=u-l,this.m05=1-r-x,this.m06=y+f,this.m07=0,this.m08=c+M,this.m09=y-f,this.m10=1-r-o,this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m15=1,this},m}(u));it.IDENTITY=Object.freeze(new it);var at=new X,nt=new G;function st(t,m,i,a,n,s,h,e,r,u,o,c,y,x,f,M){return new it(t,m,i,a,n,s,h,e,r,u,o,c,y,x,f,M)}e.fastDefine("cc.Mat4",it,{m00:1,m01:0,m02:0,m03:0,m04:0,m05:1,m06:0,m07:0,m08:0,m09:0,m10:1,m11:0,m12:0,m13:0,m14:0,m15:1}),r.Mat4=it,r.mat4=st;var ht=t("V",function(t){function m(m,i){var a;return a=t.call(this)||this,m&&"object"==typeof m?(a.x=m.x,a.y=m.y):(a.x=m||0,a.y=i||0),a}h(m,t),m.clone=function(t){return new m(t.x,t.y)},m.copy=function(t,m){return t.x=m.x,t.y=m.y,t},m.set=function(t,m,i){return t.x=m,t.y=i,t},m.add=function(t,m,i){return t.x=m.x+i.x,t.y=m.y+i.y,t},m.subtract=function(t,m,i){return t.x=m.x-i.x,t.y=m.y-i.y,t},m.multiply=function(t,m,i){return t.x=m.x*i.x,t.y=m.y*i.y,t},m.divide=function(t,m,i){return t.x=m.x/i.x,t.y=m.y/i.y,t},m.ceil=function(t,m){return t.x=Math.ceil(m.x),t.y=Math.ceil(m.y),t},m.floor=function(t,m){return t.x=Math.floor(m.x),t.y=Math.floor(m.y),t},m.min=function(t,m,i){return t.x=Math.min(m.x,i.x),t.y=Math.min(m.y,i.y),t},m.max=function(t,m,i){return t.x=Math.max(m.x,i.x),t.y=Math.max(m.y,i.y),t},m.round=function(t,m){return t.x=Math.round(m.x),t.y=Math.round(m.y),t},m.multiplyScalar=function(t,m,i){return t.x=m.x*i,t.y=m.y*i,t},m.scaleAndAdd=function(t,m,i,a){return t.x=m.x+i.x*a,t.y=m.y+i.y*a,t},m.distance=function(t,m){var i=m.x-t.x,a=m.y-t.y;return Math.sqrt(i*i+a*a)},m.squaredDistance=function(t,m){var i=m.x-t.x,a=m.y-t.y;return i*i+a*a},m.len=function(t){var m=t.x,i=t.y;return Math.sqrt(m*m+i*i)},m.lengthSqr=function(t){var m=t.x,i=t.y;return m*m+i*i},m.negate=function(t,m){return t.x=-m.x,t.y=-m.y,t},m.inverse=function(t,m){return t.x=1/m.x,t.y=1/m.y,t},m.inverseSafe=function(t,m){var i=m.x,a=m.y;return Math.abs(i)<p?t.x=0:t.x=1/i,Math.abs(a)<p?t.y=0:t.y=1/a,t},m.normalize=function(t,m){var i=m.x,a=m.y,n=i*i+a*a;return n>0&&(n=1/Math.sqrt(n),t.x=i*n,t.y=a*n),t},m.dot=function(t,m){return t.x*m.x+t.y*m.y},m.cross=function(t,m,i){return t instanceof X?(t.x=t.y=0,t.z=m.x*i.y-m.y*i.x,t):t.x*m.y-t.y*m.x},m.lerp=function(t,m,i,a){var n=m.x,s=m.y;return t.x=n+a*(i.x-n),t.y=s+a*(i.y-s),t},m.random=function(t,m){m=m||1;var i=2*S()*Math.PI;return t.x=Math.cos(i)*m,t.y=Math.sin(i)*m,t},m.transformMat3=function(t,m,i){var a=m.x,n=m.y;return t.x=i.m00*a+i.m03*n+i.m06,t.y=i.m01*a+i.m04*n+i.m07,t},m.transformMat4=function(t,m,i){var a=m.x,n=m.y;return t.x=i.m00*a+i.m04*n+i.m12,t.y=i.m01*a+i.m05*n+i.m13,t},m.str=function(t){return"Vec2("+t.x+", "+t.y+")"},m.toArray=function(t,m,i){return void 0===i&&(i=0),t[i+0]=m.x,t[i+1]=m.y,t},m.fromArray=function(t,m,i){return void 0===i&&(i=0),t.x=m[i+0],t.y=m[i+1],t},m.strictEquals=function(t,m){return t.x===m.x&&t.y===m.y},m.equals=function(t,m,i){return void 0===i&&(i=p),Math.abs(t.x-m.x)<=i*Math.max(1,Math.abs(t.x),Math.abs(m.x))&&Math.abs(t.y-m.y)<=i*Math.max(1,Math.abs(t.y),Math.abs(m.y))},m.angle=function(t,i){m.normalize(et,t),m.normalize(rt,i);var a=m.dot(et,rt);return a>1?0:a<-1?Math.PI:Math.acos(a)};var i=m.prototype;return i.clone=function(){return new m(this.x,this.y)},i.set=function(t,m){return t&&"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t||0,this.y=m||0),this},i.equals=function(t,m){return void 0===m&&(m=p),Math.abs(this.x-t.x)<=m*Math.max(1,Math.abs(this.x),Math.abs(t.x))&&Math.abs(this.y-t.y)<=m*Math.max(1,Math.abs(this.y),Math.abs(t.y))},i.equals2f=function(t,m,i){return void 0===i&&(i=p),Math.abs(this.x-t)<=i*Math.max(1,Math.abs(this.x),Math.abs(t))&&Math.abs(this.y-m)<=i*Math.max(1,Math.abs(this.y),Math.abs(m))},i.strictEquals=function(t){return t&&this.x===t.x&&this.y===t.y},i.strictEquals2f=function(t,m){return this.x===t&&this.y===m},i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+")"},i.lerp=function(t,m){var i=this.x,a=this.y;return this.x=i+m*(t.x-i),this.y=a+m*(t.y-a),this},i.clampf=function(t,m){return this.x=N(this.x,t.x,m.x),this.y=N(this.y,t.y,m.y),this},i.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.add2f=function(t,m){return this.x+=t,this.y+=m,this},i.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.subtract2f=function(t,m){return this.x-=t,this.y-=m,this},i.multiplyScalar=function(t){return"object"==typeof t&&console.warn("should use Vec2.multiply for vector * vector operation"),this.x*=t,this.y*=t,this},i.multiply=function(t){return"object"!=typeof t&&console.warn("should use Vec2.scale for vector * scalar operation"),this.x*=t.x,this.y*=t.y,this},i.multiply2f=function(t,m){return this.x*=t,this.y*=m,this},i.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.divide2f=function(t,m){return this.x/=t,this.y/=m,this},i.negative=function(){return this.x=-this.x,this.y=-this.y,this},i.dot=function(t){return this.x*t.x+this.y*t.y},i.cross=function(t){return this.x*t.y-this.y*t.x},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.lengthSqr=function(){return this.x*this.x+this.y*this.y},i.normalize=function(){var t=this.x,m=this.y,i=t*t+m*m;return i>0&&(i=1/Math.sqrt(i),this.x*=i,this.y*=i),this},i.angle=function(t){var m=this.lengthSqr(),i=t.lengthSqr();if(0===m||0===i)return console.warn("Can't get angle between zero vector"),0;var a=this.dot(t)/Math.sqrt(m*i);return a=N(a,-1,1),Math.acos(a)},i.signAngle=function(t){var m=this.angle(t);return this.cross(t)<0?-m:m},i.rotate=function(t){var m=this.x,i=this.y,a=Math.sin(t),n=Math.cos(t);return this.x=n*m-a*i,this.y=a*m+n*i,this},i.project=function(t){var m=this.dot(t)/t.dot(t);return this.x=t.x*m,this.y=t.y*m,this},i.transformMat4=function(t){var m=this.x,i=this.y;return this.x=t.m00*m+t.m04*i+t.m12,this.y=t.m01*m+t.m05*i+t.m13,this},m}(u));ht.ZERO=Object.freeze(new ht(0,0)),ht.ONE=Object.freeze(new ht(1,1)),ht.NEG_ONE=Object.freeze(new ht(-1,-1)),ht.UNIT_X=Object.freeze(new ht(1,0)),ht.UNIT_Y=Object.freeze(new ht(0,1));var et=new ht,rt=new ht;function ut(t,m){return new ht(t,m)}e.fastDefine("cc.Vec2",ht,{x:0,y:0}),r.Vec2=ht,r.v2=ut,c(ht,"Vec2",[{name:"sub",newName:"subtract",target:ht,targetName:"Vec2"},{name:"mul",newName:"multiply",target:ht,targetName:"Vec2"},{name:"div",newName:"divide",target:ht,targetName:"Vec2"},{name:"dist",newName:"distance",target:ht,targetName:"Vec2"},{name:"sqrDist",newName:"squaredDistance",target:ht,targetName:"Vec2"},{name:"mag",newName:"len",target:ht,targetName:"Vec2"},{name:"sqrMag",newName:"lengthSqr",target:ht,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:ht,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:ht,targetName:"Vec2"}]),c(ht.prototype,"Vec2",[{name:"mag",newName:"length",target:ht.prototype,targetName:"Vec2"},{name:"magSqr",newName:"lengthSqr",target:ht.prototype,targetName:"Vec2"},{name:"scale",newName:"multiplyScalar",target:ht.prototype,targetName:"Vec2"},{name:"exactEquals",newName:"strictEquals",target:ht.prototype,targetName:"Vec2"}]),c(X,"Vec3",[{name:"sub",newName:"subtract",target:X,targetName:"Vec3"},{name:"mul",newName:"multiply",target:X,targetName:"Vec3"},{name:"div",newName:"divide",target:X,targetName:"Vec3"},{name:"dist",newName:"distance",target:X,targetName:"Vec3"},{name:"sqrDist",newName:"squaredDistance",target:X,targetName:"Vec3"},{name:"mag",newName:"len",target:X,targetName:"Vec3"},{name:"sqrMag",newName:"lengthSqr",target:X,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:X,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:X,targetName:"Vec3"}]),c(X.prototype,"Vec3",[{name:"mag",newName:"length",target:X.prototype,targetName:"Vec3"},{name:"magSqr",newName:"lengthSqr",target:X.prototype,targetName:"Vec3"},{name:"scale",newName:"multiplyScalar",target:X.prototype,targetName:"Vec3"},{name:"exactEquals",newName:"strictEquals",target:X.prototype,targetName:"Vec3"}]),c(O,"Vec4",[{name:"sub",newName:"subtract",target:O,targetName:"Vec4"},{name:"mul",newName:"multiply",target:O,targetName:"Vec4"},{name:"div",newName:"divide",target:O,targetName:"Vec4"},{name:"dist",newName:"distance",target:O,targetName:"Vec4"},{name:"sqrDist",newName:"squaredDistance",target:O,targetName:"Vec4"},{name:"mag",newName:"len",target:O,targetName:"Vec4"},{name:"sqrMag",newName:"lengthSqr",target:O,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:O,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:O,targetName:"Vec4"}]),c(O.prototype,"Vec4",[{name:"mag",newName:"length",target:O.prototype,targetName:"Vec4"},{name:"magSqr",newName:"lengthSqr",target:O.prototype,targetName:"Vec4"},{name:"scale",newName:"multiplyScalar",target:O.prototype,targetName:"Vec4"},{name:"exactEquals",newName:"strictEquals",target:O.prototype,targetName:"Vec4"}]),c(L,"Quat",[{name:"mag",newName:"len",target:L,targetName:"Quat"},{name:"mul",newName:"multiply",target:L,targetName:"Quat"},{name:"sqrMag",newName:"lengthSqr",target:L,targetName:"Quat"},{name:"scale",newName:"multiplyScalar",target:L,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:L,targetName:"Quat"}]),c(L.prototype,"Quat",[{name:"scale",newName:"multiplyScalar",target:L.prototype,targetName:"Quat"},{name:"exactEquals",newName:"strictEquals",target:L.prototype,targetName:"Quat"}]),c(I,"Color",[{name:"sub",newName:"subtract",target:I,targetName:"Color"},{name:"mul",newName:"multiply",target:I,targetName:"Color"},{name:"div",newName:"divide",target:I,targetName:"Color"},{name:"exactEquals",newName:"strictEquals",target:I,targetName:"Color"},{name:"fromHex",newName:"fromHEX",customFunction:function(){for(var t=arguments.length,m=new Array(t),i=0;i<t;i++)m[i]=arguments[i];var a=m[1].toString(16);return r.Color.fromHEX(m[0],a)}}]),c(G,"Mat3",[{name:"sub",newName:"subtract",target:G,targetName:"Mat3"},{name:"mul",newName:"multiply",target:G,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:G,targetName:"Mat3"},{name:"transfrom",newName:"transform",target:G,targetName:"Mat3"}]),c(G.prototype,"Mat3",[{name:"sub",newName:"subtract",target:G.prototype,targetName:"Mat3"},{name:"mul",newName:"multiply",target:G.prototype,targetName:"Mat3"},{name:"mulScalar",newName:"multiplyScalar",target:G.prototype,targetName:"Mat3"},{name:"exactEquals",newName:"strictEquals",target:G.prototype,targetName:"Mat3"}]),c(it,"Mat4",[{name:"sub",newName:"subtract",target:it,targetName:"Mat4"},{name:"mul",newName:"multiply",target:it,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:it,targetName:"Mat4"}]),c(it.prototype,"Mat4",[{name:"sub",newName:"subtract",target:it.prototype,targetName:"Mat4"},{name:"mul",newName:"multiply",target:it.prototype,targetName:"Mat4"},{name:"mulScalar",newName:"multiplyScalar",target:it.prototype,targetName:"Mat4"},{name:"exactEquals",newName:"strictEquals",target:it.prototype,targetName:"Mat4"}]);var ot=t("A",function(){function t(t,m,i,a,n,s){void 0===t&&(t=1),void 0===m&&(m=0),void 0===i&&(i=0),void 0===a&&(a=1),void 0===n&&(n=0),void 0===s&&(s=0),this.a=t,this.b=m,this.c=i,this.d=a,this.tx=n,this.ty=s}return t.identity=function(){return new t},t.clone=function(m){return new t(m.a,m.b,m.c,m.d,m.tx,m.ty)},t.concat=function(t,m,i){var a=m.a,n=m.b,s=m.c,h=m.d,e=m.tx,r=m.ty;t.a=a*i.a+n*i.c,t.b=a*i.b+n*i.d,t.c=s*i.a+h*i.c,t.d=s*i.b+h*i.d,t.tx=e*i.a+r*i.c+i.tx,t.ty=e*i.b+r*i.d+i.ty},t.invert=function(t,m){var i=1/(m.a*m.d-m.b*m.c);t.a=i*m.d,t.b=-i*m.b,t.c=-i*m.c,t.d=i*m.a,t.tx=i*(m.c*m.ty-m.d*m.tx),t.ty=i*(m.b*m.tx-m.a*m.ty)},t.fromMat4=function(t,m){t.a=m.m00,t.b=m.m01,t.c=m.m04,t.d=m.m05,t.tx=m.m12,t.ty=m.m13},t.transformVec2=function(t,m,i,a){var n,s;a?(n=m,s=i):(a=i,n=m.x,s=m.y),t.x=a.a*n+a.c*s+a.tx,t.y=a.b*n+a.d*s+a.ty},t.transformSize=function(t,m,i){t.width=i.a*m.width+i.c*m.height,t.height=i.b*m.width+i.d*m.height},t.transformRect=function(t,m,i){var a=m.x+m.width,n=m.y+m.height,s=i.a*m.x+i.c*m.y+i.tx,h=i.b*m.x+i.d*m.y+i.ty,e=i.a*a+i.c*m.y+i.tx,r=i.b*a+i.d*m.y+i.ty,u=i.a*m.x+i.c*n+i.tx,o=i.b*m.x+i.d*n+i.ty,c=i.a*a+i.c*n+i.tx,y=i.b*a+i.d*n+i.ty,x=Math.min(s,e,u,c),f=Math.max(s,e,u,c),M=Math.min(h,r,o,y),l=Math.max(h,r,o,y);t.x=x,t.y=M,t.width=f-x,t.height=l-M},t.transformObb=function(t,m,i,a,n,s){var h=s.a*n.x+s.c*n.y+s.tx,e=s.b*n.x+s.d*n.y+s.ty,r=s.a*n.width,u=s.b*n.width,o=s.c*n.height,c=s.d*n.height;m.x=h,m.y=e,i.x=r+h,i.y=u+e,t.x=o+h,t.y=c+e,a.x=r+o+h,a.y=u+c+e},t}());r.AffineTransform=ot;var ct=t("S",function(t){function m(m,i){var a;return a=t.call(this)||this,m&&"object"==typeof m?(a.width=m.width,a.height=m.height):(a.width=m||0,a.height=i||0),a}h(m,t),m.lerp=function(t,m,i,a){return t.width=m.width+(i.width-m.width)*a,t.height=m.height+(i.height-m.height)*a,t};var i=m.prototype;return i.clone=function(){return new m(this.width,this.height)},i.set=function(t,m){return t&&"object"==typeof t?(this.height=t.height,this.width=t.width):(this.width=t||0,this.height=m||0),this},i.equals=function(t){return this.width===t.width&&this.height===t.height},i.lerp=function(t,m){return this.width+=(t.width-this.width)*m,this.height+=(t.height-this.height)*m,this},i.toString=function(){return"("+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},o(m,[{key:"x",get:function(){return this.width},set:function(t){this.width=t}},{key:"y",get:function(){return this.height},set:function(t){this.height=t}}]),m}(u));function yt(t,m){return void 0===t&&(t=0),void 0===m&&(m=0),new ct(t,m)}ct.ZERO=Object.freeze(new ct(0,0)),ct.ONE=Object.freeze(new ct(1,1)),e.fastDefine("cc.Size",ct,{width:0,height:0}),r.size=yt,r.Size=ct;var xt=t("R",function(t){function m(m,i,a,n){var s;return s=t.call(this)||this,m&&"object"==typeof m?(s.y=m.y,s.width=m.width,s.height=m.height,s.x=m.x):(s.x=m||0,s.y=i||0,s.width=a||0,s.height=n||0),s}h(m,t),m.fromMinMax=function(t,m,i){var a=Math.min(m.x,i.x),n=Math.min(m.y,i.y),s=Math.max(m.x,i.x),h=Math.max(m.y,i.y);return t.x=a,t.y=n,t.width=s-a,t.height=h-n,t},m.lerp=function(t,m,i,a){var n=m.x,s=m.y,h=m.width,e=m.height;return t.x=n+(i.x-n)*a,t.y=s+(i.y-s)*a,t.width=h+(i.width-h)*a,t.height=e+(i.height-e)*a,t},m.intersection=function(t,m,i){var a=m.x,n=m.y,s=m.x+m.width,h=m.y+m.height,e=i.x,r=i.y,u=i.x+i.width,o=i.y+i.height;return t.x=Math.max(a,e),t.y=Math.max(n,r),t.width=Math.min(s,u)-t.x,t.height=Math.min(h,o)-t.y,t},m.union=function(t,m,i){var a=m.x,n=m.y,s=m.width,h=m.height,e=i.x,r=i.y,u=i.width,o=i.height;return t.x=Math.min(a,e),t.y=Math.min(n,r),t.width=Math.max(a+s,e+u)-t.x,t.height=Math.max(n+h,r+o)-t.y,t};var i=m.prototype;return i.clone=function(){return new m(this.x,this.y,this.width,this.height)},i.set=function(t,m,i,a){return t&&"object"==typeof t?(this.y=t.y,this.width=t.width,this.height=t.height,this.x=t.x):(this.x=t||0,this.y=m||0,this.width=i||0,this.height=a||0),this},i.equals=function(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},i.lerp=function(t,m){var i=this.x,a=this.y,n=this.width,s=this.height;return this.x=i+(t.x-i)*m,this.y=a+(t.y-a)*m,this.width=n+(t.width-n)*m,this.height=s+(t.height-s)*m,this},i.toString=function(){return"("+this.x.toFixed(2)+", "+this.y.toFixed(2)+", "+this.width.toFixed(2)+", "+this.height.toFixed(2)+")"},i.intersects=function(t){var m=this.x+this.width,i=this.y+this.height,a=t.x+t.width,n=t.y+t.height;return!(m<t.x||a<this.x||i<t.y||n<this.y)},i.contains=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},i.containsRect=function(t){return this.x<=t.x&&this.x+this.width>=t.x+t.width&&this.y<=t.y&&this.y+this.height>=t.y+t.height},i.transformMat4=function(t){var m=this.x,i=this.y,a=m+this.width,n=i+this.height,s=t.m00*m+t.m04*i+t.m12,h=t.m01*m+t.m05*i+t.m13,e=t.m00*a+t.m04*i+t.m12,r=t.m01*a+t.m05*i+t.m13,u=t.m00*m+t.m04*n+t.m12,o=t.m01*m+t.m05*n+t.m13,c=t.m00*a+t.m04*n+t.m12,y=t.m01*a+t.m05*n+t.m13,x=Math.min(s,e,u,c),f=Math.max(s,e,u,c),M=Math.min(h,r,o,y),l=Math.max(h,r,o,y);return this.x=x,this.y=M,this.width=f-x,this.height=l-M,this},i.transformMat4ToPoints=function(t,m,i,a,n){var s=this.x,h=this.y,e=s+this.width,r=h+this.height;m.x=t.m00*s+t.m04*h+t.m12,m.y=t.m01*s+t.m05*h+t.m13,n.x=t.m00*e+t.m04*h+t.m12,n.y=t.m01*e+t.m05*h+t.m13,i.x=t.m00*s+t.m04*r+t.m12,i.y=t.m01*s+t.m05*r+t.m13,a.x=t.m00*e+t.m04*r+t.m12,a.y=t.m01*e+t.m05*r+t.m13},o(m,[{key:"xMin",get:function(){return this.x},set:function(t){this.width+=this.x-t,this.x=t}},{key:"yMin",get:function(){return this.y},set:function(t){this.height+=this.y-t,this.y=t}},{key:"xMax",get:function(){return this.x+this.width},set:function(t){this.width=t-this.x}},{key:"yMax",get:function(){return this.y+this.height},set:function(t){this.height=t-this.y}},{key:"center",get:function(){return new ht(this.x+.5*this.width,this.y+.5*this.height)},set:function(t){this.x=t.x-.5*this.width,this.y=t.y-.5*this.height}},{key:"origin",get:function(){return new ht(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}},{key:"size",get:function(){return new ct(this.width,this.height)},set:function(t){this.width=t.width,this.height=t.height}},{key:"z",get:function(){return this.width},set:function(t){this.width=t}},{key:"w",get:function(){return this.height},set:function(t){this.height=t}}]),m}(u));function ft(t,m,i,a){return void 0===t&&(t=0),void 0===m&&(m=0),void 0===i&&(i=0),void 0===a&&(a=0),new xt(t,m,i,a)}e.fastDefine("cc.Rect",xt,{x:0,y:0,width:0,height:0}),r.Rect=xt,r.rect=ft;var Mt=t("I",Float64Array);t("J",function(t){function m(){return t.apply(this,arguments)||this}return h(m,t),m.createFloatArray=function(t){return new Mt(t)},o(m,[{key:"array",get:function(){return this._array}}]),m}(u))}}}));
